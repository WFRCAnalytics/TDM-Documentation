<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>WFTDM Documentation - Model 2019 Base-Year Updates</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../_pictures/favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="../../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="https://wfrc.org" class="navbar-brand navbar-brand-logo">
    <img src="../../../_pictures/wf-logo-new-white-t.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-version-9-series" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Version 9 Series</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-version-9-series">    
        <li>
    <a class="dropdown-item" href="../../../v9x/v900/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-past-versions" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Past Versions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-past-versions">    
        <li>
    <a class="dropdown-item" href="../../../v8x/v832/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v831/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v830/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.0</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/WFRCAnalytics/TDM-Documentation/tree/gh-pages" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="mailto:sswim@wfrc.org" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../v9x/v900/whats-new/11-overview.html"><span style="color: #3E6682;">**Whats New Document**</span></a></li><li class="breadcrumb-item"><a href="../../../v9x/v900/whats-new/15-baseyear.html">5 Model 2019 Base-Year Updates</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;font-size: 25px;"><strong>Version 9.0.0</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;"><strong>Whats New Document</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/11-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/12-taz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2 Traffic Analysis Zone Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/13-sedata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 Socioeconomic Data Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/14-networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 Highway &amp; Transit Networks Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/15-baseyear.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">5 Model 2019 Base-Year Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/16-modelenhancements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6 Model Enhancements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/17-modelresults.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7 Compare Model Results</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;"><strong>Model Validation Report</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/2-tripgen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trip Generation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/3-distribute.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trip Distribution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/4-modechoice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mode Choice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/5-assignhwy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Highway Assignment</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><strong>Section Contents</strong><br>__________________</h2>
   
  <ul class="collapse">
  <li><a href="#parameters" id="toc-parameters" class="nav-link active" data-scroll-target="#parameters">Parameters</a></li>
  <li><a href="#other-input-files" id="toc-other-input-files" class="nav-link" data-scroll-target="#other-input-files">Other Input Files</a></li>
  <li><a href="#put-enrollment-charts-here" id="toc-put-enrollment-charts-here" class="nav-link" data-scroll-target="#put-enrollment-charts-here">PUT ENROLLMENT CHARTS HERE</a>
  <ul class="collapse">
  <li><a href="#calibration" id="toc-calibration" class="nav-link" data-scroll-target="#calibration">Calibration</a></li>
  </ul></li>
  <li><a href="#put-trip-gen-charts-here" id="toc-put-trip-gen-charts-here" class="nav-link" data-scroll-target="#put-trip-gen-charts-here">PUT TRIP GEN CHARTS HERE</a></li>
  <li><a href="#put-truck-charts-here" id="toc-put-truck-charts-here" class="nav-link" data-scroll-target="#put-truck-charts-here">PUT TRUCK CHARTS HERE</a></li>
  <li><a href="#put-average-trip-length-here" id="toc-put-average-trip-length-here" class="nav-link" data-scroll-target="#put-average-trip-length-here">PUT AVERAGE TRIP LENGTH HERE</a></li>
  <li><a href="#put-friction-factors-here" id="toc-put-friction-factors-here" class="nav-link" data-scroll-target="#put-friction-factors-here">PUT FRICTION FACTORS HERE</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Model 2019 Base-Year Updates</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The following parameters and inputs were updated to bring the WF TDM base year from 2015 to 2019.</p>
<section id="parameters" class="level2">
<h2 class="anchored" data-anchor-id="parameters">Parameters</h2>
<section id="income" class="level3">
<h3 class="anchored" data-anchor-id="income">Income</h3>
<p>Median income parameters for the model were updated using 2019 5-year ACS data and kept in 2019 dollars to reflect 2019 base year. Median income parameters in version 8 were estimated from 2015 ACS data and deflated to 2010 dollars. The regional median income was calculated for each county and for each model space and used to update the following income-related parameters in <code>0_GeneralParameters.block</code>.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="1">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<div id="tbl-hh-disagg" class="anchored">
<table id="T_c7f85" data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Table&nbsp;1: Regional Median Income</caption>
<thead>
<tr class="header">
<th id="T_c7f85_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Parameter</th>
<th id="T_c7f85_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">v9 Value</th>
<th id="T_c7f85_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">v8 Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_c7f85_row0_col0" class="data row0 col0">Reg_Median_Inc</td>
<td id="T_c7f85_row0_col1" class="data row0 col1">$74,946</td>
<td id="T_c7f85_row0_col2" class="data row0 col2">$58,793</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<div id="tbl-exogen-income" class="anchored">
<table id="T_c57de" data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Table&nbsp;2: Income Break Points for Airport Exogenous Trip Table Generation</caption>
<thead>
<tr class="header">
<th id="T_c57de_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Parameter</th>
<th id="T_c57de_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">v9 Value</th>
<th id="T_c57de_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">v8 Value</th>
<th id="T_c57de_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_c57de_row0_col0" class="data row0 col0">Income_Lo</td>
<td id="T_c57de_row0_col1" class="data row0 col1">$45,000</td>
<td id="T_c57de_row0_col2" class="data row0 col2">$35,000</td>
<td id="T_c57de_row0_col3" class="data row0 col3">breakpoint between Inc1 &amp; Inc2</td>
</tr>
<tr class="even">
<td id="T_c57de_row1_col0" class="data row1 col0">Income_Md</td>
<td id="T_c57de_row1_col1" class="data row1 col1">$75,000</td>
<td id="T_c57de_row1_col2" class="data row1 col2">$70,000</td>
<td id="T_c57de_row1_col3" class="data row1 col3">breakpoint between Inc2 &amp; Inc3</td>
</tr>
<tr class="odd">
<td id="T_c57de_row2_col0" class="data row2 col0">Income_Hi</td>
<td id="T_c57de_row2_col1" class="data row2 col1">$125,000</td>
<td id="T_c57de_row2_col2" class="data row2 col2">$100,000</td>
<td id="T_c57de_row2_col3" class="data row2 col3">breakpoint between Inc3 &amp; Inc4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>The TAZ-level median income was also updated within the socioeconomic input files.</p>
<p>The household disaggregation income lookup curves and seed table were re-estimated based on the 2019 ACS data. The income lookup curves were estimated using data for all of Utah then calibrated specifically for the Wasatch Front model. <a href="#fig-lookup">Figure&nbsp;1</a> shows a comparison of the version 9 and version 8 income lookup curves for the Wasatch Front.</p>
<p>The version 9 calibrated curves show a slight shift in the proportion of households toward the highest income groups from the middle two income groups relative to version 8. The lowest income group was very similar between versions 8 and 9. As the model currently groups the top three income groups into the “high income” category, the impact to the model is minimal.</p>
<div id="fig-lookup" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="_pictures/lookup-curves.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Comparison of Wasatch Front Income Lookup Curves</figcaption>
</figure>
</div>
</section>
<section id="value-of-time" class="level3">
<h3 class="anchored" data-anchor-id="value-of-time">Value of Time</h3>
<p>Value of time parameters were updated using 2019 5-year ACS data. The value of time calculation in version 9 used the same assumptions as version 8 (i.e.&nbsp;39% of median income for work trips, 30% of median income for personal trips, etc.). The value of time parameters in version 9 are in 2019 dollars. Version 8 parameters were calibrated to 2015 ACS data and deflated to 2010 dollars. Values of time are in cents/minute.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="115">
<div id="tbl-vot1" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;3: Value of Time Rates</caption>
<colgroup>
<col style="width: 24%">
<col style="width: 8%">
<col style="width: 24%">
<col style="width: 8%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">v9 Parameter</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Parameter</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">VOT_Auto_Wrk</td>
<td style="text-align: left;">22</td>
<td style="text-align: left;">VOT_Auto_Wrk</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">work trips (HBW)</td>
</tr>
<tr class="even">
<td style="text-align: left;">VOT_Auto_Per</td>
<td style="text-align: left;">17</td>
<td style="text-align: left;">VOT_Auto_Per</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">non-work trips</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VOT_Auto_Ext</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">VOT_Auto_Ext</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">external</td>
</tr>
<tr class="even">
<td style="text-align: left;">VOT_LT</td>
<td style="text-align: left;">37</td>
<td style="text-align: left;">VOT_LT</td>
<td style="text-align: left;">30</td>
<td style="text-align: left;">light truck</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VOT_MD</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">VOT_MD</td>
<td style="text-align: left;">40</td>
<td style="text-align: left;">medium truck</td>
</tr>
<tr class="even">
<td style="text-align: left;">VOT_HV</td>
<td style="text-align: left;">63</td>
<td style="text-align: left;">VOT_HV</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">heavy truck</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VOT_Toll</td>
<td style="text-align: left;">63</td>
<td style="text-align: left;">VOT_Toll</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">all vehicles on tollway</td>
</tr>
<tr class="even">
<td style="text-align: left;">VOT_HOT_DA</td>
<td style="text-align: left;">63</td>
<td style="text-align: left;">VOT_HOT_DA</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">drive alone on HOT</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>To better understand the relative change in the value of time parameters, the parameters were normalized by the work-trip parameter and the percent difference in the ratios was compared. The percent differences show that the relative change between the variables in versions 8 and version 9 is very similar, indicating there isn’t a strong behavioral change due to the update of this parameter.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="116">
<div id="tbl-relative-vot-ratios" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;4: Relative Value of Time Ratios</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 34%">
<col style="width: 34%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: left;">v9 Value Relative to Work Trips</th>
<th style="text-align: left;">v8 Value Relative to Work Trips</th>
<th style="text-align: left;">% Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">work trips</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">0.0%</td>
</tr>
<tr class="even">
<td style="text-align: left;">non-work trips</td>
<td style="text-align: left;">0.77</td>
<td style="text-align: left;">0.78</td>
<td style="text-align: left;">-0.6%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">external</td>
<td style="text-align: left;">0.91</td>
<td style="text-align: left;">0.89</td>
<td style="text-align: left;">2.3%</td>
</tr>
<tr class="even">
<td style="text-align: left;">light truck</td>
<td style="text-align: left;">1.68</td>
<td style="text-align: left;">1.67</td>
<td style="text-align: left;">0.9%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">medium truck</td>
<td style="text-align: left;">2.27</td>
<td style="text-align: left;">2.22</td>
<td style="text-align: left;">2.3%</td>
</tr>
<tr class="even">
<td style="text-align: left;">heavy truck</td>
<td style="text-align: left;">2.86</td>
<td style="text-align: left;">2.78</td>
<td style="text-align: left;">3.1%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="auto-operating-costs" class="level3">
<h3 class="anchored" data-anchor-id="auto-operating-costs">Auto Operating Costs</h3>
<p>Auto operating costs were updated to reflect 2019 fuel cost, average fuel economy, and cost of vehicle maintenance and are in 2019 dollars. Version 8 parameters were calibrated to 2015 data and deflated to 2010 dollars. Costs are in cents/mile.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<div id="tbl-auto-op" class="anchored">
<table id="T_1c70b" data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Table&nbsp;5: Auto Operating Cost Parameters</caption>
<thead>
<tr class="header">
<th id="T_1c70b_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Parameter</th>
<th id="T_1c70b_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">v9 Value</th>
<th id="T_1c70b_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">v8 Value</th>
<th id="T_1c70b_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_1c70b_row0_col0" class="data row0 col0">AOC_Auto</td>
<td id="T_1c70b_row0_col1" class="data row0 col1">21.7</td>
<td id="T_1c70b_row0_col2" class="data row0 col2">18.3</td>
<td id="T_1c70b_row0_col3" class="data row0 col3">auto</td>
</tr>
<tr class="even">
<td id="T_1c70b_row1_col0" class="data row1 col0">AOC_LT</td>
<td id="T_1c70b_row1_col1" class="data row1 col1">27.3</td>
<td id="T_1c70b_row1_col2" class="data row1 col2">24.6</td>
<td id="T_1c70b_row1_col3" class="data row1 col3">light truck</td>
</tr>
<tr class="odd">
<td id="T_1c70b_row2_col0" class="data row2 col0">AOC_MD</td>
<td id="T_1c70b_row2_col1" class="data row2 col1">55.5</td>
<td id="T_1c70b_row2_col2" class="data row2 col2">47.8</td>
<td id="T_1c70b_row2_col3" class="data row2 col3">medium truck</td>
</tr>
<tr class="even">
<td id="T_1c70b_row3_col0" class="data row3 col0">AOC_HV</td>
<td id="T_1c70b_row3_col1" class="data row3 col1">74.3</td>
<td id="T_1c70b_row3_col2" class="data row3 col2">63.7</td>
<td id="T_1c70b_row3_col3" class="data row3 col3">heavy truck</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>The auto operating cost parameters in versions 8 and 9 were normalized by the auto-cost parameter. The percent differences between the version 8 and 9 ratios indicate that the relative cost to operate trucks compared to autos is slightly less in version 9 than in version 8.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="118">
<div id="tbl-auto-cost" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;6: Relative Auto Operating Cost Ratios</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">% Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">auto</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">0.0%</td>
</tr>
<tr class="even">
<td style="text-align: left;">light truck</td>
<td style="text-align: left;">1.26</td>
<td style="text-align: left;">1.34</td>
<td style="text-align: left;">-6.4%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">medium truck</td>
<td style="text-align: left;">2.56</td>
<td style="text-align: left;">2.61</td>
<td style="text-align: left;">-2.1%</td>
</tr>
<tr class="even">
<td style="text-align: left;">heavy truck</td>
<td style="text-align: left;">3.42</td>
<td style="text-align: left;">3.48</td>
<td style="text-align: left;">-1.6%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>The relationship (ratio) between the auto operating costs and the value of time affects the distance term in the best-path functions in the distribution and assignment models. The higher the ratio, the more influence the distance term will exhibit on path choice and the more the model will be sensitive to shortest path vs.&nbsp;shortest time. A comparison of the ratios suggests that, while the overall pattern looks similar, distance will have slightly less influence on path choice for person trips in version 9 than in version 8, meaning person trips will be slightly more sensitive to congestion (i.e.&nbsp;travel time). This slight difference, however, should not be large enough to fundamentally change the behavior in the model. There is a more significant difference in the ratio for truck trips suggesting that truck trips (in particular light trucks) will be a little more sensitive to the influence of congestion in version 9 than in version 8.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="119">
<div id="tbl-auto-vot" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;7: Auto Operating Cost / Value of Time Ratios</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">% Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">work trips</td>
<td style="text-align: left;">0.986</td>
<td style="text-align: left;">1.017</td>
<td style="text-align: left;">-3.0%</td>
</tr>
<tr class="even">
<td style="text-align: left;">non-work trips</td>
<td style="text-align: left;">1.276</td>
<td style="text-align: left;">1.307</td>
<td style="text-align: left;">-2.3%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">external</td>
<td style="text-align: left;">1.085</td>
<td style="text-align: left;">1.144</td>
<td style="text-align: left;">-5.1%</td>
</tr>
<tr class="even">
<td style="text-align: left;">light truck</td>
<td style="text-align: left;">0.738</td>
<td style="text-align: left;">0.82</td>
<td style="text-align: left;">-10.0%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">medium truck</td>
<td style="text-align: left;">1.11</td>
<td style="text-align: left;">1.195</td>
<td style="text-align: left;">-7.1%</td>
</tr>
<tr class="even">
<td style="text-align: left;">heavy truck</td>
<td style="text-align: left;">1.179</td>
<td style="text-align: left;">1.274</td>
<td style="text-align: left;">-7.4%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="managed-lane-costs" class="level3">
<h3 class="anchored" data-anchor-id="managed-lane-costs">Managed Lane Costs</h3>
<p>Peak and off-peak toll cost parameters for tollways (FT=40) were updated to 48 cents/mile. This equates to approximately $5.00 for work trips (using an average work trip distances of 10.25) and $3.00 for non-work trips (using an average distance of 6.5 miles).</p>
<p>Peak toll cost parameters for HOT lanes (FT=38) and reliability lanes were updated to 34 cents/mile. This equates to approximately $3.50 for work trips and $2.20 for non-work trips (using the same average distances for work and non-work trips). Off-peak toll cost parameters were set as half the peak cost.</p>
<p>Version 9 tolls are in 2019 dollars. Toll costs for version 8 are in 2010 dollars.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<div id="tbl-managed-lane" class="anchored">
<table id="T_42654" data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Table&nbsp;8: Managed Lane Cost Rates</caption>
<thead>
<tr class="header">
<th id="T_42654_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Parameter</th>
<th id="T_42654_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">v9 Value</th>
<th id="T_42654_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">v8 Value</th>
<th id="T_42654_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_42654_row0_col0" class="data row0 col0">Cost_Toll_Pk</td>
<td id="T_42654_row0_col1" class="data row0 col1">48</td>
<td id="T_42654_row0_col2" class="data row0 col2">24</td>
<td id="T_42654_row0_col3" class="data row0 col3">Tollways (FT 40) cost - Peak</td>
</tr>
<tr class="even">
<td id="T_42654_row1_col0" class="data row1 col0">Cost_Toll_Ok</td>
<td id="T_42654_row1_col1" class="data row1 col1">48</td>
<td id="T_42654_row1_col2" class="data row1 col2">24</td>
<td id="T_42654_row1_col3" class="data row1 col3">Tollways (FT 40) cost - Off-peak</td>
</tr>
<tr class="odd">
<td id="T_42654_row2_col0" class="data row2 col0">Cost_HOT_Pk</td>
<td id="T_42654_row2_col1" class="data row2 col1">34</td>
<td id="T_42654_row2_col2" class="data row2 col2">10</td>
<td id="T_42654_row2_col3" class="data row2 col3">HOT (FT 38) cost - Peak</td>
</tr>
<tr class="even">
<td id="T_42654_row3_col0" class="data row3 col0">Cost_HOT_Ok</td>
<td id="T_42654_row3_col1" class="data row3 col1">17</td>
<td id="T_42654_row3_col2" class="data row3 col2">5</td>
<td id="T_42654_row3_col3" class="data row3 col3">HOT (FT 38) cost - Off-peak</td>
</tr>
<tr class="odd">
<td id="T_42654_row4_col0" class="data row4 col0">Cost_REL_Pk</td>
<td id="T_42654_row4_col1" class="data row4 col1">34</td>
<td id="T_42654_row4_col2" class="data row4 col2">10</td>
<td id="T_42654_row4_col3" class="data row4 col3">Reliability lane cost - Peak</td>
</tr>
<tr class="even">
<td id="T_42654_row5_col0" class="data row5 col0">Cost_REL_Ok</td>
<td id="T_42654_row5_col1" class="data row5 col1">17</td>
<td id="T_42654_row5_col2" class="data row5 col2">5</td>
<td id="T_42654_row5_col3" class="data row5 col3">Reliability lane cost - Off-peak</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>Relative to HOT toll costs, tollway costs are approximately 40% lower in version 9 than version 8, suggesting tollways would have less sensitivity to cost in version 9 than version 8. However, there are no tollways planned in the 2023 RTP.</p>
</section>
<section id="parking-costs" class="level3">
<h3 class="anchored" data-anchor-id="parking-costs">Parking Costs</h3>
<p>The permanent and temporary cost fields, <strong>PRKCSTPERM</strong> and <strong>PRKCSTTEMP</strong> located in the <code>1_Inputs\1_TAZ\TAZ.shp</code> shapefile, were updated to reflect current conditions. Costs for parking in the downtown areas of Salt Lake City, Ogden, and Provo and around the universities were based on 2022 parking rates obtained from the city of Salt Lake City, web searches, and field visits.</p>
<p>The temporary parking cost for the Salt Lake City International Airport was set to $1.25 based on a weighted average of short-term premium and economy rates. This represents a $0.25 (25%) increase from version 8. Permanent parking costs were kept at $0 as workers at the airport do not pay for parking.</p>
<p>The Lagoon temporary parking cost was set to $6 based on the 2022 advertised parking rate of $18 per day by an assumed average occupancy of 3 people per vehicle. This represents a $1 (20%) increase from version 8. Permanent parking costs were kept at $0 as workers at Lagoon do not pay for parking.</p>
<p>Version 9 parking costs are in 2019 dollars, whereas version 8 parking costs are in 2010 dollars.</p>
</section>
<section id="transit-fares" class="level3">
<h3 class="anchored" data-anchor-id="transit-fares">Transit Fares</h3>
<p>Version 9 transit fares in the <code>PT_Parameter\GENERAL_Fare.FAR</code> file in the scenario line folder were updated to reflect the 2019 full advertised fares. This represented a two-fold change to the transit fares parameter. Previous models have fares coded as “average discounted fares” which included discounts for monthly passes, education passes, fare-pay, senior discounts, employer paid passes, and other discounts. In order to make updating transit fares in the model easier and more intuitive, the input fares were kept as full advertised fares and the calculation from advertised to discounted fares is now processed in the model stream.</p>
<p>Version 9 uses the same average discount assumptions as version 8. The transit fare discount was calculated in previous models to be 46% off the advertised fare yielding a discounted fare rate of 54% and the following parameter was added to the <code>0_GeneralParameters.block</code>:</p>
<ul>
<li>FARE_DISCOUNT = 0.54</li>
</ul>
</section>
<section id="bus-speed-ratios" class="level3">
<h3 class="anchored" data-anchor-id="bus-speed-ratios">Bus Speed Ratios</h3>
<p>An effort was made to refresh the bus speed factors in version 9. General transit feed specification (GTFS) data for 2019 was used to re-evaluate the version 8 bus speed ratio classifications and to estimate new bus speed ratios. The number of bus speed ratios were expanded from 6 in version 8 to 50 in version 9. The new ratios include more area type classifications as well as a classification for peak and off-peak. The bus speed ratios for versions 8 and 9 can be seen in <a href="#fig-bus-speed-ratios">Figure&nbsp;2</a>.</p>
<p>Bus speed ratio parameters were removed from the <code>0_GeneralParameters.block</code> file in version 9 and are now read in via an input file (<code>1_Inputs\0_GlobalData\4_ModeChoice\bus_speed_ratios.csv</code>). A source spreadsheet (<code>_source - bus_speed_ratios.xlsx</code>) is also included in the input folder. Modifications to the transit skim script were made to incorporate the new bus speeds input file.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Bus Speed Ratios Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Bus Speed Ratios Data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Previous Bus Speed Ratios</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="337" data-source-offset="-18"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 336;"><span id="cb1-337"><a href="#cb1-337" aria-hidden="true" tabindex="-1"></a>faDataBusSpeeds     <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">bus_speed_ratios_long.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb1-338"><a href="#cb1-338" aria-hidden="true" tabindex="-1"></a>faFunctionalClasses <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">functionalclass.csv"</span>      )<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb1-339"><a href="#cb1-339" aria-hidden="true" tabindex="-1"></a>faTimePeriods       <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">timeperiod.csv"</span>           )<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb1-340"><a href="#cb1-340" aria-hidden="true" tabindex="-1"></a>faAreaTypes         <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">areatype.csv"</span>             )<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb1-341"><a href="#cb1-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-342"><a href="#cb1-342" aria-hidden="true" tabindex="-1"></a>viewof facetSelect  <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">'Time Period'</span><span class="op">,</span> <span class="st">'TimePeriodName'</span>]<span class="op">,</span> [<span class="st">'Area Type'</span><span class="op">,</span> <span class="st">'AreaTypeName'</span>]<span class="op">,</span> [<span class="st">'Functional Class'</span><span class="op">,</span> <span class="st">'FunctionalClassName'</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'TimePeriodName'</span>     <span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Columns:"</span>})<span class="op">;</span></span>
<span id="cb1-343"><a href="#cb1-343" aria-hidden="true" tabindex="-1"></a>viewof domainSelect <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">'Time Period'</span><span class="op">,</span> <span class="st">'TimePeriodName'</span>]<span class="op">,</span> [<span class="st">'Area Type'</span><span class="op">,</span> <span class="st">'AreaTypeName'</span>]<span class="op">,</span> [<span class="st">'Functional Class'</span><span class="op">,</span> <span class="st">'FunctionalClassName'</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'AreaTypeName'</span>       <span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"X-Axis:"</span>})<span class="op">;</span></span>
<span id="cb1-344"><a href="#cb1-344" aria-hidden="true" tabindex="-1"></a>viewof strokeSelect <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">'Time Period'</span><span class="op">,</span> <span class="st">'TimePeriodName'</span>]<span class="op">,</span> [<span class="st">'Area Type'</span><span class="op">,</span> <span class="st">'AreaTypeName'</span>]<span class="op">,</span> [<span class="st">'Functional Class'</span><span class="op">,</span> <span class="st">'FunctionalClassName'</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'FunctionalClassName'</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Series:"</span>})<span class="op">;</span></span>
<span id="cb1-345"><a href="#cb1-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-346"><a href="#cb1-346" aria-hidden="true" tabindex="-1"></a><span class="co">// FILTER DATA</span></span>
<span id="cb1-347"><a href="#cb1-347" aria-hidden="true" tabindex="-1"></a><span class="co">//viewof functionalclasses_checked = Inputs.checkbox(faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),</span></span>
<span id="cb1-348"><a href="#cb1-348" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                   {value: faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),</span></span>
<span id="cb1-349"><a href="#cb1-349" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                    label: "Function Class"});</span></span>
<span id="cb1-350"><a href="#cb1-350" aria-hidden="true" tabindex="-1"></a><span class="co">//viewof timeperiods_checked       = Inputs.checkbox(faTimePeriods      .map(function(d) {return d.TimePeriodName     }),</span></span>
<span id="cb1-351"><a href="#cb1-351" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                   {value: faTimePeriods      .map(function(d) {return d.TimePeriodName     }),</span></span>
<span id="cb1-352"><a href="#cb1-352" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                    label: "Time Period"   });</span></span>
<span id="cb1-353"><a href="#cb1-353" aria-hidden="true" tabindex="-1"></a><span class="co">//filteredBusData = faDataBusSpeeds.filter(function(busspeed) {</span></span>
<span id="cb1-354"><a href="#cb1-354" aria-hidden="true" tabindex="-1"></a><span class="co">//  return functionalclasses_checked.includes(busspeed.FunctionalClassName) &amp;&amp;</span></span>
<span id="cb1-355"><a href="#cb1-355" aria-hidden="true" tabindex="-1"></a><span class="co">//         timeperiods_checked      .includes(busspeed.TimePeriodName     )// &amp;&amp;</span></span>
<span id="cb1-356"><a href="#cb1-356" aria-hidden="true" tabindex="-1"></a><span class="co">//         //areatypes        .includes(busspeed.AreaTypeName  );</span></span>
<span id="cb1-357"><a href="#cb1-357" aria-hidden="true" tabindex="-1"></a><span class="co">//});</span></span>
<span id="cb1-358"><a href="#cb1-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-359"><a href="#cb1-359" aria-hidden="true" tabindex="-1"></a>domainFromSelect <span class="op">=</span> {</span>
<span id="cb1-360"><a href="#cb1-360" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(domainSelect) {</span>
<span id="cb1-361"><a href="#cb1-361" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span>     <span class="op">:</span> <span class="cf">return</span> faTimePeriods      <span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">TimePeriodName</span>     })<span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-362"><a href="#cb1-362" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span>       <span class="op">:</span> <span class="cf">return</span> faAreaTypes        <span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">AreaTypeName</span>       })<span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-363"><a href="#cb1-363" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span> <span class="cf">return</span> faFunctionalClasses<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">FunctionalClassName</span>})<span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-364"><a href="#cb1-364" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-365"><a href="#cb1-365" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-366"><a href="#cb1-366" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-367"><a href="#cb1-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-368"><a href="#cb1-368" aria-hidden="true" tabindex="-1"></a><span class="co">//xPlotDomainSelect = {</span></span>
<span id="cb1-369"><a href="#cb1-369" aria-hidden="true" tabindex="-1"></a><span class="co">//  switch(domainSelect) {</span></span>
<span id="cb1-370"><a href="#cb1-370" aria-hidden="true" tabindex="-1"></a><span class="co">//    case 'TimePeriodName'     : return "TimePeriod"     ; break;</span></span>
<span id="cb1-371"><a href="#cb1-371" aria-hidden="true" tabindex="-1"></a><span class="co">//    case 'AreaTypeName'       : return "AreaType"       ; break;</span></span>
<span id="cb1-372"><a href="#cb1-372" aria-hidden="true" tabindex="-1"></a><span class="co">//    case 'FunctionalClassName': return "FunctionalClass"; break;</span></span>
<span id="cb1-373"><a href="#cb1-373" aria-hidden="true" tabindex="-1"></a><span class="co">//    default: return;</span></span>
<span id="cb1-374"><a href="#cb1-374" aria-hidden="true" tabindex="-1"></a><span class="co">//  }</span></span>
<span id="cb1-375"><a href="#cb1-375" aria-hidden="true" tabindex="-1"></a><span class="co">//}</span></span>
<span id="cb1-376"><a href="#cb1-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-377"><a href="#cb1-377" aria-hidden="true" tabindex="-1"></a>fLabel <span class="op">=</span> {</span>
<span id="cb1-378"><a href="#cb1-378" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(facetSelect) {</span>
<span id="cb1-379"><a href="#cb1-379" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span>     <span class="op">:</span> <span class="cf">return</span> <span class="st">"Time Period"</span>     <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-380"><a href="#cb1-380" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span>       <span class="op">:</span> <span class="cf">return</span> <span class="st">"Area Type"</span>       <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-381"><a href="#cb1-381" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span> <span class="cf">return</span> <span class="st">"Functional Class"</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-382"><a href="#cb1-382" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-383"><a href="#cb1-383" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-384"><a href="#cb1-384" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-385"><a href="#cb1-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-386"><a href="#cb1-386" aria-hidden="true" tabindex="-1"></a>xLabel <span class="op">=</span> {</span>
<span id="cb1-387"><a href="#cb1-387" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(domainSelect) {</span>
<span id="cb1-388"><a href="#cb1-388" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span>     <span class="op">:</span> <span class="cf">return</span> <span class="st">"Time Period"</span>     <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-389"><a href="#cb1-389" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span>       <span class="op">:</span> <span class="cf">return</span> <span class="st">"Area Type"</span>       <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-390"><a href="#cb1-390" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span> <span class="cf">return</span> <span class="st">"Functional Class"</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-391"><a href="#cb1-391" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-392"><a href="#cb1-392" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-393"><a href="#cb1-393" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-394"><a href="#cb1-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-395"><a href="#cb1-395" aria-hidden="true" tabindex="-1"></a>domainFacetSelect <span class="op">=</span> {</span>
<span id="cb1-396"><a href="#cb1-396" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(facetSelect) {</span>
<span id="cb1-397"><a href="#cb1-397" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span><span class="op">:</span></span>
<span id="cb1-398"><a href="#cb1-398" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> faTimePeriods<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {</span>
<span id="cb1-399"><a href="#cb1-399" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> d<span class="op">.</span><span class="at">TimePeriodName</span></span>
<span id="cb1-400"><a href="#cb1-400" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb1-401"><a href="#cb1-401" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-402"><a href="#cb1-402" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span><span class="op">:</span></span>
<span id="cb1-403"><a href="#cb1-403" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> faAreaTypes<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {</span>
<span id="cb1-404"><a href="#cb1-404" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> d<span class="op">.</span><span class="at">AreaTypeName</span></span>
<span id="cb1-405"><a href="#cb1-405" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb1-406"><a href="#cb1-406" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-407"><a href="#cb1-407" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span></span>
<span id="cb1-408"><a href="#cb1-408" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> faFunctionalClasses<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {</span>
<span id="cb1-409"><a href="#cb1-409" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> d<span class="op">.</span><span class="at">FunctionalClassName</span></span>
<span id="cb1-410"><a href="#cb1-410" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb1-411"><a href="#cb1-411" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-412"><a href="#cb1-412" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb1-413"><a href="#cb1-413" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span><span class="op">;</span> </span>
<span id="cb1-414"><a href="#cb1-414" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-415"><a href="#cb1-415" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-11" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="422" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 421;"><span id="cb2-422"><a href="#cb2-422" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb2-423"><a href="#cb2-423" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-424"><a href="#cb2-424" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.25</span><span class="op">,</span></span>
<span id="cb2-425"><a href="#cb2-425" aria-hidden="true" tabindex="-1"></a>  <span class="dt">facet</span><span class="op">:</span> { <span class="dt">data</span><span class="op">:</span> faDataBusSpeeds<span class="op">,</span> <span class="dt">x</span><span class="op">:</span> facetSelect<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> fLabel<span class="op">,</span> <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">40</span>}<span class="op">,</span></span>
<span id="cb2-426"><a href="#cb2-426" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb2-427"><a href="#cb2-427" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> xLabel<span class="op">,</span></span>
<span id="cb2-428"><a href="#cb2-428" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> domainFromSelect<span class="op">,</span></span>
<span id="cb2-429"><a href="#cb2-429" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb2-430"><a href="#cb2-430" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-431"><a href="#cb2-431" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb2-432"><a href="#cb2-432" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span></span>
<span id="cb2-433"><a href="#cb2-433" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-434"><a href="#cb2-434" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb2-435"><a href="#cb2-435" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Bus Speed Ratio"</span><span class="op">,</span></span>
<span id="cb2-436"><a href="#cb2-436" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb2-437"><a href="#cb2-437" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">8</span></span>
<span id="cb2-438"><a href="#cb2-438" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-439"><a href="#cb2-439" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span> <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">legendStyle</span><span class="op">:</span> { <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">16</span> } }<span class="op">,</span></span>
<span id="cb2-440"><a href="#cb2-440" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb2-441"><a href="#cb2-441" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span></span>
<span id="cb2-442"><a href="#cb2-442" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-443"><a href="#cb2-443" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb2-444"><a href="#cb2-444" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">120</span><span class="op">,</span></span>
<span id="cb2-445"><a href="#cb2-445" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb2-446"><a href="#cb2-446" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb2-447"><a href="#cb2-447" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(faDataBusSpeeds<span class="op">,</span> { <span class="dt">x</span><span class="op">:</span> domainSelect<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"BusSpeedRatio"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> strokeSelect<span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span> })<span class="op">,</span></span>
<span id="cb2-448"><a href="#cb2-448" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(faDataBusSpeeds<span class="op">,</span> { <span class="dt">x</span><span class="op">:</span> domainSelect<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"BusSpeedRatio"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> strokeSelect<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> strokeSelect })</span>
<span id="cb2-449"><a href="#cb2-449" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb2-450"><a href="#cb2-450" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-bus-speed-ratios" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;2: Bus Speed Ratios</figcaption>
</figure>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="457" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 456;"><span id="cb3-457"><a href="#cb3-457" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(faDataBusSpeeds<span class="op">,</span> {</span>
<span id="cb3-458"><a href="#cb3-458" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb3-459"><a href="#cb3-459" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb3-460"><a href="#cb3-460" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb3-461"><a href="#cb3-461" aria-hidden="true" tabindex="-1"></a>  <span class="dt">columns</span><span class="op">:</span> [</span>
<span id="cb3-462"><a href="#cb3-462" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FunctionalClassName"</span><span class="op">,</span></span>
<span id="cb3-463"><a href="#cb3-463" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TimePeriodName"</span><span class="op">,</span></span>
<span id="cb3-464"><a href="#cb3-464" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AreaTypeName"</span><span class="op">,</span></span>
<span id="cb3-465"><a href="#cb3-465" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BusSpeedRatio"</span></span>
<span id="cb3-466"><a href="#cb3-466" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb3-467"><a href="#cb3-467" aria-hidden="true" tabindex="-1"></a>  <span class="dt">header</span><span class="op">:</span> {</span>
<span id="cb3-468"><a href="#cb3-468" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FunctionalClassName</span><span class="op">:</span> <span class="st">"Functional Class"</span><span class="op">,</span></span>
<span id="cb3-469"><a href="#cb3-469" aria-hidden="true" tabindex="-1"></a>    <span class="dt">TimePeriodName</span><span class="op">:</span> <span class="st">"Time Period"</span><span class="op">,</span></span>
<span id="cb3-470"><a href="#cb3-470" aria-hidden="true" tabindex="-1"></a>    <span class="dt">AreaTypeName</span><span class="op">:</span> <span class="st">"Area Type"</span><span class="op">,</span></span>
<span id="cb3-471"><a href="#cb3-471" aria-hidden="true" tabindex="-1"></a>    <span class="dt">BusSpeedRatio</span><span class="op">:</span> <span class="st">"Bus Speed Ratio"</span></span>
<span id="cb3-472"><a href="#cb3-472" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-473"><a href="#cb3-473" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="480" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 479;"><span id="cb4-480"><a href="#cb4-480" aria-hidden="true" tabindex="-1"></a><span class="co">// read in CSVs</span></span>
<span id="cb4-481"><a href="#cb4-481" aria-hidden="true" tabindex="-1"></a>faDataBusSpeeds_previous <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">bus_speed_ratios_previous.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="489" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 488;"><span id="cb5-489"><a href="#cb5-489" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb5-490"><a href="#cb5-490" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-491"><a href="#cb5-491" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb5-492"><a href="#cb5-492" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb5-493"><a href="#cb5-493" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb5-494"><a href="#cb5-494" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb5-495"><a href="#cb5-495" aria-hidden="true" tabindex="-1"></a>  <span class="dt">margin</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb5-496"><a href="#cb5-496" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">150</span><span class="op">,</span></span>
<span id="cb5-497"><a href="#cb5-497" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb5-498"><a href="#cb5-498" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb5-499"><a href="#cb5-499" aria-hidden="true" tabindex="-1"></a>    <span class="co">//tickFormat: () =&gt; "",</span></span>
<span id="cb5-500"><a href="#cb5-500" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span></span>
<span id="cb5-501"><a href="#cb5-501" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> faDataBusSpeeds_previous<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">FunctionalClass</span>})<span class="op">,</span></span>
<span id="cb5-502"><a href="#cb5-502" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb5-503"><a href="#cb5-503" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb5-504"><a href="#cb5-504" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Bus Speed Ratio"</span> <span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]}<span class="op">,</span></span>
<span id="cb5-505"><a href="#cb5-505" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span> <span class="dt">legend</span><span class="op">:</span> <span class="kw">false</span> }<span class="op">,</span></span>
<span id="cb5-506"><a href="#cb5-506" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb5-507"><a href="#cb5-507" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb5-508"><a href="#cb5-508" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(faDataBusSpeeds_previous<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"FunctionalClass"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"BusSpeedRatio"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"FunctionalClass"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"FunctionalClass"</span>})</span>
<span id="cb5-509"><a href="#cb5-509" aria-hidden="true" tabindex="-1"></a>  ]  </span>
<span id="cb5-510"><a href="#cb5-510" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-bus-speed-ratios-previous" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-5" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;3: Previous Bus Speed Ratios</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="initial-wait-time" class="level3">
<h3 class="anchored" data-anchor-id="initial-wait-time">Initial Wait Time</h3>
<p>The initial wait time curves found in <code>1_Inputs\4_Transit\Lin_2019\PT_Parameter\GENERAL_System.PTS</code> were updated in version 9 to make the mode choice model more sensitive to frequency changes. Version 8 initial wait time curves were based on the premise that transit patrons are familiar with the transit schedule and plan their trip to initially board with the minimum amount of delay. To reflect this behavior, a 7.5-minute cap for bus and a 5-minute cap for rail was set on the initial wait time parameter. This cap, however, caused the model to not see much of the benefit/disbenefit a transit user would experience when headways are changed, in particular for longer when moving away/to longer headways.</p>
<p>The version 9 initial wait time parameter was set based on research given to UTA of industry standard-practice initial wait time curves. A range of initial wait time curve values were presented in the research. Version 9 was calibrated to a more conservative curve in that range. The version 9 initial wait time curve can be seen in <a href="#fig-initial-wait-time">Figure&nbsp;4</a>.</p>
<p>The new initial wait time curve in version 9 had the effect of increasing transit ridership relative to version 8 in scenarios where an investment in more frequent transit was projected. Early testing showed this increase to be on the order of magnitude of 8-12% based on a comparison of 2019 RTP and draft 2023 RTP transportation investments. However, the actual change in ridership would vary depending on the initial starting point and the magnitude of change in transit frequency.</p>
<div id="fig-initial-wait-time" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="_pictures/initial-wait-time.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Initial Wait Time Curve</figcaption>
</figure>
</div>
</section>
<section id="auto-occupancy" class="level3">
<h3 class="anchored" data-anchor-id="auto-occupancy">Auto Occupancy</h3>
<p>Auto occupancy variables were expanded to include additional trips purposes. New auto occupancy rates were calculated based on 2012 Household Travel Survey records for just the Wasatch Front model space. Auto-occupancy rates for external trips are the average of internal-external and external-internal trips. The new version 9 auto occupancy rates can be found in <a href="#tbl-auto-occ1">Table&nbsp;9</a> and <a href="#tbl-auto-occ1">Table&nbsp;9</a>.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="122">
<div id="tbl-auto-occ1" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;9: Vehicle Occupancy Rates</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 8%">
<col style="width: 35%">
<col style="width: 8%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">v9 Parameter</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Parameter</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">VehOcc_HBW</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: left;">VEH_OCCUPANCY_HBW</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: left;">Home-Based Work</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_HBShp</td>
<td style="text-align: left;">1.63</td>
<td style="text-align: left;">VEH_OCCUPANCY_HBSHP</td>
<td style="text-align: left;">1.58</td>
<td style="text-align: left;">Home-Based Shopping</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_HBOth</td>
<td style="text-align: left;">1.68</td>
<td style="text-align: left;">VEH_OCCUPANCY_HBOTH</td>
<td style="text-align: left;">1.66</td>
<td style="text-align: left;">Home-Based Other</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_HBSch</td>
<td style="text-align: left;">1.76</td>
<td style="text-align: left;">VEH_OCCUPANCY_HBSCH</td>
<td style="text-align: left;">2.14</td>
<td style="text-align: left;">Home-Based School</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_HBC</td>
<td style="text-align: left;">1.12</td>
<td style="text-align: left;">VEH_OCCUPANCY_HBC</td>
<td style="text-align: left;">1.26</td>
<td style="text-align: left;">Home-Based College</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_NHBW</td>
<td style="text-align: left;">1.21</td>
<td style="text-align: left;">VEH_OCCUPANCY_NHBW</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">Non-Home-Based Work</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_NHBNW</td>
<td style="text-align: left;">1.76</td>
<td style="text-align: left;">VEH_OCCUPANCY_NHBNW</td>
<td style="text-align: left;">1.7</td>
<td style="text-align: left;">Non-Home-Based Non-Work</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_Rec</td>
<td style="text-align: left;">1.68</td>
<td style="text-align: left;">(Uses HBO)</td>
<td style="text-align: left;">1.64</td>
<td style="text-align: left;">Recreation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_HBO</td>
<td style="text-align: left;">1.67</td>
<td style="text-align: left;">VEH_OCCUPANCY_HBO</td>
<td style="text-align: left;">1.64</td>
<td style="text-align: left;">Home-Based Other (HBShp+HBOth)</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_NHB</td>
<td style="text-align: left;">1.54</td>
<td style="text-align: left;">VEH_OCCUPANCY_NHB</td>
<td style="text-align: left;">1.48</td>
<td style="text-align: left;">Non-Home-Based (NHBW+NHBNW)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_ExtWrk</td>
<td style="text-align: left;">1.16</td>
<td style="text-align: left;">(Uses HBW)</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: left;">External Work</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_ExtHBO</td>
<td style="text-align: left;">1.82</td>
<td style="text-align: left;">(Uses HBO)</td>
<td style="text-align: left;">1.64</td>
<td style="text-align: left;">External Home-Based Other</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_ExtNHB</td>
<td style="text-align: left;">1.73</td>
<td style="text-align: left;">(Uses NHB)</td>
<td style="text-align: left;">1.48</td>
<td style="text-align: left;">Non-Home-Based</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_ExtRec</td>
<td style="text-align: left;">1.73</td>
<td style="text-align: left;">(Uses HBO)</td>
<td style="text-align: left;">1.64</td>
<td style="text-align: left;">External Recreation</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="123">
<div id="tbl-auto-occ2" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;10: Vehicle Occupancy 3+ Rates</caption>
<colgroup>
<col style="width: 24%">
<col style="width: 8%">
<col style="width: 24%">
<col style="width: 8%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">v9 Parameter</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Parameter</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">VehOcc_3p_HBW</td>
<td style="text-align: left;">3.53</td>
<td style="text-align: left;">VEH_OCC_3P_HBW</td>
<td style="text-align: left;">3.4</td>
<td style="text-align: left;">3+ Person Home-Based Work</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_3p_HBShp</td>
<td style="text-align: left;">3.49</td>
<td style="text-align: left;">(Uses HBO)</td>
<td style="text-align: left;">3.55</td>
<td style="text-align: left;">3+ Person Home-Based Shopping</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_3p_HBOth</td>
<td style="text-align: left;">3.73</td>
<td style="text-align: left;">(Uses HBO)</td>
<td style="text-align: left;">3.55</td>
<td style="text-align: left;">3+ Person Home-Based Other</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_3p_HBSch</td>
<td style="text-align: left;">3.88</td>
<td style="text-align: left;">(Uses HBO)</td>
<td style="text-align: left;">3.55</td>
<td style="text-align: left;">3+ Person Home-Based School</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_3p_HBC</td>
<td style="text-align: left;">3.24</td>
<td style="text-align: left;">VEH_OCC_3P_HBC</td>
<td style="text-align: left;">3.53</td>
<td style="text-align: left;">3+ Person Home-Based College</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_3p_NHBW</td>
<td style="text-align: left;">3.71</td>
<td style="text-align: left;">(Uses NHB)</td>
<td style="text-align: left;">3.51</td>
<td style="text-align: left;">3+ Person Non-Home-Based Work</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_3p_NHBNW</td>
<td style="text-align: left;">3.71</td>
<td style="text-align: left;">(Uses NHB)</td>
<td style="text-align: left;">3.51</td>
<td style="text-align: left;">3+ Person Non-Home-Based Non-Work</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_3p_Rec</td>
<td style="text-align: left;">3.73</td>
<td style="text-align: left;">(Uses HBO)</td>
<td style="text-align: left;">3.55</td>
<td style="text-align: left;">3+ Person Recreation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VehOcc_3p_HBO</td>
<td style="text-align: left;">3.68</td>
<td style="text-align: left;">VEH_OCC_3P_HBO</td>
<td style="text-align: left;">3.55</td>
<td style="text-align: left;">3+ Person Home-Based Other (HBShp+HBOth)</td>
</tr>
<tr class="even">
<td style="text-align: left;">VehOcc_3p_NHB</td>
<td style="text-align: left;">3.71</td>
<td style="text-align: left;">VEH_OCC_3P_NHB</td>
<td style="text-align: left;">3.51</td>
<td style="text-align: left;">3+ Person Non-Home-Based (NHBW+NHBNW)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="other-input-files" class="level2">
<h2 class="anchored" data-anchor-id="other-input-files">Other Input Files</h2>
<section id="k-12-school-enrollment" class="level3">
<h3 class="anchored" data-anchor-id="k-12-school-enrollment">K-12 School Enrollment</h3>
<p>The kindergarten through 12th grade (K-12) school enrollment fields, <strong>Enrol_Elem</strong>, <strong>Enrol_Midl</strong>, and <strong>Enrol_High</strong> located in the socioeconomic input files, were updated using the 2019 statewide school enrollment database. This was done at the state-wide level and then applied to the Wasatch Front region. Additionally, a point shapefile of the state-wide dataset is included with the TDM, as shown in <a href="#fig-school-locations">Figure&nbsp;5</a>.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="598" data-source-offset="-28"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 597;"><span id="cb6-598"><a href="#cb6-598" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="pp">require</span>(<span class="st">'leaflet@1.2.0'</span>)</span>
<span id="cb6-599"><a href="#cb6-599" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;link href='</span><span class="sc">${</span><span class="fu">resolve</span>(<span class="st">'leaflet@1.2.0/dist/leaflet.css'</span>)<span class="sc">}</span><span class="vs">' rel='stylesheet' /&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="expression">

</div>
</div>
</div>
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="601" data-source-offset="-142"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 600;"><span id="cb7-601"><a href="#cb7-601" aria-hidden="true" tabindex="-1"></a>geojsonK12Enroll <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/k12enroll.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="608" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 607;"><span id="cb8-608"><a href="#cb8-608" aria-hidden="true" tabindex="-1"></a>mapK12Enroll <span class="op">=</span> {</span>
<span id="cb8-609"><a href="#cb8-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-610"><a href="#cb8-610" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> container <span class="op">=</span> DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">'div'</span><span class="op">,</span> { <span class="dt">style</span><span class="op">:</span> <span class="vs">`width:</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">px;height:</span><span class="sc">${</span>width<span class="op">/</span><span class="fl">1.6</span><span class="sc">}</span><span class="vs">px`</span> })<span class="op">;</span></span>
<span id="cb8-611"><a href="#cb8-611" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> container<span class="op">;</span></span>
<span id="cb8-612"><a href="#cb8-612" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-613"><a href="#cb8-613" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(container)<span class="op">.</span><span class="fu">setView</span>([<span class="fl">40.7608</span><span class="op">,</span> <span class="op">-</span><span class="fl">111.8910</span>]<span class="op">,</span> <span class="fl">8.25</span>)<span class="op">;</span></span>
<span id="cb8-614"><a href="#cb8-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-615"><a href="#cb8-615" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> greyLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png'</span><span class="op">,</span> {</span>
<span id="cb8-616"><a href="#cb8-616" aria-hidden="true" tabindex="-1"></a>    <span class="dt">attribution</span><span class="op">:</span> <span class="st">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'</span></span>
<span id="cb8-617"><a href="#cb8-617" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb8-618"><a href="#cb8-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-619"><a href="#cb8-619" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cHigh <span class="op">=</span> <span class="st">"#FF0000"</span></span>
<span id="cb8-620"><a href="#cb8-620" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cMidl <span class="op">=</span> <span class="st">"#00FF00"</span></span>
<span id="cb8-621"><a href="#cb8-621" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cElem <span class="op">=</span> <span class="st">"#0000FF"</span></span>
<span id="cb8-622"><a href="#cb8-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-623"><a href="#cb8-623" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geojsonMarkerOptions_High <span class="op">=</span> {</span>
<span id="cb8-624"><a href="#cb8-624" aria-hidden="true" tabindex="-1"></a>      <span class="dt">radius</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb8-625"><a href="#cb8-625" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillColor</span><span class="op">:</span> cHigh<span class="op">,</span></span>
<span id="cb8-626"><a href="#cb8-626" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cHigh<span class="op">,</span></span>
<span id="cb8-627"><a href="#cb8-627" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb8-628"><a href="#cb8-628" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb8-629"><a href="#cb8-629" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb8-630"><a href="#cb8-630" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb8-631"><a href="#cb8-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-632"><a href="#cb8-632" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geojsonMarkerOptions_Midl <span class="op">=</span> {</span>
<span id="cb8-633"><a href="#cb8-633" aria-hidden="true" tabindex="-1"></a>      <span class="dt">radius</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb8-634"><a href="#cb8-634" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillColor</span><span class="op">:</span> cMidl<span class="op">,</span></span>
<span id="cb8-635"><a href="#cb8-635" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cMidl<span class="op">,</span></span>
<span id="cb8-636"><a href="#cb8-636" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb8-637"><a href="#cb8-637" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb8-638"><a href="#cb8-638" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb8-639"><a href="#cb8-639" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb8-640"><a href="#cb8-640" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geojsonMarkerOptions_Elem <span class="op">=</span> {</span>
<span id="cb8-641"><a href="#cb8-641" aria-hidden="true" tabindex="-1"></a>      <span class="dt">radius</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb8-642"><a href="#cb8-642" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillColor</span><span class="op">:</span> cElem<span class="op">,</span></span>
<span id="cb8-643"><a href="#cb8-643" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cElem<span class="op">,</span></span>
<span id="cb8-644"><a href="#cb8-644" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb8-645"><a href="#cb8-645" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb8-646"><a href="#cb8-646" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb8-647"><a href="#cb8-647" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb8-648"><a href="#cb8-648" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb8-649"><a href="#cb8-649" aria-hidden="true" tabindex="-1"></a>  <span class="co">// function to use different icons based on number of stations</span></span>
<span id="cb8-650"><a href="#cb8-650" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">markerByEnrollment</span>(feature) {</span>
<span id="cb8-651"><a href="#cb8-651" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_High</span> <span class="op">&gt;=</span> <span class="dv">100</span>) {</span>
<span id="cb8-652"><a href="#cb8-652" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geojsonMarkerOptions_High</span>
<span id="cb8-653"><a href="#cb8-653" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_Midl</span> <span class="op">&gt;=</span> <span class="dv">100</span>){</span>
<span id="cb8-654"><a href="#cb8-654" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geojsonMarkerOptions_Midl<span class="op">;</span></span>
<span id="cb8-655"><a href="#cb8-655" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span>{</span>
<span id="cb8-656"><a href="#cb8-656" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geojsonMarkerOptions_Elem<span class="op">;</span></span>
<span id="cb8-657"><a href="#cb8-657" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-658"><a href="#cb8-658" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb8-659"><a href="#cb8-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-660"><a href="#cb8-660" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getColor</span>(c) {</span>
<span id="cb8-661"><a href="#cb8-661" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (c<span class="op">==</span><span class="st">'High School'</span>) {</span>
<span id="cb8-662"><a href="#cb8-662" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cHigh<span class="op">;</span></span>
<span id="cb8-663"><a href="#cb8-663" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Middle School'</span>) {</span>
<span id="cb8-664"><a href="#cb8-664" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cMidl<span class="op">;</span></span>
<span id="cb8-665"><a href="#cb8-665" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Elementary School'</span>) {</span>
<span id="cb8-666"><a href="#cb8-666" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cElem<span class="op">;</span></span>
<span id="cb8-667"><a href="#cb8-667" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-668"><a href="#cb8-668" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb8-669"><a href="#cb8-669" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb8-670"><a href="#cb8-670" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb8-671"><a href="#cb8-671" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> layerSchools <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJSON</span>(geojsonK12Enroll<span class="op">,</span>  {</span>
<span id="cb8-672"><a href="#cb8-672" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> latlng) {</span>
<span id="cb8-673"><a href="#cb8-673" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mypopup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">.</span><span class="fu">setContent</span>(<span class="st">"&lt;b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">SchoolName</span> <span class="op">+</span> <span class="st">" Enrollment&lt;/b&gt;"</span> <span class="op">+</span></span>
<span id="cb8-674"><a href="#cb8-674" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"&lt;br&gt;&lt;b&gt;High School: &lt;/b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_High</span> <span class="op">+</span></span>
<span id="cb8-675"><a href="#cb8-675" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"&lt;br&gt;&lt;b&gt;Middle School: &lt;/b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_Midl</span> <span class="op">+</span></span>
<span id="cb8-676"><a href="#cb8-676" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"&lt;br&gt;&lt;b&gt;Elementary School: &lt;/b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_Elem</span>)<span class="op">;</span></span>
<span id="cb8-677"><a href="#cb8-677" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mymarker <span class="op">=</span> L<span class="op">.</span><span class="fu">circleMarker</span>(latlng<span class="op">,</span> <span class="fu">markerByEnrollment</span>(feature))<span class="op">;</span></span>
<span id="cb8-678"><a href="#cb8-678" aria-hidden="true" tabindex="-1"></a>      mymarker<span class="op">.</span><span class="fu">bindPopup</span>(mypopup)<span class="op">;</span></span>
<span id="cb8-679"><a href="#cb8-679" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> mymarker<span class="op">;</span></span>
<span id="cb8-680"><a href="#cb8-680" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-681"><a href="#cb8-681" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb8-682"><a href="#cb8-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-683"><a href="#cb8-683" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">'bottomleft'</span>})<span class="op">;</span></span>
<span id="cb8-684"><a href="#cb8-684" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span> (map) {</span>
<span id="cb8-685"><a href="#cb8-685" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">'div'</span><span class="op">,</span> <span class="st">'info legend'</span>)<span class="op">;</span></span>
<span id="cb8-686"><a href="#cb8-686" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> labelsBill <span class="op">=</span> []<span class="op">;</span> <span class="co">// legend title</span></span>
<span id="cb8-687"><a href="#cb8-687" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> lcategories <span class="op">=</span> [<span class="st">'High School'</span><span class="op">,</span><span class="st">'Middle School'</span><span class="op">,</span><span class="st">'Elementary School'</span>]<span class="op">;</span></span>
<span id="cb8-688"><a href="#cb8-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-689"><a href="#cb8-689" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lcategories<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb8-690"><a href="#cb8-690" aria-hidden="true" tabindex="-1"></a>        div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">+=</span> </span>
<span id="cb8-691"><a href="#cb8-691" aria-hidden="true" tabindex="-1"></a>          labelsBill<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb8-692"><a href="#cb8-692" aria-hidden="true" tabindex="-1"></a>            <span class="st">'&lt;i class="bi bi-circle-fill" style="color:'</span> <span class="op">+</span> <span class="fu">getColor</span>(lcategories[i]) <span class="op">+</span> <span class="st">'"&gt;&lt;/i&gt; '</span> <span class="op">+</span></span>
<span id="cb8-693"><a href="#cb8-693" aria-hidden="true" tabindex="-1"></a>          (lcategories[i] <span class="op">?</span> lcategories[i] <span class="op">:</span> <span class="st">'+'</span>))<span class="op">;</span></span>
<span id="cb8-694"><a href="#cb8-694" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb8-695"><a href="#cb8-695" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> labelsBill<span class="op">.</span><span class="fu">join</span>(<span class="st">'&lt;br&gt;'</span>)<span class="op">;</span></span>
<span id="cb8-696"><a href="#cb8-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-697"><a href="#cb8-697" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Add CSS style for the background color</span></span>
<span id="cb8-698"><a href="#cb8-698" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">backgroundColor</span> <span class="op">=</span> <span class="st">'lightgray'</span><span class="op">;</span></span>
<span id="cb8-699"><a href="#cb8-699" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">padding</span> <span class="op">=</span> <span class="st">'10px'</span><span class="op">;</span></span>
<span id="cb8-700"><a href="#cb8-700" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb8-701"><a href="#cb8-701" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb8-702"><a href="#cb8-702" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb8-703"><a href="#cb8-703" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb8-704"><a href="#cb8-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-705"><a href="#cb8-705" aria-hidden="true" tabindex="-1"></a>  <span class="co">//let lyrK12Enroll = L.geoJson(geojsonK12Enroll, { size: 5, color: '#FFFFFF'}).addTo(map);</span></span>
<span id="cb8-706"><a href="#cb8-706" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-707"><a href="#cb8-707" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-school-locations" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;5: K-12 School Locations</figcaption>
</figure>
</div>
</div>
</section>
<section id="college-enrollment" class="level3">
<h3 class="anchored" data-anchor-id="college-enrollment">College Enrollment</h3>
<p><strong>Base Distribution</strong></p>
<p>The college student base-year distribution located in <code>1_Inputs\0_GlobalData\0_TripTables\BaseDistribution.csv</code> was updated to reflect current conditions. Dormitory populations were assigned to TAZs based on group quarter data from the Census. The remaining enrollment was distributed using StreetLight origin-destination and USHE enrollment data.</p>
<p><strong>Enrollment Forecast</strong></p>
<p>The future-year college enrollment control totals located in <code>1_Inputs\0_GlobalData\0_TripTables\TripTableControlTotal.csv</code> were updated to reflect current USHE and other college enrollment data. Colleges that were “removed” in version 9 had the college enrollment control total set to zero. A comparison of the version 9 and version 8 (specifically, version 8.3.2) college enrollment control totals can be seen in <span class="citation" data-cites="figure-next-figures">@figure-next-figures</span>.</p>
</section>
</section>
<section id="put-enrollment-charts-here" class="level1">
<h1>PUT ENROLLMENT CHARTS HERE</h1>
<p><strong>College Enrollment Factors</strong></p>
<p>The college enrollment factors located in <code>1_Inputs\0_GlobalData\0_TripTables\College_Factors.csv</code> were updated in association with the college enrollment control totals.</p>
<ul>
<li>% Removed – For colleges that were removed, the factor was reset to zero.</li>
<li>Full-Time Equivalent (FTE) – the FTE rate was reduced for all colleges. This will have the effect of increasing the number of college students in the HBC college trip table. For colleges that were removed, the factor was reset to one.</li>
<li>Home-Based-College (HBC) Trip Rate – For colleges that were removed, the factor was reset to zero.</li>
</ul>
<p>A comparison of the version 9 and version 8 (specifically, version 8.3.2) college enrollment control totals can be seen in <a href="#tbl-college-enrollment-fcts">Table&nbsp;11</a>.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display" data-execution_count="124">
<div id="tbl-college-enrollment-fcts" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;11: College Enrollment Factors</caption>
<colgroup>
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Areas</th>
<th style="text-align: left;">Campus</th>
<th style="text-align: left;">% Removed <br> v9 Value</th>
<th style="text-align: left;">% Removed <br> v8 Value</th>
<th style="text-align: left;">FTE Rate <br> v9 Value</th>
<th style="text-align: left;">FTE Rate <br> v8 Value</th>
<th style="text-align: left;">HBC Trip Rate <br> v9 Value</th>
<th style="text-align: left;">HBC Trip Rate <br> v8 Value</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">WFRC Colleges</td>
<td style="text-align: left;">Ensign</td>
<td style="text-align: left;">0.101</td>
<td style="text-align: left;">0.101</td>
<td style="text-align: left;">1.179</td>
<td style="text-align: left;">1.179</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Westminster</td>
<td style="text-align: left;">0.012</td>
<td style="text-align: left;">0.012</td>
<td style="text-align: left;">1.098</td>
<td style="text-align: left;">1.098</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">UofU Main</td>
<td style="text-align: left;">0.026</td>
<td style="text-align: left;">0.026</td>
<td style="text-align: left;">1.025</td>
<td style="text-align: left;">1.21</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">UofU Med</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.026</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1.21</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">WSU Main</td>
<td style="text-align: left;">0.215</td>
<td style="text-align: left;">0.215</td>
<td style="text-align: left;">1.038</td>
<td style="text-align: left;">1.588</td>
<td style="text-align: left;">0.83</td>
<td style="text-align: left;">0.83</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">WSU Davis</td>
<td style="text-align: left;">0.309</td>
<td style="text-align: left;">0.309</td>
<td style="text-align: left;">1.038</td>
<td style="text-align: left;">1.588</td>
<td style="text-align: left;">0.677</td>
<td style="text-align: left;">0.677</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">WSU West</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.309</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1.588</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.677</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Main</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1.208</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0.622</td>
<td style="text-align: left;">0.622</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC South City</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1.208</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0.642</td>
<td style="text-align: left;">0.642</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Jordan</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1.208</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0.569</td>
<td style="text-align: left;">0.569</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Meadowbrook</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.569</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Miller</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1.208</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0.616</td>
<td style="text-align: left;">0.616</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Library</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.616</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Highland</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.616</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Airport</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.616</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Westpointe</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.616</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">SLCC Herriman</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.341</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2.005</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.616</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAG Colleges</td>
<td style="text-align: left;">BYU</td>
<td style="text-align: left;">0.026</td>
<td style="text-align: left;">0.026</td>
<td style="text-align: left;">1.025</td>
<td style="text-align: left;">1.21</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">UVU Main</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">1.097</td>
<td style="text-align: left;">1.4</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">UVU Geneva</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1.4</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;">(removed)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">UVU Lehi</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">1.097</td>
<td style="text-align: left;">1.4</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">UVU Vineyard</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">1.097</td>
<td style="text-align: left;">1.4</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">UVU Payson</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">1.097</td>
<td style="text-align: left;">1.4</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;">0.945</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<section id="calibration" class="level2">
<h2 class="anchored" data-anchor-id="calibration">Calibration</h2>
<section id="trip-generation-rates" class="level3">
<h3 class="anchored" data-anchor-id="trip-generation-rates">Trip Generation Rates</h3>
<p>Trip generation rates were updated in version 9 as part of the model’s base year calibration. Person-trip production rates (e.g.&nbsp;HBW, HBShp, HBOth, etc.) were increased in the model script by approximately 5% over version 8 rates resulting in a regional increase of both productions and attractions of 5% (see <span class="citation" data-cites="figxx">@figxx</span>). County-level adjustments were left the same as the previous model. When combined with the changes in the 2019 socioeconomic data, the total person-trip productions and attractions in individual counites was slightly different with the most notable differences in Weber, Salt Lake, and Utah counties. The county production/attraction balance stayed fairly consistent.</p>
</section>
</section>
</section>
<section id="put-trip-gen-charts-here" class="level1">
<h1>PUT TRIP GEN CHARTS HERE</h1>
<p>Short haul tuck calculations were revamped and simplified mirroring changes made to truck trip calculations in USTM. The moving people, goods, and services by light, medium, and heavy truck detailed calculations were collapsed to just light, medium, and heavy categories. (Note, the trip generation script still includes code for the more detailed calculations, however most of this code is not being used.) The new short haul truck trip variables and coefficients were combined based on the original code structure. The short haul truck trip rates were then adjusted by county. Significant changes were made to the county light, medium, and heavy truck adjustment factors resulting in a 34% increase in overall short haul truck productions and attractions. Light trucks accounted for the majority of this change with a regional increase of 50%. Medium trucks saw a regional increase of 29%. Heavy trucks decreased by 1%. In addition to the changes in regional truck trip ends and vehicle classification makeup, significant changes occurred in the county-level distribution of the trip ends with Salt Lake County truck trip ends held constant yielding more than twice the regional change in the other counties (see <span class="citation" data-cites="figxx">@figxx</span>).</p>
</section>
<section id="put-truck-charts-here" class="level1">
<h1>PUT TRUCK CHARTS HERE</h1>
<p>The changes to the short haul trip end calculations constitute a new behavioral model.</p>
<section id="distribution-friction-factors" class="level3">
<h3 class="anchored" data-anchor-id="distribution-friction-factors">Distribution Friction Factors</h3>
<p>The observed time, distance, and generalized cost trip length frequencies and average trip lengths, which serve as the targets for friction factor calibration and validation, were updated in version 9 to reflect the 2019 base year network and refreshed data processing. The updated average trip length frequencies are found in <span class="citation" data-cites="figxx">@figxx</span>.</p>
</section>
</section>
<section id="put-average-trip-length-here" class="level1">
<h1>PUT AVERAGE TRIP LENGTH HERE</h1>
<p>Trip distribution friction factors were updated in version 9 as part of the model’s base year calibration. Six new external-truck friction factors were added: IX_LT, IX_MD, IX_HV, XI_LT, XI_MD, and XI_HV. Note however that IX_LT and XI_LT friction factors were set equal to IX and XI, respectively. StreetLight truck origin-destination data was used to help calibrate the internal truck and external friction factors. A comparison of the version 9 and version 8 friction factors is found in <span class="citation" data-cites="figxx">@figxx</span>.</p>
</section>
<section id="put-friction-factors-here" class="level1">
<h1>PUT FRICTION FACTORS HERE</h1>
<section id="k-factors" class="level3">
<h3 class="anchored" data-anchor-id="k-factors">K-Factors</h3>
<p>K-factor variables were expanded by trip purpose to allow for more flexibility in calibrating the distribution model. However, no K-factors were needed for calibration. All K-factors were reset to 1.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="125">
<div id="tbl-kfactors" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;12: Reset K-Factors</caption>
<colgroup>
<col style="width: 37%">
<col style="width: 23%">
<col style="width: 11%">
<col style="width: 18%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Area</th>
<th style="text-align: left;">v9 Parameter</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Parameter</th>
<th style="text-align: left;">v8 Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">between Salt Lake and Utah counties</td>
<td style="text-align: left;">SL_UT_KFAC_Wrk</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">SL_UT_KFAC</td>
<td style="text-align: left;">0.85</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SL_UT_KFAC_Oth</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">SL_UT_KFAC_Trk</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SL_UT_KFAC_Ext</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">between Salt Lake and Davis counties</td>
<td style="text-align: left;">SL_DA_KFAC_Wrk</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">SL_DA_KFAC</td>
<td style="text-align: left;">0.95</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SL_DA_KFAC_Oth</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">SL_DA_KFAC_Trk</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SL_DA_KFAC_Ext</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">between Box Elder and Weber counties</td>
<td style="text-align: left;">WE_BE_KFAC_Wrk</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">WE_BE_KFAC</td>
<td style="text-align: left;">1.00</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">WE_BE_KFAC_Oth</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">WE_BE_KFAC_Trk</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">WE_BE_KFAC_Ext</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="mode-choice-constants" class="level3">
<h3 class="anchored" data-anchor-id="mode-choice-constants">Mode Choice Constants</h3>
<p>Mode choice constants were updated in version 9 as part of the model’s base year calibration.</p>
<p>In addition, the parameter used to set the Core Bus constant was renamed and lowered to 0.33. The effect of this change makes mode 5 in the model a little less attractive in version 9 than it was in version 8.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="126">
<div id="tbl-vot2" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;13: Core Bus Constant Multiplier</caption>
<colgroup>
<col style="width: 30%">
<col style="width: 8%">
<col style="width: 30%">
<col style="width: 8%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">v9 Parameter</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Parameter</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">RAIL2COR_MULTIPLIER</td>
<td style="text-align: left;">0.33</td>
<td style="text-align: left;">RAIL2BRT_MULTIPLIER</td>
<td style="text-align: left;">0.4</td>
<td style="text-align: left;">factor to set Core Route constant relative to LRT constant</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>Adjustment factors were added to the mode choice logit model to adjust CRT ridership in Davis and Utah counties. The parameters are applied in the utility calculation and represent a penalty/incentive in equivalent minutes.</p>


</section>
</section>

</main> <!-- /main -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"\n\n// read in CSVs\nfaDataBusSpeeds     = FileAttachment(\"data\\\\bus_speed_ratios_long.csv\").csv({ typed: true });\nfaFunctionalClasses = FileAttachment(\"data\\\\functionalclass.csv\"      ).csv({ typed: true });\nfaTimePeriods       = FileAttachment(\"data\\\\timeperiod.csv\"           ).csv({ typed: true });\nfaAreaTypes         = FileAttachment(\"data\\\\areatype.csv\"             ).csv({ typed: true });\n\nviewof facetSelect  = Inputs.select(new Map([['Time Period', 'TimePeriodName'], ['Area Type', 'AreaTypeName'], ['Functional Class', 'FunctionalClassName']]), {value: 'TimePeriodName'     , label: \"Columns:\"});\nviewof domainSelect = Inputs.select(new Map([['Time Period', 'TimePeriodName'], ['Area Type', 'AreaTypeName'], ['Functional Class', 'FunctionalClassName']]), {value: 'AreaTypeName'       , label: \"X-Axis:\"});\nviewof strokeSelect = Inputs.select(new Map([['Time Period', 'TimePeriodName'], ['Area Type', 'AreaTypeName'], ['Functional Class', 'FunctionalClassName']]), {value: 'FunctionalClassName', label: \"Series:\"});\n\n// FILTER DATA\n//viewof functionalclasses_checked = Inputs.checkbox(faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),\n//                                                   {value: faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),\n//                                                    label: \"Function Class\"});\n//viewof timeperiods_checked       = Inputs.checkbox(faTimePeriods      .map(function(d) {return d.TimePeriodName     }),\n//                                                   {value: faTimePeriods      .map(function(d) {return d.TimePeriodName     }),\n//                                                    label: \"Time Period\"   });\n//filteredBusData = faDataBusSpeeds.filter(function(busspeed) {\n//  return functionalclasses_checked.includes(busspeed.FunctionalClassName) &&\n//         timeperiods_checked      .includes(busspeed.TimePeriodName     )// &&\n//         //areatypes        .includes(busspeed.AreaTypeName  );\n//});\n\ndomainFromSelect = {\n  switch(domainSelect) {\n    case 'TimePeriodName'     : return faTimePeriods      .map(function(d) {return d.TimePeriodName     }); break;\n    case 'AreaTypeName'       : return faAreaTypes        .map(function(d) {return d.AreaTypeName       }); break;\n    case 'FunctionalClassName': return faFunctionalClasses.map(function(d) {return d.FunctionalClassName}); break;\n    default: return;\n  }\n}\n\n//xPlotDomainSelect = {\n//  switch(domainSelect) {\n//    case 'TimePeriodName'     : return \"TimePeriod\"     ; break;\n//    case 'AreaTypeName'       : return \"AreaType\"       ; break;\n//    case 'FunctionalClassName': return \"FunctionalClass\"; break;\n//    default: return;\n//  }\n//}\n\nfLabel = {\n  switch(facetSelect) {\n    case 'TimePeriodName'     : return \"Time Period\"     ; break;\n    case 'AreaTypeName'       : return \"Area Type\"       ; break;\n    case 'FunctionalClassName': return \"Functional Class\"; break;\n    default: return;\n  }\n}\n\nxLabel = {\n  switch(domainSelect) {\n    case 'TimePeriodName'     : return \"Time Period\"     ; break;\n    case 'AreaTypeName'       : return \"Area Type\"       ; break;\n    case 'FunctionalClassName': return \"Functional Class\"; break;\n    default: return;\n  }\n}\n\ndomainFacetSelect = {\n  switch(facetSelect) {\n    case 'TimePeriodName':\n      return faTimePeriods.map(function(d) {\n          return d.TimePeriodName\n        });\n      break;\n    case 'AreaTypeName':\n      return faAreaTypes.map(function(d) {\n          return d.AreaTypeName\n        });\n      break;\n    case 'FunctionalClassName':\n      return faFunctionalClasses.map(function(d) {\n          return d.FunctionalClassName\n        });\n      break;\n    default:\n      return; \n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"Plot.plot({\n  grid: true,\n  aspectRatio: 0.25,\n  facet: { data: faDataBusSpeeds, x: facetSelect, label: fLabel, marginTop: 40},\n  x: {\n    label: xLabel,\n    domain: domainFromSelect,\n    tickSize: 4,\n    tickPadding: 2,\n    marginTop: 40,\n    tickRotate: 90,\n  },\n  y: {\n    label: \"Bus Speed Ratio\",\n    domain: [0, 1],\n    fontSize: 8\n  },\n  color: { type: \"categorical\", legend: true, legendStyle: { fontSize: 16 } },\n  style: {\n    fontSize: 12\n  },\n  marginTop: 60,\n  marginBottom: 120,\n  marks: [\n    Plot.frame(),\n    Plot.line(faDataBusSpeeds, { x: domainSelect, y: \"BusSpeedRatio\", stroke: strokeSelect, strokeWidth: 2 }),\n    Plot.dot(faDataBusSpeeds, { x: domainSelect, y: \"BusSpeedRatio\", stroke: strokeSelect, r: 4, fill: strokeSelect })\n  ]\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"Inputs.table(faDataBusSpeeds, {\n  style: {\n    fontSize: 12,\n  },\n  columns: [\n    \"FunctionalClassName\",\n    \"TimePeriodName\",\n    \"AreaTypeName\",\n    \"BusSpeedRatio\"\n  ],\n  header: {\n    FunctionalClassName: \"Functional Class\",\n    TimePeriodName: \"Time Period\",\n    AreaTypeName: \"Area Type\",\n    BusSpeedRatio: \"Bus Speed Ratio\"\n  }\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"\n// read in CSVs\nfaDataBusSpeeds_previous = FileAttachment(\"data\\\\bus_speed_ratios_previous.csv\").csv({ typed: true });\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"\nPlot.plot({\n  grid: true,\n  aspectRatio: 0.5,\n  style: {\n    fontSize: 12,\n  },\n  margin: 40,\n  marginBottom: 150,\n  x: {\n    label: \"\",\n    //tickFormat: () => \"\",\n    tickRotate: 90,\n    domain: faDataBusSpeeds_previous.map(function(d) {return d.FunctionalClass}),\n    tickSize: 0\n  },\n  y: {label: \"Bus Speed Ratio\" , domain: [0, 1]},\n  color: { type: \"categorical\", legend: false },\n  marks: [\n    Plot.frame(),\n    Plot.barY(faDataBusSpeeds_previous, {x: \"FunctionalClass\", y: \"BusSpeedRatio\", stroke: \"FunctionalClass\", fill: \"FunctionalClass\"})\n  ]  \n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"// setup mapping and layers\nL = require('leaflet@1.2.0')\nhtml`<link href='${resolve('leaflet@1.2.0/dist/leaflet.css')}' rel='stylesheet' />`\n\ngeojsonK12Enroll = FileAttachment(\"data/k12enroll.geojson\").json()\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"\nmapK12Enroll = {\n\n  let container = DOM.element('div', { style: `width:${width}px;height:${width/1.6}px` });\n  yield container;\n  \n  let map = L.map(container).setView([40.7608, -111.8910], 8.25);\n\n  let greyLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  }).addTo(map);\n\n  var cHigh = \"#FF0000\"\n  var cMidl = \"#00FF00\"\n  var cElem = \"#0000FF\"\n\n  var geojsonMarkerOptions_High = {\n      radius: 4,\n      fillColor: cHigh,\n      color: cHigh,\n      weight: 2,\n      opacity: 1,\n      fillOpacity: 1.0,\n  };\n\n  var geojsonMarkerOptions_Midl = {\n      radius: 4,\n      fillColor: cMidl,\n      color: cMidl,\n      weight: 2,\n      opacity: 1,\n      fillOpacity: 1.0,\n  };\n  var geojsonMarkerOptions_Elem = {\n      radius: 4,\n      fillColor: cElem,\n      color: cElem,\n      weight: 2,\n      opacity: 1,\n      fillOpacity: 1.0,\n  };\n            \n  // function to use different icons based on number of stations\n  function markerByEnrollment(feature) {\n    if (feature.properties.Enrol_High >= 100) {\n      return geojsonMarkerOptions_High\n    } else if (feature.properties.Enrol_Midl >= 100){\n      return geojsonMarkerOptions_Midl;\n    } else{\n      return geojsonMarkerOptions_Elem;\n    }\n  };\n\n  function getColor(c) {\n    if (c=='High School') {\n      return cHigh;\n    } else if (c=='Middle School') {\n      return cMidl;\n    } else if (c=='Elementary School') {\n      return cElem;\n    }\n  };\n          \n  // create the GeoJSON layer and call the styling function with each marker\n  var layerSchools = L.geoJSON(geojsonK12Enroll,  {\n    pointToLayer: function (feature, latlng) {\n      var mypopup = L.popup().setContent(\"<b>\" + feature.properties.SchoolName + \" Enrollment</b>\" +\n                    \"<br><b>High School: </b>\" + feature.properties.Enrol_High +\n                    \"<br><b>Middle School: </b>\" + feature.properties.Enrol_Midl +\n                    \"<br><b>Elementary School: </b>\" + feature.properties.Enrol_Elem);\n      var mymarker = L.circleMarker(latlng, markerByEnrollment(feature));\n      mymarker.bindPopup(mypopup);\n      return mymarker;\n    }\n  }).addTo(map);\n\n  var legend = L.control({position: 'bottomleft'});\n    legend.onAdd = function (map) {\n      var div = L.DomUtil.create('div', 'info legend');\n      var labelsBill = []; // legend title\n      var lcategories = ['High School','Middle School','Elementary School'];\n\n      for (var i = 0; i < lcategories.length; i++) {\n        div.innerHTML += \n          labelsBill.push(\n            '<i class=\"bi bi-circle-fill\" style=\"color:' + getColor(lcategories[i]) + '\"></i> ' +\n          (lcategories[i] ? lcategories[i] : '+'));\n      }\n      div.innerHTML = labelsBill.join('<br>');\n\n      // Add CSS style for the background color\n      div.style.backgroundColor = 'lightgray';\n      div.style.padding = '10px';\n      \n      return div;\n    };\n    legend.addTo(map);\n\n  //let lyrK12Enroll = L.geoJson(geojsonK12Enroll, { size: 5, color: '#FFFFFF'}).addTo(map);\n  \n}\n"},{"methodName":"interpretQuiet","source":"shinyInput('facetSelect')"},{"methodName":"interpretQuiet","source":"shinyInput('domainSelect')"},{"methodName":"interpretQuiet","source":"shinyInput('strokeSelect')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../v9x/v900/whats-new";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><a href="https://wfrc.org"><img src="https://wfrc.org/wp-content/uploads/2021/11/logo.jpg" class="img-fluid" alt="WFRC" width="150"></a> <a href="https://mountainland.org/"><img src="https://mountainland.org/static/media/logo/svg/MAG_Logo_Horz_NoTag.svg" class="img-fluid" alt="MAG" width="65"></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Built using <a href="https://quarto.org">Quarto</a></div>
  </div>
</footer>



</body></html>