<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>WFTDM Documentation - Input Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../_pictures/favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="../../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="https://wfrc.org" class="navbar-brand navbar-brand-logo">
    <img src="../../../_pictures/wf-logo-new-white-t.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-version-9-series" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Version 9 Series</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-version-9-series">    
        <li>
    <a class="dropdown-item" href="../../../v9x/v900/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-past-versions" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Past Versions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-past-versions">    
        <li>
    <a class="dropdown-item" href="../../../v8x/v832/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v831/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v830/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.0</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/WFRCAnalytics/TDM-Documentation/tree/gh-pages" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="mailto:sswim@wfrc.org" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../v9x/v900/whats-new/1-genparams.html"><span style="color: #3E6682;">**Whats New Document**</span></a></li><li class="breadcrumb-item"><a href="../../../v9x/v900/whats-new/2-inputdata.html">Input Data</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;font-size: 25px;"><strong>Version 9.0.0</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;"><strong>Whats New Document</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/1-genparams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General Parameters</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/2-inputdata.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Input Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/3-inputprocessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Input Processing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/4-hhdisag.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Household Disaggregation and Auto Ownership</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/6-distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distribution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/7-mc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mode Choice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/8-assign.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Highway Assignment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/10-modelresults.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model Results - Comparison with v8.3.2</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;"><strong>Model Validation Report</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/2-tripgen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trip Generation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/3-distribute.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trip Distribution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/4-modechoice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mode Choice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/5-assignhwy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Highway Assignment</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><strong>Section Contents</strong><br>__________________</h2>
   
  <ul class="collapse">
  <li><a href="#global-data" id="toc-global-data" class="nav-link active" data-scroll-target="#global-data">Global Data</a></li>
  <li><a href="#traffic-analysis-zones-taz" id="toc-traffic-analysis-zones-taz" class="nav-link" data-scroll-target="#traffic-analysis-zones-taz">Traffic Analysis Zones (TAZ)</a></li>
  <li><a href="#socioeconomic-data" id="toc-socioeconomic-data" class="nav-link" data-scroll-target="#socioeconomic-data">Socioeconomic Data</a></li>
  <li><a href="#highway-network" id="toc-highway-network" class="nav-link" data-scroll-target="#highway-network">Highway Network</a></li>
  <li><a href="#transit" id="toc-transit" class="nav-link" data-scroll-target="#transit">Transit</a></li>
  <li><a href="#externals" id="toc-externals" class="nav-link" data-scroll-target="#externals">Externals</a></li>
  <li><a href="#segment" id="toc-segment" class="nav-link" data-scroll-target="#segment">Segment</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Input Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Changes made to the <code>1_Inputs</code> folder are discussed in this section.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="64" data-source-offset="-28"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 63;"><span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> <span class="pp">require</span>(<span class="st">'leaflet@1.2.0'</span>)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;link href='</span><span class="sc">${</span><span class="fu">resolve</span>(<span class="st">'leaflet@1.2.0/dist/leaflet.css'</span>)<span class="sc">}</span><span class="vs">' rel='stylesheet' /&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="expression">

</div>
</div>
</div>
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="67" data-source-offset="-142"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 66;"><span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>geojsonTazOld    <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/tazOld.geojson"</span>   )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>geojsonTazNew    <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/tazNew.geojson"</span>   )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>geojsonK12Enroll <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/k12enroll.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>geojsonCity      <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/city.geojson"</span>     )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>geojsonSDst      <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/sdst.geojson"</span>     )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>geojsonMDst      <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/mdst.geojson"</span>     )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>geojsonLDst      <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/ldst.geojson"</span>     )<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-9" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<section id="global-data" class="level2">
<h2 class="anchored" data-anchor-id="global-data">Global Data</h2>
<p>This section includes the changes made within the <code>0_GlobalData</code> subfolder.</p>
<section id="trip-tables" class="level3">
<h3 class="anchored" data-anchor-id="trip-tables">Trip Tables</h3>
<p>The college base distribution file <code>BaseDistribution.csv</code> that contains the household locations of students in the base year was updated using new enrollment data sources. Dormitory populations were assigned to TAZs based on group quarter data from the census. The remaining enrollment was distributed using StreetLight origin-destination and USHE enrollment data.</p>
</section>
<section id="household-disaggregation-and-auto-ownership" class="level3">
<h3 class="anchored" data-anchor-id="household-disaggregation-and-auto-ownership">Household Disaggregation and Auto Ownership</h3>
<p>The age percent lookup file <code>Lookup - BYTAZAgePct - AllCo.csv</code> used in household disaggregation was replaced with the updated statewide file. The statewide file was updated based on 2020 Census block data, 2020 ACS block group data, and 2019 ACS population by age group data.</p>
</section>
<section id="mode-choice" class="level3">
<h3 class="anchored" data-anchor-id="mode-choice">Mode Choice</h3>
<p>The bus speed ratios in the model were removed from the model scripts, as detailed in the <em>General Parameters</em> section, and were moved into a new file, <code>bus_speed_ratios.csv</code>.</p>
<p>In addtion to moving the location of the bus speed ratios, the ratios were further categorized and refined using real world bus speed data as shown in <a href="#fig-bus-speed-ratios">Figure&nbsp;1</a>. Previously in version 8.3.2, bus speed ratios differed by functional type. A total of only 6 bus speed ratios existed. Now however in version 9, bus speed ratios differ by functional type, area type, and time of day. A total of 75 bus speed ratios now exist The observed data used to develop the new bus speed ratios is the 2019 General Transit Feed Specification (GTFS) data, which includes schedules time and stop locations for all bus routes.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Bus Speed Ratios Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Bus Speed Ratios Data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Previous Bus Speed Ratios</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="176" data-source-offset="-18"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 175;"><span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a>faDataBusSpeeds     <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">bus_speed_ratios_long.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a>faFunctionalClasses <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">functionalclass.csv"</span>      )<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a>faTimePeriods       <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">timeperiod.csv"</span>           )<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>faAreaTypes         <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">areatype.csv"</span>             )<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a>viewof facetSelect  <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">'Time Period'</span><span class="op">,</span> <span class="st">'TimePeriodName'</span>]<span class="op">,</span> [<span class="st">'Area Type'</span><span class="op">,</span> <span class="st">'AreaTypeName'</span>]<span class="op">,</span> [<span class="st">'Functional Class'</span><span class="op">,</span> <span class="st">'FunctionalClassName'</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'TimePeriodName'</span>     <span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Columns:"</span>})<span class="op">;</span></span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a>viewof domainSelect <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">'Time Period'</span><span class="op">,</span> <span class="st">'TimePeriodName'</span>]<span class="op">,</span> [<span class="st">'Area Type'</span><span class="op">,</span> <span class="st">'AreaTypeName'</span>]<span class="op">,</span> [<span class="st">'Functional Class'</span><span class="op">,</span> <span class="st">'FunctionalClassName'</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'AreaTypeName'</span>       <span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"X-Axis:"</span>})<span class="op">;</span></span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a>viewof strokeSelect <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">'Time Period'</span><span class="op">,</span> <span class="st">'TimePeriodName'</span>]<span class="op">,</span> [<span class="st">'Area Type'</span><span class="op">,</span> <span class="st">'AreaTypeName'</span>]<span class="op">,</span> [<span class="st">'Functional Class'</span><span class="op">,</span> <span class="st">'FunctionalClassName'</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'FunctionalClassName'</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Series:"</span>})<span class="op">;</span></span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a><span class="co">// FILTER DATA</span></span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a><span class="co">//viewof functionalclasses_checked = Inputs.checkbox(faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),</span></span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                   {value: faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),</span></span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                    label: "Function Class"});</span></span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a><span class="co">//viewof timeperiods_checked       = Inputs.checkbox(faTimePeriods      .map(function(d) {return d.TimePeriodName     }),</span></span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                   {value: faTimePeriods      .map(function(d) {return d.TimePeriodName     }),</span></span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a><span class="co">//                                                    label: "Time Period"   });</span></span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a><span class="co">//filteredBusData = faDataBusSpeeds.filter(function(busspeed) {</span></span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a><span class="co">//  return functionalclasses_checked.includes(busspeed.FunctionalClassName) &amp;&amp;</span></span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a><span class="co">//         timeperiods_checked      .includes(busspeed.TimePeriodName     )// &amp;&amp;</span></span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a><span class="co">//         //areatypes        .includes(busspeed.AreaTypeName  );</span></span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a><span class="co">//});</span></span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a>domainFromSelect <span class="op">=</span> {</span>
<span id="cb3-199"><a href="#cb3-199" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(domainSelect) {</span>
<span id="cb3-200"><a href="#cb3-200" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span>     <span class="op">:</span> <span class="cf">return</span> faTimePeriods      <span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">TimePeriodName</span>     })<span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span>       <span class="op">:</span> <span class="cf">return</span> faAreaTypes        <span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">AreaTypeName</span>       })<span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-202"><a href="#cb3-202" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span> <span class="cf">return</span> faFunctionalClasses<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">FunctionalClassName</span>})<span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-203"><a href="#cb3-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb3-204"><a href="#cb3-204" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-205"><a href="#cb3-205" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-206"><a href="#cb3-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-207"><a href="#cb3-207" aria-hidden="true" tabindex="-1"></a><span class="co">//xPlotDomainSelect = {</span></span>
<span id="cb3-208"><a href="#cb3-208" aria-hidden="true" tabindex="-1"></a><span class="co">//  switch(domainSelect) {</span></span>
<span id="cb3-209"><a href="#cb3-209" aria-hidden="true" tabindex="-1"></a><span class="co">//    case 'TimePeriodName'     : return "TimePeriod"     ; break;</span></span>
<span id="cb3-210"><a href="#cb3-210" aria-hidden="true" tabindex="-1"></a><span class="co">//    case 'AreaTypeName'       : return "AreaType"       ; break;</span></span>
<span id="cb3-211"><a href="#cb3-211" aria-hidden="true" tabindex="-1"></a><span class="co">//    case 'FunctionalClassName': return "FunctionalClass"; break;</span></span>
<span id="cb3-212"><a href="#cb3-212" aria-hidden="true" tabindex="-1"></a><span class="co">//    default: return;</span></span>
<span id="cb3-213"><a href="#cb3-213" aria-hidden="true" tabindex="-1"></a><span class="co">//  }</span></span>
<span id="cb3-214"><a href="#cb3-214" aria-hidden="true" tabindex="-1"></a><span class="co">//}</span></span>
<span id="cb3-215"><a href="#cb3-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-216"><a href="#cb3-216" aria-hidden="true" tabindex="-1"></a>fLabel <span class="op">=</span> {</span>
<span id="cb3-217"><a href="#cb3-217" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(facetSelect) {</span>
<span id="cb3-218"><a href="#cb3-218" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span>     <span class="op">:</span> <span class="cf">return</span> <span class="st">"Time Period"</span>     <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-219"><a href="#cb3-219" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span>       <span class="op">:</span> <span class="cf">return</span> <span class="st">"Area Type"</span>       <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-220"><a href="#cb3-220" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span> <span class="cf">return</span> <span class="st">"Functional Class"</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-221"><a href="#cb3-221" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb3-222"><a href="#cb3-222" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-223"><a href="#cb3-223" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-224"><a href="#cb3-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-225"><a href="#cb3-225" aria-hidden="true" tabindex="-1"></a>xLabel <span class="op">=</span> {</span>
<span id="cb3-226"><a href="#cb3-226" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(domainSelect) {</span>
<span id="cb3-227"><a href="#cb3-227" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span>     <span class="op">:</span> <span class="cf">return</span> <span class="st">"Time Period"</span>     <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-228"><a href="#cb3-228" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span>       <span class="op">:</span> <span class="cf">return</span> <span class="st">"Area Type"</span>       <span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-229"><a href="#cb3-229" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span> <span class="cf">return</span> <span class="st">"Functional Class"</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-230"><a href="#cb3-230" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb3-231"><a href="#cb3-231" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-232"><a href="#cb3-232" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-233"><a href="#cb3-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-234"><a href="#cb3-234" aria-hidden="true" tabindex="-1"></a>domainFacetSelect <span class="op">=</span> {</span>
<span id="cb3-235"><a href="#cb3-235" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(facetSelect) {</span>
<span id="cb3-236"><a href="#cb3-236" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'TimePeriodName'</span><span class="op">:</span></span>
<span id="cb3-237"><a href="#cb3-237" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> faTimePeriods<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {</span>
<span id="cb3-238"><a href="#cb3-238" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> d<span class="op">.</span><span class="at">TimePeriodName</span></span>
<span id="cb3-239"><a href="#cb3-239" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb3-240"><a href="#cb3-240" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-241"><a href="#cb3-241" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'AreaTypeName'</span><span class="op">:</span></span>
<span id="cb3-242"><a href="#cb3-242" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> faAreaTypes<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {</span>
<span id="cb3-243"><a href="#cb3-243" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> d<span class="op">.</span><span class="at">AreaTypeName</span></span>
<span id="cb3-244"><a href="#cb3-244" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb3-245"><a href="#cb3-245" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-246"><a href="#cb3-246" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">'FunctionalClassName'</span><span class="op">:</span></span>
<span id="cb3-247"><a href="#cb3-247" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> faFunctionalClasses<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {</span>
<span id="cb3-248"><a href="#cb3-248" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> d<span class="op">.</span><span class="at">FunctionalClassName</span></span>
<span id="cb3-249"><a href="#cb3-249" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb3-250"><a href="#cb3-250" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="op">;</span></span>
<span id="cb3-251"><a href="#cb3-251" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb3-252"><a href="#cb3-252" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span><span class="op">;</span> </span>
<span id="cb3-253"><a href="#cb3-253" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-254"><a href="#cb3-254" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-11" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="261" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 260;"><span id="cb4-261"><a href="#cb4-261" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb4-262"><a href="#cb4-262" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-263"><a href="#cb4-263" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.25</span><span class="op">,</span></span>
<span id="cb4-264"><a href="#cb4-264" aria-hidden="true" tabindex="-1"></a>  <span class="dt">facet</span><span class="op">:</span> { <span class="dt">data</span><span class="op">:</span> faDataBusSpeeds<span class="op">,</span> <span class="dt">x</span><span class="op">:</span> facetSelect<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> fLabel<span class="op">,</span> <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">40</span>}<span class="op">,</span></span>
<span id="cb4-265"><a href="#cb4-265" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb4-266"><a href="#cb4-266" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> xLabel<span class="op">,</span></span>
<span id="cb4-267"><a href="#cb4-267" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> domainFromSelect<span class="op">,</span></span>
<span id="cb4-268"><a href="#cb4-268" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb4-269"><a href="#cb4-269" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb4-270"><a href="#cb4-270" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb4-271"><a href="#cb4-271" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span></span>
<span id="cb4-272"><a href="#cb4-272" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-273"><a href="#cb4-273" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb4-274"><a href="#cb4-274" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Bus Speed Ratio"</span><span class="op">,</span></span>
<span id="cb4-275"><a href="#cb4-275" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb4-276"><a href="#cb4-276" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">8</span></span>
<span id="cb4-277"><a href="#cb4-277" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-278"><a href="#cb4-278" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span> <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">legendStyle</span><span class="op">:</span> { <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">16</span> } }<span class="op">,</span></span>
<span id="cb4-279"><a href="#cb4-279" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb4-280"><a href="#cb4-280" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span></span>
<span id="cb4-281"><a href="#cb4-281" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-282"><a href="#cb4-282" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb4-283"><a href="#cb4-283" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">120</span><span class="op">,</span></span>
<span id="cb4-284"><a href="#cb4-284" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-285"><a href="#cb4-285" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb4-286"><a href="#cb4-286" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(faDataBusSpeeds<span class="op">,</span> { <span class="dt">x</span><span class="op">:</span> domainSelect<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"BusSpeedRatio"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> strokeSelect<span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span> })<span class="op">,</span></span>
<span id="cb4-287"><a href="#cb4-287" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(faDataBusSpeeds<span class="op">,</span> { <span class="dt">x</span><span class="op">:</span> domainSelect<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"BusSpeedRatio"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> strokeSelect<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> strokeSelect })</span>
<span id="cb4-288"><a href="#cb4-288" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb4-289"><a href="#cb4-289" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-bus-speed-ratios" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;1: Bus Speed Ratios</figcaption>
</figure>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="296" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 295;"><span id="cb5-296"><a href="#cb5-296" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(faDataBusSpeeds<span class="op">,</span> {</span>
<span id="cb5-297"><a href="#cb5-297" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb5-298"><a href="#cb5-298" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb5-299"><a href="#cb5-299" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb5-300"><a href="#cb5-300" aria-hidden="true" tabindex="-1"></a>  <span class="dt">columns</span><span class="op">:</span> [</span>
<span id="cb5-301"><a href="#cb5-301" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FunctionalClassName"</span><span class="op">,</span></span>
<span id="cb5-302"><a href="#cb5-302" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TimePeriodName"</span><span class="op">,</span></span>
<span id="cb5-303"><a href="#cb5-303" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AreaTypeName"</span><span class="op">,</span></span>
<span id="cb5-304"><a href="#cb5-304" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BusSpeedRatio"</span></span>
<span id="cb5-305"><a href="#cb5-305" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb5-306"><a href="#cb5-306" aria-hidden="true" tabindex="-1"></a>  <span class="dt">header</span><span class="op">:</span> {</span>
<span id="cb5-307"><a href="#cb5-307" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FunctionalClassName</span><span class="op">:</span> <span class="st">"Functional Class"</span><span class="op">,</span></span>
<span id="cb5-308"><a href="#cb5-308" aria-hidden="true" tabindex="-1"></a>    <span class="dt">TimePeriodName</span><span class="op">:</span> <span class="st">"Time Period"</span><span class="op">,</span></span>
<span id="cb5-309"><a href="#cb5-309" aria-hidden="true" tabindex="-1"></a>    <span class="dt">AreaTypeName</span><span class="op">:</span> <span class="st">"Area Type"</span><span class="op">,</span></span>
<span id="cb5-310"><a href="#cb5-310" aria-hidden="true" tabindex="-1"></a>    <span class="dt">BusSpeedRatio</span><span class="op">:</span> <span class="st">"Bus Speed Ratio"</span></span>
<span id="cb5-311"><a href="#cb5-311" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-312"><a href="#cb5-312" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="319" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 318;"><span id="cb6-319"><a href="#cb6-319" aria-hidden="true" tabindex="-1"></a><span class="co">// read in CSVs</span></span>
<span id="cb6-320"><a href="#cb6-320" aria-hidden="true" tabindex="-1"></a>faDataBusSpeeds_previous <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data</span><span class="sc">\\</span><span class="st">bus_speed_ratios_previous.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="328" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 327;"><span id="cb7-328"><a href="#cb7-328" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb7-329"><a href="#cb7-329" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb7-330"><a href="#cb7-330" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb7-331"><a href="#cb7-331" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb7-332"><a href="#cb7-332" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb7-333"><a href="#cb7-333" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb7-334"><a href="#cb7-334" aria-hidden="true" tabindex="-1"></a>  <span class="dt">margin</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb7-335"><a href="#cb7-335" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">150</span><span class="op">,</span></span>
<span id="cb7-336"><a href="#cb7-336" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb7-337"><a href="#cb7-337" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb7-338"><a href="#cb7-338" aria-hidden="true" tabindex="-1"></a>    <span class="co">//tickFormat: () =&gt; "",</span></span>
<span id="cb7-339"><a href="#cb7-339" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span></span>
<span id="cb7-340"><a href="#cb7-340" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> faDataBusSpeeds_previous<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(d) {<span class="cf">return</span> d<span class="op">.</span><span class="at">FunctionalClass</span>})<span class="op">,</span></span>
<span id="cb7-341"><a href="#cb7-341" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb7-342"><a href="#cb7-342" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb7-343"><a href="#cb7-343" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Bus Speed Ratio"</span> <span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]}<span class="op">,</span></span>
<span id="cb7-344"><a href="#cb7-344" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span> <span class="dt">legend</span><span class="op">:</span> <span class="kw">false</span> }<span class="op">,</span></span>
<span id="cb7-345"><a href="#cb7-345" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb7-346"><a href="#cb7-346" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb7-347"><a href="#cb7-347" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(faDataBusSpeeds_previous<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"FunctionalClass"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"BusSpeedRatio"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"FunctionalClass"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"FunctionalClass"</span>})</span>
<span id="cb7-348"><a href="#cb7-348" aria-hidden="true" tabindex="-1"></a>  ]  </span>
<span id="cb7-349"><a href="#cb7-349" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-bus-speed-ratios-previous" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-6" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;2: Previous Bus Speed Ratios</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="assignment" class="level3">
<h3 class="anchored" data-anchor-id="assignment">Assignment</h3>
<p>As described in the <em>General Parameters</em> section, diurnal and production/attraction factors were moved out of the <code>0_GeneralParameters.block</code> file to an input file. The factors are now found in the <code>Time Of Day Factors.csv</code> file.</p>
<p>Most of the factors remained the same between model versions, except for the external trip purpose factors, as shown in <a href="#tbl-factor-change">Table&nbsp;1</a>.</p>
<p>The new factors file also contains factors for more purposes, including home-based college purposes. Though the code has not been modified yet to account for these new purposes.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<div id="tbl-factor-change" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;1: Time Of Day Factors with Changes</caption>
<colgroup>
<col style="width: 40%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Factor</th>
<th style="text-align: right;">v9 Value</th>
<th style="text-align: right;">v832 Value</th>
<th style="text-align: right;">Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">IX_AM_PCT</td>
<td style="text-align: right;">0.1909</td>
<td style="text-align: right;">0.1786</td>
<td style="text-align: right;">0.0123</td>
</tr>
<tr class="even">
<td style="text-align: left;">IX_MD_PCT</td>
<td style="text-align: right;">0.3136</td>
<td style="text-align: right;">0.3291</td>
<td style="text-align: right;">-0.0155</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IX_PM_PCT</td>
<td style="text-align: right;">0.2567</td>
<td style="text-align: right;">0.2604</td>
<td style="text-align: right;">-0.0037</td>
</tr>
<tr class="even">
<td style="text-align: left;">IX_EV_PCT</td>
<td style="text-align: right;">0.2388</td>
<td style="text-align: right;">0.2319</td>
<td style="text-align: right;">0.0069</td>
</tr>
<tr class="odd">
<td style="text-align: left;">XI_AM_PCT</td>
<td style="text-align: right;">0.1969</td>
<td style="text-align: right;">0.1786</td>
<td style="text-align: right;">0.0183</td>
</tr>
<tr class="even">
<td style="text-align: left;">XI_MD_PCT</td>
<td style="text-align: right;">0.3263</td>
<td style="text-align: right;">0.3291</td>
<td style="text-align: right;">-0.0028</td>
</tr>
<tr class="odd">
<td style="text-align: left;">XI_PM_PCT</td>
<td style="text-align: right;">0.2617</td>
<td style="text-align: right;">0.2604</td>
<td style="text-align: right;">0.0013</td>
</tr>
<tr class="even">
<td style="text-align: left;">XI_EV_PCT</td>
<td style="text-align: right;">0.2151</td>
<td style="text-align: right;">0.2319</td>
<td style="text-align: right;">-0.0168</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IX_AM_PA</td>
<td style="text-align: right;">0.6604</td>
<td style="text-align: right;">0.8563</td>
<td style="text-align: right;">-0.1959</td>
</tr>
<tr class="even">
<td style="text-align: left;">IX_MD_PA</td>
<td style="text-align: right;">0.5593</td>
<td style="text-align: right;">0.5627</td>
<td style="text-align: right;">-0.0034</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IX_PM_PA</td>
<td style="text-align: right;">0.4044</td>
<td style="text-align: right;">0.3288</td>
<td style="text-align: right;">0.0756</td>
</tr>
<tr class="even">
<td style="text-align: left;">IX_EV_PA</td>
<td style="text-align: right;">0.3968</td>
<td style="text-align: right;">0.3290</td>
<td style="text-align: right;">0.0678</td>
</tr>
<tr class="odd">
<td style="text-align: left;">XI_AM_PA</td>
<td style="text-align: right;">0.7709</td>
<td style="text-align: right;">0.8563</td>
<td style="text-align: right;">-0.0854</td>
</tr>
<tr class="even">
<td style="text-align: left;">XI_MD_PA</td>
<td style="text-align: right;">0.6087</td>
<td style="text-align: right;">0.5627</td>
<td style="text-align: right;">0.0460</td>
</tr>
<tr class="odd">
<td style="text-align: left;">XI_PM_PA</td>
<td style="text-align: right;">0.3111</td>
<td style="text-align: right;">0.3288</td>
<td style="text-align: right;">-0.0177</td>
</tr>
<tr class="even">
<td style="text-align: left;">XI_EV_PA</td>
<td style="text-align: right;">0.3170</td>
<td style="text-align: right;">0.3290</td>
<td style="text-align: right;">-0.0120</td>
</tr>
<tr class="odd">
<td style="text-align: left;">XX_AM_PA</td>
<td style="text-align: right;">0.8562</td>
<td style="text-align: right;">0.8563</td>
<td style="text-align: right;">-0.0001</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="traffic-analysis-zones-taz" class="level2">
<h2 class="anchored" data-anchor-id="traffic-analysis-zones-taz">Traffic Analysis Zones (TAZ)</h2>
<section id="taz-geometry-geographic-changes" class="level3">
<h3 class="anchored" data-anchor-id="taz-geometry-geographic-changes">Taz Geometry &amp; Geographic Changes</h3>
<p>TAZ geometry was updated and corrected. These updates include:</p>
<ul>
<li>Fixed the TAZ UTM NAD83 projection to use the standard for Utah rather than the ArcGIS default.</li>
<li>All TAZ boundaries align to county boundaries from the most current version on AGRC’s website.</li>
<li>All internal TAZ topology was checked and corrected so there are no slivers, gaps, overlaps.</li>
</ul>
<p>Internal zones were split to increase the model’s geographic resolution. Some zone boundaries were also modified without being split to better align with underlying land uses and planning boundaries.</p>
<p>The geographic coverage area of the internal zones was also expanded to encompass the entire county. The notable exceptions to this are the portions of Box Elder County and Weber County that are not in the WFRC planning domain. While not expanded to county boundaries, the geographic coverage area of these counties was still changed to encompass the canyon/mountain areas that are part of the Wasatch Front travel shed.</p>
<p>External zones were revised to reflect the changes of the expanded internal zone area. This included an update to the number and location of the external zones. However, external zones are no longer represented in the TAZ shapefile. The arbitrary polygons representing the external zones in previous version of the TAZ shapefile have been removed. External zones are still represented in other parts of the model, such as in the highway network, general parameters block file.</p>
<p>The expanded area and reconfigured TAZs resulted in the addition of 688 internal zones and 6 external zones. A comparison of zone counts is found in <a href="#tbl-taz-count-internal">Table&nbsp;2</a> and <a href="#tbl-taz-count-external">Table&nbsp;3</a>.</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" data-execution_count="6" style="flex-basis: 50.0%;justify-content: center;">
<div class="cell-output cell-output-display" data-execution_count="6">
<div id="tbl-taz-count-internal" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2: Internal TAZ Count Comparison</caption>
<colgroup>
<col style="width: 40%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">v9</th>
<th style="text-align: left;">v832</th>
<th style="text-align: left;">Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">153</td>
<td style="text-align: left;">135</td>
<td style="text-align: left;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">428</td>
<td style="text-align: left;">280</td>
<td style="text-align: left;">148</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">324</td>
<td style="text-align: left;">231</td>
<td style="text-align: left;">93</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">1311</td>
<td style="text-align: left;">1127</td>
<td style="text-align: left;">184</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">1330</td>
<td style="text-align: left;">1085</td>
<td style="text-align: left;">245</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: left;">3546</td>
<td style="text-align: left;">2858</td>
<td style="text-align: left;">688</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell quarto-layout-cell" data-execution_count="7" style="flex-basis: 50.0%;justify-content: center;">
<div class="cell-output cell-output-display" data-execution_count="7">
<div id="tbl-taz-count-external" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;3: External TAZ Count Comparison</caption>
<colgroup>
<col style="width: 40%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">v9</th>
<th style="text-align: left;">v832</th>
<th style="text-align: left;">Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: left;">29</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>The interactive map in <a href="#fig-taz-compare-map">Figure&nbsp;3</a> can be explored to visualize the difference in version 9 and version 8 TAZs.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="485" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 484;"><span id="cb8-485"><a href="#cb8-485" aria-hidden="true" tabindex="-1"></a>mapTaz <span class="op">=</span> {</span>
<span id="cb8-486"><a href="#cb8-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-487"><a href="#cb8-487" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> container <span class="op">=</span> DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">'div'</span><span class="op">,</span> { <span class="dt">style</span><span class="op">:</span> <span class="vs">`width:</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">px;height:</span><span class="sc">${</span>width<span class="op">/</span><span class="fl">1.6</span><span class="sc">}</span><span class="vs">px`</span> })<span class="op">;</span></span>
<span id="cb8-488"><a href="#cb8-488" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> container<span class="op">;</span></span>
<span id="cb8-489"><a href="#cb8-489" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-490"><a href="#cb8-490" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(container)<span class="op">.</span><span class="fu">setView</span>([<span class="fl">40.7608</span><span class="op">,</span> <span class="op">-</span><span class="fl">111.8910</span>]<span class="op">,</span> <span class="fl">8.25</span>)<span class="op">;</span></span>
<span id="cb8-491"><a href="#cb8-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-492"><a href="#cb8-492" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> greyLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png'</span><span class="op">,</span> {</span>
<span id="cb8-493"><a href="#cb8-493" aria-hidden="true" tabindex="-1"></a>    <span class="dt">attribution</span><span class="op">:</span> <span class="st">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'</span></span>
<span id="cb8-494"><a href="#cb8-494" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb8-495"><a href="#cb8-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-496"><a href="#cb8-496" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> lcolors <span class="op">=</span> [<span class="st">'#0000FF'</span>    <span class="op">,</span><span class="st">'red'</span>   ]</span>
<span id="cb8-497"><a href="#cb8-497" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> llabels <span class="op">=</span> [<span class="st">'v8.3.2 TAZ'</span> <span class="op">,</span><span class="st">'v9.0.0 TAZ'</span>]<span class="op">;</span></span>
<span id="cb8-498"><a href="#cb8-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-499"><a href="#cb8-499" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> lyrTAZOld <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJson</span>(geojsonTazOld<span class="op">,</span> { <span class="dt">weight</span><span class="op">:</span> <span class="fl">3.00</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> lcolors[<span class="dv">0</span>]<span class="op">,</span> <span class="dt">fillOpacity</span><span class="op">:</span> <span class="dv">0</span>})<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb8-500"><a href="#cb8-500" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> lyrTAZNew <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJson</span>(geojsonTazNew<span class="op">,</span> { <span class="dt">weight</span><span class="op">:</span> <span class="fl">1.50</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> lcolors[<span class="dv">1</span>]<span class="op">,</span> <span class="dt">fillOpacity</span><span class="op">:</span> <span class="dv">0</span>})<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb8-501"><a href="#cb8-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-502"><a href="#cb8-502" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">'bottomleft'</span>})<span class="op">;</span></span>
<span id="cb8-503"><a href="#cb8-503" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span> (map) {</span>
<span id="cb8-504"><a href="#cb8-504" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">'div'</span><span class="op">,</span> <span class="st">'legend'</span>)<span class="op">;</span></span>
<span id="cb8-505"><a href="#cb8-505" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">''</span><span class="op">;</span></span>
<span id="cb8-506"><a href="#cb8-506" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> llabels<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb8-507"><a href="#cb8-507" aria-hidden="true" tabindex="-1"></a>        div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">+=</span> <span class="st">'&lt;i style="background:'</span> <span class="op">+</span> lcolors[i] <span class="op">+</span> <span class="st">'"&gt;&amp;nbsp;&lt;/i&gt; '</span> <span class="op">+</span> llabels[i] <span class="op">+</span> <span class="st">'&lt;br/&gt;'</span><span class="op">;</span></span>
<span id="cb8-508"><a href="#cb8-508" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb8-509"><a href="#cb8-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-510"><a href="#cb8-510" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Add CSS style for the background color</span></span>
<span id="cb8-511"><a href="#cb8-511" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">backgroundColor</span> <span class="op">=</span> <span class="st">'lightgray'</span><span class="op">;</span></span>
<span id="cb8-512"><a href="#cb8-512" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">padding</span> <span class="op">=</span> <span class="st">'10px'</span><span class="op">;</span></span>
<span id="cb8-513"><a href="#cb8-513" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb8-514"><a href="#cb8-514" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb8-515"><a href="#cb8-515" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb8-516"><a href="#cb8-516" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb8-517"><a href="#cb8-517" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-taz-compare-map" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;3: TAZ Geography Comparison Map</figcaption>
</figure>
</div>
</div>
<p>The TAZ numbering was updated to reflect the changes made to the TAZ geometry, as depicted in <a href="#tbl-taz-ranges-internal">Table&nbsp;4</a> and <a href="#tbl-taz-ranges-external">Table&nbsp;5</a>.</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" data-execution_count="8" style="flex-basis: 50.0%;justify-content: center;">
<div class="cell-output cell-output-display" data-execution_count="8">
<div id="tbl-taz-ranges-internal" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;4: Internal TAZ Ranges</caption>
<colgroup>
<col style="width: 30%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">v9</th>
<th style="text-align: left;">v832</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">1-153</td>
<td style="text-align: left;">1-135</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">154-581</td>
<td style="text-align: left;">141-420</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">582-905</td>
<td style="text-align: left;">424-654</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">906-2216</td>
<td style="text-align: left;">655-1781</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">2217-3546</td>
<td style="text-align: left;">1789-2873</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: left;">1-3546</td>
<td style="text-align: left;">1-2873</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell quarto-layout-cell" data-execution_count="9" style="flex-basis: 50.0%;justify-content: center;">
<div class="cell-output cell-output-display" data-execution_count="9">
<div id="tbl-taz-ranges-external" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;5: External TAZ Ranges</caption>
<colgroup>
<col style="width: 30%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">v9</th>
<th style="text-align: left;">v832</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">3601-3606</td>
<td style="text-align: left;">136-140</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">3607-3609</td>
<td style="text-align: left;">421-423</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">N/A</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">3610-3615</td>
<td style="text-align: left;">1782-1788</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">3616-3629</td>
<td style="text-align: left;">2874-2881</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: left;">3601-3629</td>
<td style="text-align: left;">137-140, 421-423, 1782-1788, 2874-2881</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="taz-attribute-changes" class="level3">
<h3 class="anchored" data-anchor-id="taz-attribute-changes">TAZ Attribute Changes</h3>
<p>This section describes the changes made to the attributes of the TAZ shapefile.</p>
<section id="remm-space" class="level4">
<h4 class="anchored" data-anchor-id="remm-space">REMM Space</h4>
<p>To indicate which TAZs are included in the Real Estate Market Model (REMM) space, the <code>REMM</code> field was added with a value of <code>1</code> indicating that it is part of REMM and <code>0</code> indicating it is not part of REMM, as shown in <a href="#fig-taz-remm-space">Figure&nbsp;4</a>.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="577" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 576;"><span id="cb9-577"><a href="#cb9-577" aria-hidden="true" tabindex="-1"></a>mapTazRemmSpace <span class="op">=</span> {</span>
<span id="cb9-578"><a href="#cb9-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-579"><a href="#cb9-579" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> container <span class="op">=</span> DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">'div'</span><span class="op">,</span> { <span class="dt">style</span><span class="op">:</span> <span class="vs">`width:</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">px;height:</span><span class="sc">${</span>width<span class="op">/</span><span class="fl">1.6</span><span class="sc">}</span><span class="vs">px`</span> })<span class="op">;</span></span>
<span id="cb9-580"><a href="#cb9-580" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> container<span class="op">;</span></span>
<span id="cb9-581"><a href="#cb9-581" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-582"><a href="#cb9-582" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(container)<span class="op">.</span><span class="fu">setView</span>([<span class="fl">40.7608</span><span class="op">,</span> <span class="op">-</span><span class="fl">111.8910</span>]<span class="op">,</span> <span class="fl">8.25</span>)<span class="op">;</span></span>
<span id="cb9-583"><a href="#cb9-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-584"><a href="#cb9-584" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> greyLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png'</span><span class="op">,</span> {</span>
<span id="cb9-585"><a href="#cb9-585" aria-hidden="true" tabindex="-1"></a>    <span class="dt">attribution</span><span class="op">:</span> <span class="st">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'</span></span>
<span id="cb9-586"><a href="#cb9-586" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb9-587"><a href="#cb9-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-588"><a href="#cb9-588" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> remmColors <span class="op">=</span> [<span class="st">'#00887F'</span>   <span class="op">,</span><span class="st">'#BD0026'</span>       ]</span>
<span id="cb9-589"><a href="#cb9-589" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> remmLabels <span class="op">=</span> [<span class="st">'REMM Space'</span><span class="op">,</span><span class="st">'Non-REMM Space'</span>]<span class="op">;</span></span>
<span id="cb9-590"><a href="#cb9-590" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-591"><a href="#cb9-591" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> lyrTAZNew <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJson</span>(geojsonTazNew<span class="op">,</span> {</span>
<span id="cb9-592"><a href="#cb9-592" aria-hidden="true" tabindex="-1"></a>                            <span class="dt">style</span><span class="op">:</span> <span class="kw">function</span>(feature) {</span>
<span id="cb9-593"><a href="#cb9-593" aria-hidden="true" tabindex="-1"></a>                              <span class="kw">var</span> d <span class="op">=</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">REMM</span><span class="op">;</span></span>
<span id="cb9-594"><a href="#cb9-594" aria-hidden="true" tabindex="-1"></a>                              <span class="cf">return</span> d<span class="op">==</span><span class="dv">1</span> <span class="op">?</span> {<span class="dt">color</span><span class="op">:</span>remmColors[<span class="dv">0</span>]<span class="op">,</span> <span class="dt">weight</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span><span class="fl">0.95</span>} <span class="op">:</span></span>
<span id="cb9-595"><a href="#cb9-595" aria-hidden="true" tabindex="-1"></a>                                     d<span class="op">==</span><span class="dv">0</span> <span class="op">?</span> {<span class="dt">color</span><span class="op">:</span>remmColors[<span class="dv">1</span>]<span class="op">,</span> <span class="dt">weight</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span><span class="fl">0.95</span>} <span class="op">:</span> </span>
<span id="cb9-596"><a href="#cb9-596" aria-hidden="true" tabindex="-1"></a>                                            {<span class="dt">color</span><span class="op">:</span>    <span class="st">'#000000'</span><span class="op">,</span> <span class="dt">weight</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span><span class="fl">0.95</span>} <span class="op">;</span></span>
<span id="cb9-597"><a href="#cb9-597" aria-hidden="true" tabindex="-1"></a>                            }</span>
<span id="cb9-598"><a href="#cb9-598" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb9-599"><a href="#cb9-599" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-600"><a href="#cb9-600" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">'bottomleft'</span>})<span class="op">;</span></span>
<span id="cb9-601"><a href="#cb9-601" aria-hidden="true" tabindex="-1"></a>  legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span> (map) {</span>
<span id="cb9-602"><a href="#cb9-602" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">'div'</span><span class="op">,</span> <span class="st">'legend'</span>)<span class="op">;</span></span>
<span id="cb9-603"><a href="#cb9-603" aria-hidden="true" tabindex="-1"></a>    div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">''</span><span class="op">;</span></span>
<span id="cb9-604"><a href="#cb9-604" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> remmLabels<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb9-605"><a href="#cb9-605" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">+=</span> <span class="st">'&lt;i style="background:'</span> <span class="op">+</span> remmColors[i] <span class="op">+</span> <span class="st">'"&gt;&amp;nbsp;&lt;/i&gt; '</span> <span class="op">+</span> remmLabels[i] <span class="op">+</span> <span class="st">'&lt;br/&gt;'</span><span class="op">;</span></span>
<span id="cb9-606"><a href="#cb9-606" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-607"><a href="#cb9-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-608"><a href="#cb9-608" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add CSS style for the background color</span></span>
<span id="cb9-609"><a href="#cb9-609" aria-hidden="true" tabindex="-1"></a>    div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">backgroundColor</span> <span class="op">=</span> <span class="st">'lightgray'</span><span class="op">;</span></span>
<span id="cb9-610"><a href="#cb9-610" aria-hidden="true" tabindex="-1"></a>    div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">padding</span> <span class="op">=</span> <span class="st">'10px'</span><span class="op">;</span></span>
<span id="cb9-611"><a href="#cb9-611" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-612"><a href="#cb9-612" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb9-613"><a href="#cb9-613" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb9-614"><a href="#cb9-614" aria-hidden="true" tabindex="-1"></a>  legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb9-615"><a href="#cb9-615" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-taz-remm-space" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;4: TAZ REMM Space</figcaption>
</figure>
</div>
</div>
</section>
<section id="parking-costs" class="level4">
<h4 class="anchored" data-anchor-id="parking-costs">Parking Costs</h4>
<p>The permanent and temporary cost fields (<code>PRKCSTPERM</code> and <code>PRKCSTTEMP</code>) were updated to reflect current conditions and are in 2019 dollars. Costs for parking in the downtown areas of Salt Lake City, Ogden, and Provo and around the universities were based on 2022 parking rates obtained from Salt Lake City, web searches, and field visits.</p>
<p>The Salt Lake City International Airport temporary parking cost was set to $1.25 based on a weighted average of short-term premium and economy rates. This represents a $0.25 (25%) increase from version 8.3.2 (version 8.3.2 parking costs were in 2010 dollars). Permanent parking costs were kept at $0 as workers at the airport do not pay for parking.</p>
<p>The Lagoon temporary parking cost was set to $6 based on the 2022 advertised parking rate of $18 per day by an assumed average occupancy of 3 people per vehicle. This represents a $1 (20%) increase from version 8.3.2. Similar to the airport, the cost of permanent parking at Lagoon was set to $0 as workers at Lagoon do not pay for parking.</p>
</section>
<section id="district-definitions" class="level4">
<h4 class="anchored" data-anchor-id="district-definitions">District Definitions</h4>
<p>Large, medium, and small districts were redefined and renamed. There are now 26 large districts, 73 medium districts, and 110 small districts. Medium districts still nest within large districts. Small districts were defined based on city area definitions and do not nest within medium districts.</p>
</section>
</section>
<section id="additions-to-the-1_inputs1_taz-folder" class="level3">
<h3 class="anchored" data-anchor-id="additions-to-the-1_inputs1_taz-folder">Additions to the <code>1_Inputs\1_TAZ</code> Folder</h3>
<p><code>_Source</code> was added to the <code>1_TAZ</code> folder. It includes the following shapefile data sets for ease of reference:</p>
<ul>
<li>Cities</li>
<li>Counties</li>
<li>Environmental constraints</li>
<li>Previous TAZ versions.</li>
</ul>
<p><code>_ViewTAZDistricts</code> folder was added containing an ArcGIS Pro project with predefined symbology for viewing TAZ and district shapefiles.</p>
<p>Shapefiles representing the Wasatch Front subarea and the REMM vs.&nbsp;non-REMM area were added to the <code>1_TAZ\Districts</code> folder.</p>
</section>
</section>
<section id="socioeconomic-data" class="level2">
<h2 class="anchored" data-anchor-id="socioeconomic-data">Socioeconomic Data</h2>
<p>Forecasts and control totals were updated based on new census data, updated base year parcel data, and the results of the REMM Model.</p>
<section id="forecasts" class="level3">
<h3 class="anchored" data-anchor-id="forecasts">Forecasts</h3>
<p>The SE forecasts were updated for the WFRC areas. Box Elder updates were taken from the UDOT SE Forecasts from June 8, 2022. The updated SE forecasts can be found using the <a href="https://wfrc.org/household-job-forecast-map">Household and Job Forecasts Web App</a>. This map only contains the latest forecast and not any iterative step, such as the SE datasets in the model folder. Click on the <em>View Advanced Version</em> link in the header to enable the “Changes” option where you can see the change in forecasts between v8.3.2 and v9. You can explore the data in the embedded web application in <a href="#fig-household-job-forecast-map">Figure&nbsp;5</a></p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="652" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 651;"><span id="cb10-652"><a href="#cb10-652" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div style="width: 765px; height: 680px; transform: scale(0.85); transform-origin: 0 0;"&gt;</span></span>
<span id="cb10-653"><a href="#cb10-653" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;iframe width="900" height="800" src="https://wfrc.org/household-job-forecast-map/" title="Household and Job Forecast"&gt;&lt;/iframe&gt;</span></span>
<span id="cb10-654"><a href="#cb10-654" aria-hidden="true" tabindex="-1"></a><span class="vs">     &lt;/div&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-household-job-forecast-map" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-9" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;5: Embedded Household and Job Forecast Map</figcaption>
</figure>
</div>
</div>
</section>
<section id="control-totals" class="level3">
<h3 class="anchored" data-anchor-id="control-totals">Control Totals</h3>
<p>Updates to the county control totals were made based on projections from the Gardner Policy Institute. The v8.3.2 model used a base year of 2015 for controls totals. v9 uses a base year of 2019.</p>
<p><a href="#fig-county-control-total-differences-by-category">Figure&nbsp;6</a> shows the 2050 differences in county control totals for any given socioeconomic category.</p>
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<script type="ojs-define">{"contents": [{"name": "diffConTot2050long", "value": {"CO_NAME": ["Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Davis", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Salt Lake", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Utah", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Wasatch Front", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber", "Weber"], "Category": ["AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job", "AGRI", "ALLEMP", "CONS", "FOOD", "GQ_Pop", "GVED", "HBJ", "HH", "HH_Pop", "HH_Size", "HLTH", "Industrial", "Job_HH", "MANU", "MING", "OFFI", "OTHR", "Other", "POP_00_17", "POP_18_64", "POP_65P", "RETL", "Retail", "TOTPOP", "Typical", "WSLE", "WrkPop_Job"], "View": ["Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "Difference", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct", "DifferencePct"], "ViewValue": [1354.0, -838.0, 29054.0, 223.0, 5931.0, 2453.0, -4730.0, 15185.0, 36215.0, -0.03, 6405.0, 4042.0, -0.1276704658, 6602.0, 198.0, -5554.0, -11562.0, -8258.0, 126121.0, 24007.0, 108129.0, 1596.0, 1819.0, 529710.0, -2397.0, -2560.0, 0.0813366253, 1610.0, 60089.0, 109209.0, 16196.0, 23321.0, -10966.0, -17168.0, 26074.0, 47178.0, -0.03, 17632.0, 12022.0, 0.0015112404, 834.0, 4285.0, 4881.0, 1198.0, 12745.0, 309329.0, 46990.0, 321740.0, -1098.0, 15098.0, 1572359.0, 39865.0, 11188.0, 0.002032703, 3256.0, -47977.0, 67364.0, 4502.0, 25071.0, -16982.0, -10347.0, -21799.0, -107937.0, -0.11, 3987.0, -2565.0, -0.0340973839, -71.0, 1111.0, -14923.0, -18194.0, -46112.0, 318688.0, -50297.0, 173367.0, -4879.0, -377.0, 1185679.0, -49054.0, -2494.0, -0.0005360842, 3604.0, 5115.0, 52663.0, 20104.0, 0.0, -32070.0, -36128.0, 18532.0, -24675.0, -0.0375, 28719.0, 18283.0, -0.0214684572, 13570.0, 1227.0, -17571.0, -29633.0, -50555.0, -112644.2594600001, 31837.1011000001, 55713.6501600001, -4083.0, 16021.0, 0.0, -16251.0, 4713.0, 0.0109235169, 1362.0, 1438.0, 17306.0, 1647.0, 4942.0, -6224.0, -3508.0, 6835.0, 19563.0, 0.02, 1405.0, 5039.0, -0.0547848785, 6222.0, 273.0, -1439.0, 961.0, -5297.0, 77283.0, 11137.0, 75192.0, 502.0, 2149.0, 366031.0, 1891.0, -1183.0, 0.0474447772, null, -0.0028977389, null, 0.0148736077, null, 0.0490335219, -0.3600243568, 0.0833662736, 0.0742774282, -0.0111940299, 0.2772487231, 0.1646368783, -0.0804137058, 0.6319517565, null, -0.1445488379, -0.1558977401, -0.0444657434, null, 0.0884388826, null, 0.0602810092, 0.0438640912, null, -0.0095218801, -0.1815087918, 0.0866515382, null, 0.0448814569, null, 0.2679017451, null, -0.0542315548, -0.2736285104, 0.0432052839, 0.0314130478, -0.0120481928, 0.1557170739, 0.0761252248, 0.0006812027, 0.0116293662, null, 0.0228562598, 0.0035594167, 0.0147245374, null, 0.0525438891, null, -0.0095942959, 0.0863246006, null, 0.033265631, 0.1297776334, 0.0030431175, null, -0.0696860012, null, 0.1492656079, null, -0.1628000614, -0.2997479649, -0.0520566919, -0.0850872456, -0.0363036304, 0.0647030185, -0.0501898016, -0.0207392727, -0.00247931, null, -0.1213449341, -0.1177681403, -0.1039959224, null, -0.0676106737, null, -0.070731672, -0.0038027032, null, -0.0826314584, -0.1109973742, -0.0004961279, 0.905982906, 0.002032656, 0.3092911259, 0.1718966431, null, -0.0819938281, -0.3026454672, 0.0137169216, -0.0068178258, -0.0140712946, 0.1307774975, 0.0712248825, -0.0115261621, 0.1093067839, 0.2644396552, -0.0447689321, -0.0483271497, -0.0312765639, -0.1193182975, 0.015073722, 0.0894690321, -0.0178987883, 0.0464282609, null, -0.0073263756, 0.0355569303, 0.0130146117, null, 0.0074774325, null, 0.1854520887, null, -0.1818288051, -0.4079069767, 0.0492169217, 0.057281144, 0.0081300813, 0.0670996705, 0.2204479832, -0.0395620138, 0.4667666917, null, -0.0846918957, 0.020930891, -0.0448620769, null, 0.0550195387, null, 0.0278672144, 0.0799033278, null, 0.0112676224, -0.1241603694, 0.0450758081]}}]}</script>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="748" data-source-offset="-17"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 747;"><span id="cb11-748"><a href="#cb11-748" aria-hidden="true" tabindex="-1"></a>faControlTotals <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/controltotal.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb11-749"><a href="#cb11-749" aria-hidden="true" tabindex="-1"></a>faCounties      <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/counties.csv"</span>    )<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb11-750"><a href="#cb11-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-751"><a href="#cb11-751" aria-hidden="true" tabindex="-1"></a>cats <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>([<span class="co">//['Total Population'               , 'TOTPOP'    ],</span></span>
<span id="cb11-752"><a href="#cb11-752" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Group Quarter Population'       , 'GQ_Pop'    ],</span></span>
<span id="cb11-753"><a href="#cb11-753" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Population'</span>                     <span class="op">,</span> <span class="st">'HH_Pop'</span>    ]<span class="op">,</span></span>
<span id="cb11-754"><a href="#cb11-754" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Households'</span>                     <span class="op">,</span> <span class="st">'HH'</span>        ]<span class="op">,</span></span>
<span id="cb11-755"><a href="#cb11-755" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Household Size'                 , 'HH_Size'   ],</span></span>
<span id="cb11-756"><a href="#cb11-756" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Population 0-17'                , 'POP_00_17' ],</span></span>
<span id="cb11-757"><a href="#cb11-757" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Population 18-64'               , 'POP_18_64' ],</span></span>
<span id="cb11-758"><a href="#cb11-758" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Population 65+'                 , 'POP_65P'   ],</span></span>
<span id="cb11-759"><a href="#cb11-759" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'All Employment'</span>                 <span class="op">,</span> <span class="st">'ALLEMP'</span>    ]<span class="op">,</span></span>
<span id="cb11-760"><a href="#cb11-760" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Retail Employment'</span>              <span class="op">,</span> <span class="st">'RETL'</span>      ]<span class="op">,</span></span>
<span id="cb11-761"><a href="#cb11-761" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Food Employment'</span>                <span class="op">,</span> <span class="st">'FOOD'</span>      ]<span class="op">,</span></span>
<span id="cb11-762"><a href="#cb11-762" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Manufacturing Employment'</span>       <span class="op">,</span> <span class="st">'MANU'</span>      ]<span class="op">,</span></span>
<span id="cb11-763"><a href="#cb11-763" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Wholesale Employment'</span>           <span class="op">,</span> <span class="st">'WSLE'</span>      ]<span class="op">,</span></span>
<span id="cb11-764"><a href="#cb11-764" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Office Employment'</span>              <span class="op">,</span> <span class="st">'OFFI'</span>      ]<span class="op">,</span></span>
<span id="cb11-765"><a href="#cb11-765" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Government/Education Employment'</span><span class="op">,</span> <span class="st">'GVED'</span>      ]<span class="op">,</span></span>
<span id="cb11-766"><a href="#cb11-766" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Health Employment'</span>              <span class="op">,</span> <span class="st">'HLTH'</span>      ]<span class="op">,</span></span>
<span id="cb11-767"><a href="#cb11-767" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Other Employment'</span>               <span class="op">,</span> <span class="st">'OTHR'</span>      ]<span class="op">,</span></span>
<span id="cb11-768"><a href="#cb11-768" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Agriculture Employment'         , 'AGRI'      ],</span></span>
<span id="cb11-769"><a href="#cb11-769" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Mining Employment'              , 'MING'      ],</span></span>
<span id="cb11-770"><a href="#cb11-770" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Construction Employment'        , 'CONS'      ],</span></span>
<span id="cb11-771"><a href="#cb11-771" aria-hidden="true" tabindex="-1"></a>                [<span class="st">'Home-Based Job Employment'</span>      <span class="op">,</span> <span class="st">'HBJ'</span>       ]</span>
<span id="cb11-772"><a href="#cb11-772" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Jobs per Household'             , 'Job_HH'    ],</span></span>
<span id="cb11-773"><a href="#cb11-773" aria-hidden="true" tabindex="-1"></a>                <span class="co">//['Working Population per Job'     , 'WrkPop_Job']</span></span>
<span id="cb11-774"><a href="#cb11-774" aria-hidden="true" tabindex="-1"></a>                ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="780" data-source-offset="-15"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 779;"><span id="cb12-780"><a href="#cb12-780" aria-hidden="true" tabindex="-1"></a>filteredControlTotals <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) {</span>
<span id="cb12-781"><a href="#cb12-781" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> selectCounty   <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span></span>
<span id="cb12-782"><a href="#cb12-782" aria-hidden="true" tabindex="-1"></a>         selectCategory <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span><span class="op">;</span></span>
<span id="cb12-783"><a href="#cb12-783" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb12-784"><a href="#cb12-784" aria-hidden="true" tabindex="-1"></a>viewof selectCategory <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(cats<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'HH_Pop'</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'Category: '</span>})<span class="op">;</span></span>
<span id="cb12-785"><a href="#cb12-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-786"><a href="#cb12-786" aria-hidden="true" tabindex="-1"></a>viewof metric <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">"Difference"</span><span class="op">,</span> <span class="st">"Difference"</span>]<span class="op">,</span> [<span class="st">"Percent Difference"</span><span class="op">,</span> <span class="st">"DifferencePct"</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">"Difference"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Display:"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="790" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 789;"><span id="cb13-790"><a href="#cb13-790" aria-hidden="true" tabindex="-1"></a>dataCTDiff50 <span class="op">=</span> <span class="fu">transpose</span>(diffConTot2050long)</span>
<span id="cb13-791"><a href="#cb13-791" aria-hidden="true" tabindex="-1"></a>filtered_dataCTDiff50 <span class="op">=</span> dataCTDiff50<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(dataL) {</span>
<span id="cb13-792"><a href="#cb13-792" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> selectCategory <span class="op">==</span> dataL<span class="op">.</span><span class="at">Category</span>  <span class="op">&amp;&amp;</span></span>
<span id="cb13-793"><a href="#cb13-793" aria-hidden="true" tabindex="-1"></a>           metric <span class="op">==</span> dataL<span class="op">.</span><span class="at">View</span><span class="op">;</span></span>
<span id="cb13-794"><a href="#cb13-794" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-12-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-12-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="799" data-source-offset="-51"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 798;"><span id="cb14-799"><a href="#cb14-799" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {DivergingBarChart} <span class="im">from</span> <span class="st">"@d3/diverging-bar-chart"</span></span>
<span id="cb14-800"><a href="#cb14-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-801"><a href="#cb14-801" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getXFormat</span>() {</span>
<span id="cb14-802"><a href="#cb14-802" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (metric <span class="op">===</span> <span class="st">"DifferencePct"</span>) {</span>
<span id="cb14-803"><a href="#cb14-803" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">"+%"</span><span class="op">;</span></span>
<span id="cb14-804"><a href="#cb14-804" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selectCategory <span class="op">===</span> <span class="st">'HH_Size'</span> <span class="op">&amp;&amp;</span> metric <span class="op">===</span> <span class="st">"Difference"</span>) {</span>
<span id="cb14-805"><a href="#cb14-805" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">".2f"</span><span class="op">;</span></span>
<span id="cb14-806"><a href="#cb14-806" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb14-807"><a href="#cb14-807" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">"+,d"</span><span class="op">;</span></span>
<span id="cb14-808"><a href="#cb14-808" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-809"><a href="#cb14-809" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="816" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 815;"><span id="cb15-816"><a href="#cb15-816" aria-hidden="true" tabindex="-1"></a>chart3 <span class="op">=</span> <span class="fu">DivergingBarChart</span>(filtered_dataCTDiff50<span class="op">,</span> {</span>
<span id="cb15-817"><a href="#cb15-817" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">ViewValue</span><span class="op">,</span></span>
<span id="cb15-818"><a href="#cb15-818" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">CO_NAME</span><span class="op">,</span></span>
<span id="cb15-819"><a href="#cb15-819" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xFormat</span><span class="op">:</span> <span class="fu">getXFormat</span>()<span class="op">,</span></span>
<span id="cb15-820"><a href="#cb15-820" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xLabel</span><span class="op">:</span> <span class="st">"2050 Difference"</span><span class="op">,</span></span>
<span id="cb15-821"><a href="#cb15-821" aria-hidden="true" tabindex="-1"></a>    <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb15-822"><a href="#cb15-822" aria-hidden="true" tabindex="-1"></a>    <span class="dt">colors</span><span class="op">:</span> d3<span class="op">.</span><span class="at">schemeRdBu</span>[<span class="dv">3</span>]<span class="op">,</span></span>
<span id="cb15-823"><a href="#cb15-823" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yDomain</span><span class="op">:</span> [<span class="st">'Weber'</span><span class="op">,</span><span class="st">'Davis'</span><span class="op">,</span><span class="st">'Salt Lake'</span><span class="op">,</span><span class="st">'Utah'</span><span class="op">,</span> <span class="st">'Wasatch Front'</span>]</span>
<span id="cb15-824"><a href="#cb15-824" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-county-control-total-differences-by-category" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;6: 2050 Differences in Control Totals for Selected Category (v9.0 vs v8.3.2)</figcaption>
</figure>
</div>
</div>
<p>Utah County displays the largest decrease in control totals in the v9 model as compared to v8.3.2 with 107,937 lower population, 21,799 fewer households, and 47,977 fewer jobs (all employment). The largest job decreases are in office employment (14,923), government/education employment (16,982), and other employment (18,194). Utah County also has a significant drop in household size relative to other counties.</p>
<p>Further trends for county specific residential and employment control totals as well as control total ratios are shown in <a href="#fig-county-control-trends-by-county-by-category">Figure&nbsp;7</a>.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="834" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 833;"><span id="cb16-834"><a href="#cb16-834" aria-hidden="true" tabindex="-1"></a>viewof selectCounty <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="kw">new</span> <span class="bu">Map</span>([<span class="st">'Wasatch Front'</span><span class="op">,</span> <span class="st">'Weber'</span><span class="op">,</span> <span class="st">'Davis'</span><span class="op">,</span> <span class="st">'Salt Lake'</span><span class="op">,</span> <span class="st">'Utah'</span>]<span class="op">.</span><span class="fu">map</span>(county <span class="kw">=&gt;</span> [county<span class="op">,</span> county]))<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">'Wasatch Front'</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'County: '</span>})<span class="op">;</span></span>
<span id="cb16-835"><a href="#cb16-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-836"><a href="#cb16-836" aria-hidden="true" tabindex="-1"></a><span class="co">// FILTER DATA</span></span>
<span id="cb16-837"><a href="#cb16-837" aria-hidden="true" tabindex="-1"></a>filteredCTPlot <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) {</span>
<span id="cb16-838"><a href="#cb16-838" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> selectCounty   <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span><span class="op">;</span> <span class="co">//&amp;&amp;</span></span>
<span id="cb16-839"><a href="#cb16-839" aria-hidden="true" tabindex="-1"></a>         <span class="co">//selectCategoryPlot == ct.Category;</span></span>
<span id="cb16-840"><a href="#cb16-840" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb16-841"><a href="#cb16-841" aria-hidden="true" tabindex="-1"></a>maxY1 <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>filteredCTPlot<span class="op">.</span><span class="fu">map</span>(item <span class="kw">=&gt;</span> item<span class="op">.</span><span class="at">ControlTotal</span>))<span class="op">;</span></span>
<span id="cb16-842"><a href="#cb16-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-843"><a href="#cb16-843" aria-hidden="true" tabindex="-1"></a><span class="co">// FILTER DATA for employment control totals</span></span>
<span id="cb16-844"><a href="#cb16-844" aria-hidden="true" tabindex="-1"></a>filteredCTPlot2 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) {</span>
<span id="cb16-845"><a href="#cb16-845" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> selectCounty   <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span></span>
<span id="cb16-846"><a href="#cb16-846" aria-hidden="true" tabindex="-1"></a>         [<span class="st">"Typical"</span><span class="op">,</span> <span class="st">"Retail"</span><span class="op">,</span> <span class="st">"Industrial"</span><span class="op">,</span> <span class="st">"Other"</span>]<span class="op">.</span><span class="fu">includes</span>(ct<span class="op">.</span><span class="at">Category</span>)<span class="op">;</span></span>
<span id="cb16-847"><a href="#cb16-847" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb16-848"><a href="#cb16-848" aria-hidden="true" tabindex="-1"></a>maxY2 <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>filteredCTPlot2<span class="op">.</span><span class="fu">map</span>(item <span class="kw">=&gt;</span> item<span class="op">.</span><span class="at">ControlTotal</span>))<span class="op">;</span></span>
<span id="cb16-849"><a href="#cb16-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-850"><a href="#cb16-850" aria-hidden="true" tabindex="-1"></a><span class="co">// FILTER DATA for control totals ratios</span></span>
<span id="cb16-851"><a href="#cb16-851" aria-hidden="true" tabindex="-1"></a>filteredCTPlot3 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) {</span>
<span id="cb16-852"><a href="#cb16-852" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> selectCounty   <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span></span>
<span id="cb16-853"><a href="#cb16-853" aria-hidden="true" tabindex="-1"></a>         [<span class="st">"HH_Size"</span><span class="op">,</span> <span class="st">"Job_HH"</span><span class="op">,</span> <span class="st">"WrkPop_Job"</span>]<span class="op">.</span><span class="fu">includes</span>(ct<span class="op">.</span><span class="at">Category</span>)<span class="op">;</span></span>
<span id="cb16-854"><a href="#cb16-854" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb16-855"><a href="#cb16-855" aria-hidden="true" tabindex="-1"></a>maxY3 <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>filteredCTPlot3<span class="op">.</span><span class="fu">map</span>(item <span class="kw">=&gt;</span> item<span class="op">.</span><span class="at">ControlTotal</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-7" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="861" data-source-offset="-43"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 860;"><span id="cb17-861"><a href="#cb17-861" aria-hidden="true" tabindex="-1"></a>hhPopData8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"HH_Pop"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-862"><a href="#cb17-862" aria-hidden="true" tabindex="-1"></a>hhPopData9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"HH_Pop"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-863"><a href="#cb17-863" aria-hidden="true" tabindex="-1"></a>hhData8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"HH"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">'v8.3.2'</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-864"><a href="#cb17-864" aria-hidden="true" tabindex="-1"></a>hhData9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"HH"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">'v9.0.0'</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-865"><a href="#cb17-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-866"><a href="#cb17-866" aria-hidden="true" tabindex="-1"></a><span class="co">// data for the employment control totals</span></span>
<span id="cb17-867"><a href="#cb17-867" aria-hidden="true" tabindex="-1"></a>typicalData8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Typical"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-868"><a href="#cb17-868" aria-hidden="true" tabindex="-1"></a>typicalData9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Typical"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-869"><a href="#cb17-869" aria-hidden="true" tabindex="-1"></a>retailData8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Retail"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-870"><a href="#cb17-870" aria-hidden="true" tabindex="-1"></a>retailData9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Retail"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-871"><a href="#cb17-871" aria-hidden="true" tabindex="-1"></a>industrialData8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Industrial"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-872"><a href="#cb17-872" aria-hidden="true" tabindex="-1"></a>industrialData9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Industrial"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-873"><a href="#cb17-873" aria-hidden="true" tabindex="-1"></a>otherData8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Other"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-874"><a href="#cb17-874" aria-hidden="true" tabindex="-1"></a>otherData9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Other"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-875"><a href="#cb17-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-876"><a href="#cb17-876" aria-hidden="true" tabindex="-1"></a><span class="co">// data for control total ratios</span></span>
<span id="cb17-877"><a href="#cb17-877" aria-hidden="true" tabindex="-1"></a>hhsize8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"HH_Size"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-878"><a href="#cb17-878" aria-hidden="true" tabindex="-1"></a>hhsize9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"HH_Size"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-879"><a href="#cb17-879" aria-hidden="true" tabindex="-1"></a>jobhh8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Job_HH"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-880"><a href="#cb17-880" aria-hidden="true" tabindex="-1"></a>jobhh9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"Job_HH"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span>
<span id="cb17-881"><a href="#cb17-881" aria-hidden="true" tabindex="-1"></a>wrkpop8 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"WrkPop_Job"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v8.3.2"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span>  <span class="op">&amp;&amp;</span> ct<span class="op">.</span><span class="at">YEAR</span> <span class="op">&gt;</span> <span class="dv">2020</span><span class="op">;</span>})</span>
<span id="cb17-882"><a href="#cb17-882" aria-hidden="true" tabindex="-1"></a>wrkpop9 <span class="op">=</span> faControlTotals<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(ct) { <span class="cf">return</span> selectCounty <span class="op">==</span> ct<span class="op">.</span><span class="at">CO_NAME</span> <span class="op">&amp;&amp;</span> <span class="st">"WrkPop_Job"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">Category</span> <span class="op">&amp;&amp;</span> <span class="st">"v9.0.0"</span> <span class="op">==</span> ct<span class="op">.</span><span class="at">ModelVersion</span><span class="op">;</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-18" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div id="fig-county-control-trends-by-county-by-category" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="894" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 893;"><span id="cb18-894"><a href="#cb18-894" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb18-895"><a href="#cb18-895" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb18-896"><a href="#cb18-896" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb18-897"><a href="#cb18-897" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">'Year'</span><span class="op">,</span> <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> d}<span class="op">,</span></span>
<span id="cb18-898"><a href="#cb18-898" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">'Control Total'</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> maxY1]}<span class="op">,</span></span>
<span id="cb18-899"><a href="#cb18-899" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginRight</span><span class="op">:</span><span class="dv">60</span><span class="op">,</span></span>
<span id="cb18-900"><a href="#cb18-900" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb18-901"><a href="#cb18-901" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb18-902"><a href="#cb18-902" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">15</span></span>
<span id="cb18-903"><a href="#cb18-903" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb18-904"><a href="#cb18-904" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb18-905"><a href="#cb18-905" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb18-906"><a href="#cb18-906" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb18-907"><a href="#cb18-907" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb18-908"><a href="#cb18-908" aria-hidden="true" tabindex="-1"></a>      hhPopData8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#5b859e'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb18-909"><a href="#cb18-909" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb18-910"><a href="#cb18-910" aria-hidden="true" tabindex="-1"></a>      hhPopData9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#1e395f'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> [<span class="st">'yo momma'</span>]})<span class="op">,</span></span>
<span id="cb18-911"><a href="#cb18-911" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb18-912"><a href="#cb18-912" aria-hidden="true" tabindex="-1"></a>      hhPopData9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb18-913"><a href="#cb18-913" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-914"><a href="#cb18-914" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb18-915"><a href="#cb18-915" aria-hidden="true" tabindex="-1"></a>      hhData8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#75884b'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span><span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb18-916"><a href="#cb18-916" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb18-917"><a href="#cb18-917" aria-hidden="true" tabindex="-1"></a>      hhData9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#1e5a46'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb18-918"><a href="#cb18-918" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb18-919"><a href="#cb18-919" aria-hidden="true" tabindex="-1"></a>      hhData9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb18-920"><a href="#cb18-920" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-921"><a href="#cb18-921" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>({<span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.2</span>})<span class="op">,</span></span>
<span id="cb18-922"><a href="#cb18-922" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb18-923"><a href="#cb18-923" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">text</span>([<span class="vs">`</span><span class="sc">\n</span><span class="vs">   ——   Current Projection </span><span class="sc">\n\n</span><span class="vs">   —  — Previous Projection`</span>]<span class="op">,</span> {<span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"top-left"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">14</span>})</span>
<span id="cb18-924"><a href="#cb18-924" aria-hidden="true" tabindex="-1"></a>  ]]</span>
<span id="cb18-925"><a href="#cb18-925" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-county-control-trends-by-county-by-category-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-17-1" data-nodetype="expression">

</div>
<figcaption class="figure-caption">(a) Residential Control Total</figcaption>
</figure>
</div>
</div>
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb19" data-startfrom="927" data-source-offset="-1161"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 926;"><span id="cb19-927"><a href="#cb19-927" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb19-928"><a href="#cb19-928" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb19-929"><a href="#cb19-929" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb19-930"><a href="#cb19-930" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">'Year'</span><span class="op">,</span> <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> d}<span class="op">,</span></span>
<span id="cb19-931"><a href="#cb19-931" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">'Control Total'</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> maxY2]}<span class="op">,</span></span>
<span id="cb19-932"><a href="#cb19-932" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginRight</span><span class="op">:</span><span class="dv">80</span><span class="op">,</span></span>
<span id="cb19-933"><a href="#cb19-933" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb19-934"><a href="#cb19-934" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb19-935"><a href="#cb19-935" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">15</span></span>
<span id="cb19-936"><a href="#cb19-936" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb19-937"><a href="#cb19-937" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb19-938"><a href="#cb19-938" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb19-939"><a href="#cb19-939" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb19-940"><a href="#cb19-940" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-941"><a href="#cb19-941" aria-hidden="true" tabindex="-1"></a>      typicalData8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#FF6666'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb19-942"><a href="#cb19-942" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-943"><a href="#cb19-943" aria-hidden="true" tabindex="-1"></a>      typicalData9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#FF0000'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb19-944"><a href="#cb19-944" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb19-945"><a href="#cb19-945" aria-hidden="true" tabindex="-1"></a>      typicalData9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb19-946"><a href="#cb19-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-947"><a href="#cb19-947" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-948"><a href="#cb19-948" aria-hidden="true" tabindex="-1"></a>      retailData8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#75884b'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span><span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb19-949"><a href="#cb19-949" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-950"><a href="#cb19-950" aria-hidden="true" tabindex="-1"></a>      retailData9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#1e5a46'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb19-951"><a href="#cb19-951" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb19-952"><a href="#cb19-952" aria-hidden="true" tabindex="-1"></a>      retailData9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb19-953"><a href="#cb19-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-954"><a href="#cb19-954" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-955"><a href="#cb19-955" aria-hidden="true" tabindex="-1"></a>      industrialData8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#A0A0A0'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb19-956"><a href="#cb19-956" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-957"><a href="#cb19-957" aria-hidden="true" tabindex="-1"></a>      industrialData9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#606060'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb19-958"><a href="#cb19-958" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb19-959"><a href="#cb19-959" aria-hidden="true" tabindex="-1"></a>      industrialData9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb19-960"><a href="#cb19-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-961"><a href="#cb19-961" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-962"><a href="#cb19-962" aria-hidden="true" tabindex="-1"></a>      otherData8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#5b859e'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span><span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb19-963"><a href="#cb19-963" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb19-964"><a href="#cb19-964" aria-hidden="true" tabindex="-1"></a>      otherData9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#1e395f'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb19-965"><a href="#cb19-965" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb19-966"><a href="#cb19-966" aria-hidden="true" tabindex="-1"></a>      otherData9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb19-967"><a href="#cb19-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-968"><a href="#cb19-968" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>({<span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.2</span>})<span class="op">,</span></span>
<span id="cb19-969"><a href="#cb19-969" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb19-970"><a href="#cb19-970" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">text</span>([<span class="vs">`</span><span class="sc">\n</span><span class="vs">   ——   Current Projection </span><span class="sc">\n\n</span><span class="vs">   —  — Previous Projection`</span>]<span class="op">,</span> {<span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"top-left"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">14</span>})</span>
<span id="cb19-971"><a href="#cb19-971" aria-hidden="true" tabindex="-1"></a>  ]]</span>
<span id="cb19-972"><a href="#cb19-972" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-county-control-trends-by-county-by-category-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-17-2" data-nodetype="expression">

</div>
<figcaption class="figure-caption">(b) Employment Control Total</figcaption>
</figure>
</div>
</div>
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="974" data-source-offset="-3035"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 973;"><span id="cb20-974"><a href="#cb20-974" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb20-975"><a href="#cb20-975" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb20-976"><a href="#cb20-976" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aspectRatio</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb20-977"><a href="#cb20-977" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">'Year'</span><span class="op">,</span> <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> d}<span class="op">,</span></span>
<span id="cb20-978"><a href="#cb20-978" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">'Control Total'</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> maxY3]}<span class="op">,</span></span>
<span id="cb20-979"><a href="#cb20-979" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginRight</span><span class="op">:</span><span class="dv">85</span><span class="op">,</span></span>
<span id="cb20-980"><a href="#cb20-980" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb20-981"><a href="#cb20-981" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb20-982"><a href="#cb20-982" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">15</span></span>
<span id="cb20-983"><a href="#cb20-983" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb20-984"><a href="#cb20-984" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb20-985"><a href="#cb20-985" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb20-986"><a href="#cb20-986" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb20-987"><a href="#cb20-987" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb20-988"><a href="#cb20-988" aria-hidden="true" tabindex="-1"></a>      hhsize8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#5b859e'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb20-989"><a href="#cb20-989" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb20-990"><a href="#cb20-990" aria-hidden="true" tabindex="-1"></a>      hhsize9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#1e395f'</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb20-991"><a href="#cb20-991" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb20-992"><a href="#cb20-992" aria-hidden="true" tabindex="-1"></a>      hhsize9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb20-993"><a href="#cb20-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-994"><a href="#cb20-994" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb20-995"><a href="#cb20-995" aria-hidden="true" tabindex="-1"></a>      jobhh8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#75884b'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span><span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb20-996"><a href="#cb20-996" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb20-997"><a href="#cb20-997" aria-hidden="true" tabindex="-1"></a>      jobhh9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#1e5a46'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb20-998"><a href="#cb20-998" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb20-999"><a href="#cb20-999" aria-hidden="true" tabindex="-1"></a>      jobhh9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb20-1000"><a href="#cb20-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-1001"><a href="#cb20-1001" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb20-1002"><a href="#cb20-1002" aria-hidden="true" tabindex="-1"></a>      wrkpop8<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#FFB266'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span><span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">'5,5'</span>})<span class="op">,</span></span>
<span id="cb20-1003"><a href="#cb20-1003" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb20-1004"><a href="#cb20-1004" aria-hidden="true" tabindex="-1"></a>      wrkpop9<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'YEAR'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'ControlTotal'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'#FF8000'</span><span class="op">,</span><span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb20-1005"><a href="#cb20-1005" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb20-1006"><a href="#cb20-1006" aria-hidden="true" tabindex="-1"></a>      wrkpop9<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectLast</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"YEAR"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"ControlTotal"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Category"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">3</span>}))<span class="op">,</span></span>
<span id="cb20-1007"><a href="#cb20-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-1008"><a href="#cb20-1008" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>({<span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.2</span>})<span class="op">,</span></span>
<span id="cb20-1009"><a href="#cb20-1009" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb20-1010"><a href="#cb20-1010" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">text</span>([<span class="vs">`</span><span class="sc">\n</span><span class="vs">   ——   Current Projection </span><span class="sc">\n\n</span><span class="vs">   —  — Previous Projection`</span>]<span class="op">,</span> {<span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"top-left"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">14</span>})</span>
<span id="cb20-1011"><a href="#cb20-1011" aria-hidden="true" tabindex="-1"></a>  ]]</span>
<span id="cb20-1012"><a href="#cb20-1012" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-county-control-trends-by-county-by-category-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-17-3" data-nodetype="expression">

</div>
<figcaption class="figure-caption">(c) Control Total Ratios</figcaption>
</figure>
</div>
</div>
<figcaption class="figure-caption">Figure&nbsp;7: Control Total Trends for Selected County for Selected Category</figcaption>
</figure>
</div>
</section>
<section id="school-enrollment" class="level3">
<h3 class="anchored" data-anchor-id="school-enrollment">School Enrollment</h3>
<p>The Kindergarten through 12th grade (K-12) enrollment data was updated using the 2019 statewide school enrollment database. This was done at the state-wide level and then applied to the Wasatch Front. Additionally, a point shapefile of the state-wide dataset is included with the TDM, as shown in <a href="#fig-school-locations">Figure&nbsp;8</a>.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="1020" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1019;"><span id="cb21-1020"><a href="#cb21-1020" aria-hidden="true" tabindex="-1"></a>mapK12Enroll <span class="op">=</span> {</span>
<span id="cb21-1021"><a href="#cb21-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1022"><a href="#cb21-1022" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> container <span class="op">=</span> DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">'div'</span><span class="op">,</span> { <span class="dt">style</span><span class="op">:</span> <span class="vs">`width:</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">px;height:</span><span class="sc">${</span>width<span class="op">/</span><span class="fl">1.6</span><span class="sc">}</span><span class="vs">px`</span> })<span class="op">;</span></span>
<span id="cb21-1023"><a href="#cb21-1023" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> container<span class="op">;</span></span>
<span id="cb21-1024"><a href="#cb21-1024" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-1025"><a href="#cb21-1025" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(container)<span class="op">.</span><span class="fu">setView</span>([<span class="fl">40.7608</span><span class="op">,</span> <span class="op">-</span><span class="fl">111.8910</span>]<span class="op">,</span> <span class="fl">8.25</span>)<span class="op">;</span></span>
<span id="cb21-1026"><a href="#cb21-1026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1027"><a href="#cb21-1027" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> greyLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png'</span><span class="op">,</span> {</span>
<span id="cb21-1028"><a href="#cb21-1028" aria-hidden="true" tabindex="-1"></a>    <span class="dt">attribution</span><span class="op">:</span> <span class="st">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'</span></span>
<span id="cb21-1029"><a href="#cb21-1029" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb21-1030"><a href="#cb21-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1031"><a href="#cb21-1031" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cHigh <span class="op">=</span> <span class="st">"#FF0000"</span></span>
<span id="cb21-1032"><a href="#cb21-1032" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cMidl <span class="op">=</span> <span class="st">"#00FF00"</span></span>
<span id="cb21-1033"><a href="#cb21-1033" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cElem <span class="op">=</span> <span class="st">"#0000FF"</span></span>
<span id="cb21-1034"><a href="#cb21-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1035"><a href="#cb21-1035" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geojsonMarkerOptions_High <span class="op">=</span> {</span>
<span id="cb21-1036"><a href="#cb21-1036" aria-hidden="true" tabindex="-1"></a>      <span class="dt">radius</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb21-1037"><a href="#cb21-1037" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillColor</span><span class="op">:</span> cHigh<span class="op">,</span></span>
<span id="cb21-1038"><a href="#cb21-1038" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cHigh<span class="op">,</span></span>
<span id="cb21-1039"><a href="#cb21-1039" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb21-1040"><a href="#cb21-1040" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb21-1041"><a href="#cb21-1041" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb21-1042"><a href="#cb21-1042" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb21-1043"><a href="#cb21-1043" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1044"><a href="#cb21-1044" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geojsonMarkerOptions_Midl <span class="op">=</span> {</span>
<span id="cb21-1045"><a href="#cb21-1045" aria-hidden="true" tabindex="-1"></a>      <span class="dt">radius</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb21-1046"><a href="#cb21-1046" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillColor</span><span class="op">:</span> cMidl<span class="op">,</span></span>
<span id="cb21-1047"><a href="#cb21-1047" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cMidl<span class="op">,</span></span>
<span id="cb21-1048"><a href="#cb21-1048" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb21-1049"><a href="#cb21-1049" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb21-1050"><a href="#cb21-1050" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb21-1051"><a href="#cb21-1051" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb21-1052"><a href="#cb21-1052" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geojsonMarkerOptions_Elem <span class="op">=</span> {</span>
<span id="cb21-1053"><a href="#cb21-1053" aria-hidden="true" tabindex="-1"></a>      <span class="dt">radius</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb21-1054"><a href="#cb21-1054" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillColor</span><span class="op">:</span> cElem<span class="op">,</span></span>
<span id="cb21-1055"><a href="#cb21-1055" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cElem<span class="op">,</span></span>
<span id="cb21-1056"><a href="#cb21-1056" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb21-1057"><a href="#cb21-1057" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb21-1058"><a href="#cb21-1058" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb21-1059"><a href="#cb21-1059" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb21-1060"><a href="#cb21-1060" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb21-1061"><a href="#cb21-1061" aria-hidden="true" tabindex="-1"></a>  <span class="co">// function to use different icons based on number of stations</span></span>
<span id="cb21-1062"><a href="#cb21-1062" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">markerByEnrollment</span>(feature) {</span>
<span id="cb21-1063"><a href="#cb21-1063" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_High</span> <span class="op">&gt;=</span> <span class="dv">100</span>) {</span>
<span id="cb21-1064"><a href="#cb21-1064" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geojsonMarkerOptions_High</span>
<span id="cb21-1065"><a href="#cb21-1065" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_Midl</span> <span class="op">&gt;=</span> <span class="dv">100</span>){</span>
<span id="cb21-1066"><a href="#cb21-1066" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geojsonMarkerOptions_Midl<span class="op">;</span></span>
<span id="cb21-1067"><a href="#cb21-1067" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span>{</span>
<span id="cb21-1068"><a href="#cb21-1068" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geojsonMarkerOptions_Elem<span class="op">;</span></span>
<span id="cb21-1069"><a href="#cb21-1069" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-1070"><a href="#cb21-1070" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb21-1071"><a href="#cb21-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1072"><a href="#cb21-1072" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getColor</span>(c) {</span>
<span id="cb21-1073"><a href="#cb21-1073" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (c<span class="op">==</span><span class="st">'High School'</span>) {</span>
<span id="cb21-1074"><a href="#cb21-1074" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cHigh<span class="op">;</span></span>
<span id="cb21-1075"><a href="#cb21-1075" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Middle School'</span>) {</span>
<span id="cb21-1076"><a href="#cb21-1076" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cMidl<span class="op">;</span></span>
<span id="cb21-1077"><a href="#cb21-1077" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Elementary School'</span>) {</span>
<span id="cb21-1078"><a href="#cb21-1078" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cElem<span class="op">;</span></span>
<span id="cb21-1079"><a href="#cb21-1079" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-1080"><a href="#cb21-1080" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb21-1081"><a href="#cb21-1081" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb21-1082"><a href="#cb21-1082" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb21-1083"><a href="#cb21-1083" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> layerSchools <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJSON</span>(geojsonK12Enroll<span class="op">,</span>  {</span>
<span id="cb21-1084"><a href="#cb21-1084" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> latlng) {</span>
<span id="cb21-1085"><a href="#cb21-1085" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mypopup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">.</span><span class="fu">setContent</span>(<span class="st">"&lt;b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">SchoolName</span> <span class="op">+</span> <span class="st">" Enrollment&lt;/b&gt;"</span> <span class="op">+</span></span>
<span id="cb21-1086"><a href="#cb21-1086" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"&lt;br&gt;&lt;b&gt;High School: &lt;/b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_High</span> <span class="op">+</span></span>
<span id="cb21-1087"><a href="#cb21-1087" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"&lt;br&gt;&lt;b&gt;Middle School: &lt;/b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_Midl</span> <span class="op">+</span></span>
<span id="cb21-1088"><a href="#cb21-1088" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"&lt;br&gt;&lt;b&gt;Elementary School: &lt;/b&gt;"</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Enrol_Elem</span>)<span class="op">;</span></span>
<span id="cb21-1089"><a href="#cb21-1089" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mymarker <span class="op">=</span> L<span class="op">.</span><span class="fu">circleMarker</span>(latlng<span class="op">,</span> <span class="fu">markerByEnrollment</span>(feature))<span class="op">;</span></span>
<span id="cb21-1090"><a href="#cb21-1090" aria-hidden="true" tabindex="-1"></a>      mymarker<span class="op">.</span><span class="fu">bindPopup</span>(mypopup)<span class="op">;</span></span>
<span id="cb21-1091"><a href="#cb21-1091" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> mymarker<span class="op">;</span></span>
<span id="cb21-1092"><a href="#cb21-1092" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-1093"><a href="#cb21-1093" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb21-1094"><a href="#cb21-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1095"><a href="#cb21-1095" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">'bottomleft'</span>})<span class="op">;</span></span>
<span id="cb21-1096"><a href="#cb21-1096" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span> (map) {</span>
<span id="cb21-1097"><a href="#cb21-1097" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">'div'</span><span class="op">,</span> <span class="st">'info legend'</span>)<span class="op">;</span></span>
<span id="cb21-1098"><a href="#cb21-1098" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> labelsBill <span class="op">=</span> []<span class="op">;</span> <span class="co">// legend title</span></span>
<span id="cb21-1099"><a href="#cb21-1099" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> lcategories <span class="op">=</span> [<span class="st">'High School'</span><span class="op">,</span><span class="st">'Middle School'</span><span class="op">,</span><span class="st">'Elementary School'</span>]<span class="op">;</span></span>
<span id="cb21-1100"><a href="#cb21-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1101"><a href="#cb21-1101" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lcategories<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb21-1102"><a href="#cb21-1102" aria-hidden="true" tabindex="-1"></a>        div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">+=</span> </span>
<span id="cb21-1103"><a href="#cb21-1103" aria-hidden="true" tabindex="-1"></a>          labelsBill<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb21-1104"><a href="#cb21-1104" aria-hidden="true" tabindex="-1"></a>            <span class="st">'&lt;i class="bi bi-circle-fill" style="color:'</span> <span class="op">+</span> <span class="fu">getColor</span>(lcategories[i]) <span class="op">+</span> <span class="st">'"&gt;&lt;/i&gt; '</span> <span class="op">+</span></span>
<span id="cb21-1105"><a href="#cb21-1105" aria-hidden="true" tabindex="-1"></a>          (lcategories[i] <span class="op">?</span> lcategories[i] <span class="op">:</span> <span class="st">'+'</span>))<span class="op">;</span></span>
<span id="cb21-1106"><a href="#cb21-1106" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb21-1107"><a href="#cb21-1107" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> labelsBill<span class="op">.</span><span class="fu">join</span>(<span class="st">'&lt;br&gt;'</span>)<span class="op">;</span></span>
<span id="cb21-1108"><a href="#cb21-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1109"><a href="#cb21-1109" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Add CSS style for the background color</span></span>
<span id="cb21-1110"><a href="#cb21-1110" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">backgroundColor</span> <span class="op">=</span> <span class="st">'lightgray'</span><span class="op">;</span></span>
<span id="cb21-1111"><a href="#cb21-1111" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">padding</span> <span class="op">=</span> <span class="st">'10px'</span><span class="op">;</span></span>
<span id="cb21-1112"><a href="#cb21-1112" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb21-1113"><a href="#cb21-1113" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb21-1114"><a href="#cb21-1114" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb21-1115"><a href="#cb21-1115" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb21-1116"><a href="#cb21-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1117"><a href="#cb21-1117" aria-hidden="true" tabindex="-1"></a>  <span class="co">//let lyrK12Enroll = L.geoJson(geojsonK12Enroll, { size: 5, color: '#FFFFFF'}).addTo(map);</span></span>
<span id="cb21-1118"><a href="#cb21-1118" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-1119"><a href="#cb21-1119" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-school-locations" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-18" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;8: K-12 School Locations</figcaption>
</figure>
</div>
</div>
</section>
<section id="median-income" class="level3">
<h3 class="anchored" data-anchor-id="median-income">Median Income</h3>
<p>Median income &amp; value-of-time (VOT) inputs for the model were updated with 2019 data and used to update the TAZ Median Income in the TAZ file.</p>
</section>
</section>
<section id="highway-network" class="level2">
<h2 class="anchored" data-anchor-id="highway-network">Highway Network</h2>
<p>The highway network was expanded to incorporate the new model areas. See <a href="#geographies">TAZ Geographies</a>. The 2023 RTP fields have been updated to reflect the adopted 2023 RTP.</p>
<section id="highway-node-numbering-schema" class="level3">
<h3 class="anchored" data-anchor-id="highway-node-numbering-schema">Highway Node Numbering Schema</h3>
<p>Updates to the highway node numbering schema are shown in <a href="#tbl-master-network-node-numbering-schema">Table&nbsp;6</a>. An additional reference file called <code>_Node Definition - v832 &amp; v9.xlsx</code> is found in the <code>3_Highway</code> folder.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="13">
<div id="tbl-master-network-node-numbering-schema" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;6: Master Network Node Numbering Schema</caption>
<thead>
<tr class="header">
<th style="text-align: left;">MPO</th>
<th style="text-align: left;">Transit Nodes</th>
<th style="text-align: left;">Highway Nodes</th>
<th style="text-align: left;">v9 Expansion Areas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">WFRC</td>
<td style="text-align: left;">10,000 - 19,999</td>
<td style="text-align: left;">20,000 - 49,999</td>
<td style="text-align: left;">90,000 - 94,999</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAG</td>
<td style="text-align: left;">50,000 - 59,999</td>
<td style="text-align: left;">60,000 - 89,999</td>
<td style="text-align: left;">95,000 - 99,999</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>The highway network updates include the following:</p>
<ul>
<li>Updated Commuter-Rail Transit (CRT) Fare Zone
<ul>
<li>Vineyard &amp; Orem stations were modified to have the same fare zone (similar to North Temple &amp; Central)</li>
<li>Updated and fixed fare zone definitions in WFRC area</li>
</ul></li>
<li>Fixed small network error in Box Elder where a local road was drawn to the centroid of v8.3.2 TAZ 53</li>
<li>A few edits to WFRC draft RTP project list</li>
<li>Updated segment ids
<ul>
<li>Made consistent with the latest segment shapefile</li>
<li>Updated segments to account for recent network changes &amp; add segment definitions to account for rail transit</li>
</ul></li>
<li>Added <code>SEGEX_RTP</code> &amp; <code>SEGEX_NEED</code> as text fields (to be populated later when script/processing updated). These are segment ID exception fields where the future SEGIDs are different than existing SEGIDs.</li>
<li>Phase change for Managed Motorways in WFRC area</li>
<li>A couple of phasing updates from the WFRC RTP project list</li>
<li>Cleaned up <code>GIS23_32</code> and <code>GIS23_42</code> fields</li>
<li>Differentiated what projects will be built by 2028 from what will be built by 2023</li>
<li>Rail <code>SEGID</code> additions were made to allow for easier transit result visualization.</li>
</ul>
<p>Additionally, a <code>MergedMasterNet - 2022-09-19a</code> folder was added to serve as a workspace for editing and updating Merged Master Network and for exporting to v8.3.2 &amp; v9 master networks.</p>
</section>
</section>
<section id="transit" class="level2">
<h2 class="anchored" data-anchor-id="transit">Transit</h2>
<p>The transit line files and CUBE Public Transport (PT) files were updated to correspond with the 2023 RTP:</p>
<ul>
<li>2019 was thoroughly vetted to represent Aug 2019 change day</li>
<li>2023: updated route alignment, headways &amp; stops based on August 2022 change day (WFRC &amp; MAG)</li>
<li>2028: updated route alignment, headways &amp; stops based on UTA 5-Year Service Plan (WFRC &amp; MAG)</li>
<li>RTP 2032, 2042 &amp; 2050: rolled 2028 changes forward into plan phased years &amp; updated based on 2023 draft plan</li>
<li>Needs 2032, 2042 &amp; 2050: rolled 2028 changes forward into plan phased years &amp; updated based on 2023 draft plan</li>
</ul>
<p>Route S902 was updated so route no longer go to the I-80 Parleys Canyon external node.</p>
<section id="public-transport-pt-parameters" class="level3">
<h3 class="anchored" data-anchor-id="public-transport-pt-parameters">Public Transport (PT) Parameters</h3>
<p>The fare files were updated with 2019 fare data. The fares were updated to match the actual advertised fares, whereas the v8.3.2 model contained a 46% adjustment fares. This reduction accounts for monthly pass, education, fare-pay, senior, employer paid, and other discounts. This adjustment is now explicitly defined, as was discussed in the <em>General Parameters</em> section.</p>
</section>
<section id="general-hand-coded-support-links" class="level3">
<h3 class="anchored" data-anchor-id="general-hand-coded-support-links">General Hand-Coded Support Links</h3>
<p><code>General_hand_coded_walk_links.NTL</code> files were reviewed and updated.</p>
</section>
<section id="transit-route-tester" class="level3">
<h3 class="anchored" data-anchor-id="transit-route-tester">Transit Route Tester</h3>
<p>A route tester script was added in the <code>_chk Transit Compile on Net</code> folder. The script checks to see if transit line files for the respective scenario compile on the scenario highway network. This can be used for reviewing transit line edits outside of the model stream.</p>
</section>
</section>
<section id="externals" class="level2">
<h2 class="anchored" data-anchor-id="externals">Externals</h2>
<p>External locations and forecasts were updated. The locations of the former and updated location of externals is shown in <a href="#fig-externals">Figure&nbsp;9</a>. Forecasts through 2060 were generated for the updated external locations using historical data through 2019.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="1239" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1238;"><span id="cb22-1239"><a href="#cb22-1239" aria-hidden="true" tabindex="-1"></a>geojsonExternalOld   <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/externalold.geojson"</span>  )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb22-1240"><a href="#cb22-1240" aria-hidden="true" tabindex="-1"></a>geojsonExternalNew   <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/externalnew.geojson"</span>  )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb22-1241"><a href="#cb22-1241" aria-hidden="true" tabindex="-1"></a>geojsonMasterNetLink <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/masternetlink.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb23" data-startfrom="1247" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1246;"><span id="cb23-1247"><a href="#cb23-1247" aria-hidden="true" tabindex="-1"></a>mapExternals <span class="op">=</span> {</span>
<span id="cb23-1248"><a href="#cb23-1248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1249"><a href="#cb23-1249" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> container <span class="op">=</span> DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">'div'</span><span class="op">,</span> { <span class="dt">style</span><span class="op">:</span> <span class="vs">`width:</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">px;height:</span><span class="sc">${</span>width<span class="op">/</span><span class="fl">1.6</span><span class="sc">}</span><span class="vs">px`</span> })<span class="op">;</span></span>
<span id="cb23-1250"><a href="#cb23-1250" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> container<span class="op">;</span></span>
<span id="cb23-1251"><a href="#cb23-1251" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-1252"><a href="#cb23-1252" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(container)<span class="op">.</span><span class="fu">setView</span>([<span class="fl">40.7608</span><span class="op">,</span> <span class="op">-</span><span class="fl">111.8910</span>]<span class="op">,</span> <span class="fl">8.25</span>)<span class="op">;</span></span>
<span id="cb23-1253"><a href="#cb23-1253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1254"><a href="#cb23-1254" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> osmLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'</span><span class="op">,</span> {</span>
<span id="cb23-1255"><a href="#cb23-1255" aria-hidden="true" tabindex="-1"></a>      <span class="dt">attribution</span><span class="op">:</span> <span class="st">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'</span></span>
<span id="cb23-1256"><a href="#cb23-1256" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span> </span>
<span id="cb23-1257"><a href="#cb23-1257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1258"><a href="#cb23-1258" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cNew <span class="op">=</span> <span class="st">"#FF0000"</span><span class="op">;</span></span>
<span id="cb23-1259"><a href="#cb23-1259" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cOld <span class="op">=</span> <span class="st">"#00FF00"</span><span class="op">;</span></span>
<span id="cb23-1260"><a href="#cb23-1260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1261"><a href="#cb23-1261" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> squareIcon_New <span class="op">=</span> L<span class="op">.</span><span class="fu">icon</span>({</span>
<span id="cb23-1262"><a href="#cb23-1262" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">'https://wfrc.org/wftdm-docs/_pictures/square_green.png'</span><span class="op">,</span>  <span class="co">// Replace with the path to your square-like icon image</span></span>
<span id="cb23-1263"><a href="#cb23-1263" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconSize</span><span class="op">:</span> [<span class="dv">15</span><span class="op">,</span> <span class="dv">15</span>]<span class="op">,</span>          <span class="co">// Adjust the size of the square-like icon</span></span>
<span id="cb23-1264"><a href="#cb23-1264" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconAnchor</span><span class="op">:</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span>          <span class="co">// Adjust the anchor point if needed</span></span>
<span id="cb23-1265"><a href="#cb23-1265" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb23-1266"><a href="#cb23-1266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1267"><a href="#cb23-1267" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> squareIcon_Old <span class="op">=</span> L<span class="op">.</span><span class="fu">icon</span>({</span>
<span id="cb23-1268"><a href="#cb23-1268" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">'https://wfrc.org/wftdm-docs/_pictures/square_red.png'</span><span class="op">,</span>       <span class="co">// Replace with the path to your square-like icon image</span></span>
<span id="cb23-1269"><a href="#cb23-1269" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconSize</span><span class="op">:</span> [<span class="dv">15</span><span class="op">,</span> <span class="dv">15</span>]<span class="op">,</span>          <span class="co">// Adjust the size of the square-like icon</span></span>
<span id="cb23-1270"><a href="#cb23-1270" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconAnchor</span><span class="op">:</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span>          <span class="co">// Adjust the anchor point if needed</span></span>
<span id="cb23-1271"><a href="#cb23-1271" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb23-1272"><a href="#cb23-1272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1273"><a href="#cb23-1273" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cCommon <span class="op">=</span> <span class="st">"#FF0000"</span></span>
<span id="cb23-1274"><a href="#cb23-1274" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cAdded  <span class="op">=</span> <span class="st">"#00FF00"</span></span>
<span id="cb23-1275"><a href="#cb23-1275" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cOther  <span class="op">=</span> <span class="st">"#888888"</span></span>
<span id="cb23-1276"><a href="#cb23-1276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1277"><a href="#cb23-1277" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geolineCommon <span class="op">=</span> {</span>
<span id="cb23-1278"><a href="#cb23-1278" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cCommon<span class="op">,</span></span>
<span id="cb23-1279"><a href="#cb23-1279" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb23-1280"><a href="#cb23-1280" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb23-1281"><a href="#cb23-1281" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb23-1282"><a href="#cb23-1282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1283"><a href="#cb23-1283" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geoLineAdded <span class="op">=</span> {</span>
<span id="cb23-1284"><a href="#cb23-1284" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cAdded<span class="op">,</span></span>
<span id="cb23-1285"><a href="#cb23-1285" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb23-1286"><a href="#cb23-1286" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb23-1287"><a href="#cb23-1287" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb23-1288"><a href="#cb23-1288" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geoLineOther <span class="op">=</span> {</span>
<span id="cb23-1289"><a href="#cb23-1289" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cOther<span class="op">,</span></span>
<span id="cb23-1290"><a href="#cb23-1290" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb23-1291"><a href="#cb23-1291" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb23-1292"><a href="#cb23-1292" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb23-1293"><a href="#cb23-1293" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb23-1294"><a href="#cb23-1294" aria-hidden="true" tabindex="-1"></a>  <span class="co">// function to use different icons based on number of stations</span></span>
<span id="cb23-1295"><a href="#cb23-1295" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">markerByNewNet</span>(feature) {</span>
<span id="cb23-1296"><a href="#cb23-1296" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">FLG_NEWNET</span><span class="op">==</span><span class="dv">3</span>) {</span>
<span id="cb23-1297"><a href="#cb23-1297" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geolineCommon<span class="op">;</span></span>
<span id="cb23-1298"><a href="#cb23-1298" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">FLG_NEWNET</span><span class="op">==</span><span class="dv">23</span>){</span>
<span id="cb23-1299"><a href="#cb23-1299" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geoLineAdded<span class="op">;</span></span>
<span id="cb23-1300"><a href="#cb23-1300" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span>{</span>
<span id="cb23-1301"><a href="#cb23-1301" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geoLineOther<span class="op">;</span></span>
<span id="cb23-1302"><a href="#cb23-1302" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-1303"><a href="#cb23-1303" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb23-1304"><a href="#cb23-1304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1305"><a href="#cb23-1305" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getColor</span>(c) {</span>
<span id="cb23-1306"><a href="#cb23-1306" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>        (c<span class="op">==</span><span class="st">'Common'</span>) {</span>
<span id="cb23-1307"><a href="#cb23-1307" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cCommon<span class="op">;</span></span>
<span id="cb23-1308"><a href="#cb23-1308" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Added'</span>) {</span>
<span id="cb23-1309"><a href="#cb23-1309" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cAdded<span class="op">;</span></span>
<span id="cb23-1310"><a href="#cb23-1310" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Other'</span>) {</span>
<span id="cb23-1311"><a href="#cb23-1311" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cOther<span class="op">;</span></span>
<span id="cb23-1312"><a href="#cb23-1312" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-1313"><a href="#cb23-1313" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb23-1314"><a href="#cb23-1314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1315"><a href="#cb23-1315" aria-hidden="true" tabindex="-1"></a>  <span class="co">//let lyrNetwork = L.geoJson(geojsonMasterNetLink, { weight: 0.75, color: "#888888", fillOpacity: 0}).addTo(map);</span></span>
<span id="cb23-1316"><a href="#cb23-1316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1317"><a href="#cb23-1317" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb23-1318"><a href="#cb23-1318" aria-hidden="true" tabindex="-1"></a><span class="co">//  var lyrNetwork = L.geoJson(geojsonMasterNetLink,  { function (markerByNewNet(feature))}).addTo(map);</span></span>
<span id="cb23-1319"><a href="#cb23-1319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1320"><a href="#cb23-1320" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb23-1321"><a href="#cb23-1321" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> externalNewLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJSON</span>(geojsonExternalNew<span class="op">,</span> {</span>
<span id="cb23-1322"><a href="#cb23-1322" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> latlng) {</span>
<span id="cb23-1323"><a href="#cb23-1323" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mypopup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">.</span><span class="fu">setContent</span>(<span class="st">"&lt;b&gt;Node: "</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">N</span> <span class="op">+</span> <span class="st">"&lt;/b&gt;"</span>)<span class="op">;</span></span>
<span id="cb23-1324"><a href="#cb23-1324" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mymarker <span class="op">=</span> L<span class="op">.</span><span class="fu">marker</span>(latlng<span class="op">,</span> { <span class="dt">icon</span><span class="op">:</span> squareIcon_New })<span class="op">;</span></span>
<span id="cb23-1325"><a href="#cb23-1325" aria-hidden="true" tabindex="-1"></a>      mymarker<span class="op">.</span><span class="fu">bindPopup</span>(mypopup)<span class="op">;</span></span>
<span id="cb23-1326"><a href="#cb23-1326" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> mymarker<span class="op">;</span></span>
<span id="cb23-1327"><a href="#cb23-1327" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-1328"><a href="#cb23-1328" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb23-1329"><a href="#cb23-1329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1330"><a href="#cb23-1330" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb23-1331"><a href="#cb23-1331" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> externalOldLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJSON</span>(geojsonExternalOld<span class="op">,</span> {</span>
<span id="cb23-1332"><a href="#cb23-1332" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> latlng) {</span>
<span id="cb23-1333"><a href="#cb23-1333" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mypopup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">.</span><span class="fu">setContent</span>(<span class="st">"&lt;b&gt;Node: "</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">N</span> <span class="op">+</span> <span class="st">"&lt;/b&gt;"</span>)<span class="op">;</span></span>
<span id="cb23-1334"><a href="#cb23-1334" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mymarker <span class="op">=</span> L<span class="op">.</span><span class="fu">marker</span>(latlng<span class="op">,</span> { <span class="dt">icon</span><span class="op">:</span> squareIcon_Old })<span class="op">;</span></span>
<span id="cb23-1335"><a href="#cb23-1335" aria-hidden="true" tabindex="-1"></a>      mymarker<span class="op">.</span><span class="fu">bindPopup</span>(mypopup)<span class="op">;</span></span>
<span id="cb23-1336"><a href="#cb23-1336" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> mymarker<span class="op">;</span></span>
<span id="cb23-1337"><a href="#cb23-1337" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-1338"><a href="#cb23-1338" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb23-1339"><a href="#cb23-1339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1340"><a href="#cb23-1340" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">'bottomleft'</span>})<span class="op">;</span></span>
<span id="cb23-1341"><a href="#cb23-1341" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span> (map) {</span>
<span id="cb23-1342"><a href="#cb23-1342" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">'div'</span><span class="op">,</span> <span class="st">'info legend'</span>)<span class="op">;</span></span>
<span id="cb23-1343"><a href="#cb23-1343" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> labelsBill <span class="op">=</span> []<span class="op">;</span> <span class="co">// legend title</span></span>
<span id="cb23-1344"><a href="#cb23-1344" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> lcategories <span class="op">=</span> [<span class="st">'v8.3.2'</span><span class="op">,</span><span class="st">'v9.0.0'</span>]<span class="op">;</span></span>
<span id="cb23-1345"><a href="#cb23-1345" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> lcolors     <span class="op">=</span> [cOld    <span class="op">,</span>cNew    ]<span class="op">;</span></span>
<span id="cb23-1346"><a href="#cb23-1346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1347"><a href="#cb23-1347" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lcategories<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb23-1348"><a href="#cb23-1348" aria-hidden="true" tabindex="-1"></a>        div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">+=</span> </span>
<span id="cb23-1349"><a href="#cb23-1349" aria-hidden="true" tabindex="-1"></a>          labelsBill<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb23-1350"><a href="#cb23-1350" aria-hidden="true" tabindex="-1"></a>            <span class="st">'&lt;i style="background:'</span> <span class="op">+</span> lcolors[i] <span class="op">+</span> <span class="st">'"&gt;&amp;nbsp;&lt;/i&gt; '</span> <span class="op">+</span></span>
<span id="cb23-1351"><a href="#cb23-1351" aria-hidden="true" tabindex="-1"></a>          (lcategories[i] <span class="op">?</span> lcategories[i] <span class="op">:</span> <span class="st">'+'</span>))<span class="op">;</span></span>
<span id="cb23-1352"><a href="#cb23-1352" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb23-1353"><a href="#cb23-1353" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> labelsBill<span class="op">.</span><span class="fu">join</span>(<span class="st">'&lt;br&gt;'</span>)<span class="op">;</span></span>
<span id="cb23-1354"><a href="#cb23-1354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1355"><a href="#cb23-1355" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Add CSS style for the background color</span></span>
<span id="cb23-1356"><a href="#cb23-1356" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">backgroundColor</span> <span class="op">=</span> <span class="st">'lightgray'</span><span class="op">;</span></span>
<span id="cb23-1357"><a href="#cb23-1357" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">padding</span> <span class="op">=</span> <span class="st">'10px'</span><span class="op">;</span></span>
<span id="cb23-1358"><a href="#cb23-1358" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb23-1359"><a href="#cb23-1359" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb23-1360"><a href="#cb23-1360" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb23-1361"><a href="#cb23-1361" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span>  </span>
<span id="cb23-1362"><a href="#cb23-1362" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-externals" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;9: Externals</figcaption>
</figure>
</div>
</div>
<p>The updated numbering scheme can be found in <a href="#tbl-externals">Table&nbsp;7</a>.</p>
<div class="cell" data-execution_count="15">
<div class="cell-output cell-output-display" data-execution_count="15">
<div id="tbl-externals" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;7: v9 &amp; v8.3.2 External Description</caption>
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 40%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">Location</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">3601</td>
<td style="text-align: left;">136</td>
<td style="text-align: left;">FAR-1082 Bird Refuge</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3602</td>
<td style="text-align: left;">137</td>
<td style="text-align: left;">SR-13/83 to Corinne</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3603</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-1112 to Bear River</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3604</td>
<td style="text-align: left;">138</td>
<td style="text-align: left;">I-15 to Tremonton</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3605</td>
<td style="text-align: left;">139</td>
<td style="text-align: left;">SR-38 to Riverside</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3606</td>
<td style="text-align: left;">140</td>
<td style="text-align: left;">SR-91 to Logan</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">3607</td>
<td style="text-align: left;">421</td>
<td style="text-align: left;">FAR-3462 N Ogden Pass</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3608</td>
<td style="text-align: left;">422</td>
<td style="text-align: left;">SR-39 Ogden Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3609</td>
<td style="text-align: left;">423</td>
<td style="text-align: left;">I-84 to Summit</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">3610</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-2688 Butterfield Cyn to Tooele</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3611</td>
<td style="text-align: left;">1783</td>
<td style="text-align: left;">SR-201 to Tooele</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3612</td>
<td style="text-align: left;">1782</td>
<td style="text-align: left;">I-80 to Tooele</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3613</td>
<td style="text-align: left;">1784</td>
<td style="text-align: left;">SR-65 Mountain Dell Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3614</td>
<td style="text-align: left;">1785</td>
<td style="text-align: left;">I-80 East Parley’s</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">1786</td>
<td style="text-align: left;">FAR-2193 Millcreek Canyon</td>
<td style="text-align: left;">Removed for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3615</td>
<td style="text-align: left;">1787</td>
<td style="text-align: left;">SR-190 Guardsman Pass</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">1788</td>
<td style="text-align: left;">SR-210 Little Cottonwood</td>
<td style="text-align: left;">Removed for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">3616</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-1828 Goshen Canyon</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3617</td>
<td style="text-align: left;">2880</td>
<td style="text-align: left;">US-6 Eureka</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3618</td>
<td style="text-align: left;">2881</td>
<td style="text-align: left;">SR-73 Rush Valley</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3619</td>
<td style="text-align: left;">2874</td>
<td style="text-align: left;">FAR-3108 Cascade Spring</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3620</td>
<td style="text-align: left;">2875</td>
<td style="text-align: left;">SR-189 Provo Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3621</td>
<td style="text-align: left;">2876</td>
<td style="text-align: left;">FAR-2865 Sixth Water / Horse Creek</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3622</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-2863 Sheep Creek</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3623</td>
<td style="text-align: left;">2877</td>
<td style="text-align: left;">US-6 Price Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3624</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">SR-96 Scofield</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3625</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-2495 Skyline Dr</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3626</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">US-89 Thistle</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3627</td>
<td style="text-align: left;">2878</td>
<td style="text-align: left;">FAR-1822 N Nebo Loop</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3628</td>
<td style="text-align: left;">2879</td>
<td style="text-align: left;">I-15 to Juab</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3629</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-1826 South Ridge Farms</td>
<td style="text-align: left;">New External</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="segment" class="level2">
<h2 class="anchored" data-anchor-id="segment">Segment</h2>
<p>The <code>Master_Segs_withFactors_20220915.shp</code> file contains the updated segments to align with 2023 RTP network changes. Additional segments for rail transit corridors were added in the Wasatch Front area.</p>


</section>

</main> <!-- /main -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"// setup mapping and layers\nL = require('leaflet@1.2.0')\nhtml`<link href='${resolve('leaflet@1.2.0/dist/leaflet.css')}' rel='stylesheet' />`\n\ngeojsonTazOld    = FileAttachment(\"data/tazOld.geojson\"   ).json()\ngeojsonTazNew    = FileAttachment(\"data/tazNew.geojson\"   ).json()\ngeojsonK12Enroll = FileAttachment(\"data/k12enroll.geojson\").json()\ngeojsonCity      = FileAttachment(\"data/city.geojson\"     ).json()\ngeojsonSDst      = FileAttachment(\"data/sdst.geojson\"     ).json()\ngeojsonMDst      = FileAttachment(\"data/mdst.geojson\"     ).json()\ngeojsonLDst      = FileAttachment(\"data/ldst.geojson\"     ).json()\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"\n\n// read in CSVs\nfaDataBusSpeeds     = FileAttachment(\"data\\\\bus_speed_ratios_long.csv\").csv({ typed: true });\nfaFunctionalClasses = FileAttachment(\"data\\\\functionalclass.csv\"      ).csv({ typed: true });\nfaTimePeriods       = FileAttachment(\"data\\\\timeperiod.csv\"           ).csv({ typed: true });\nfaAreaTypes         = FileAttachment(\"data\\\\areatype.csv\"             ).csv({ typed: true });\n\nviewof facetSelect  = Inputs.select(new Map([['Time Period', 'TimePeriodName'], ['Area Type', 'AreaTypeName'], ['Functional Class', 'FunctionalClassName']]), {value: 'TimePeriodName'     , label: \"Columns:\"});\nviewof domainSelect = Inputs.select(new Map([['Time Period', 'TimePeriodName'], ['Area Type', 'AreaTypeName'], ['Functional Class', 'FunctionalClassName']]), {value: 'AreaTypeName'       , label: \"X-Axis:\"});\nviewof strokeSelect = Inputs.select(new Map([['Time Period', 'TimePeriodName'], ['Area Type', 'AreaTypeName'], ['Functional Class', 'FunctionalClassName']]), {value: 'FunctionalClassName', label: \"Series:\"});\n\n// FILTER DATA\n//viewof functionalclasses_checked = Inputs.checkbox(faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),\n//                                                   {value: faFunctionalClasses.map(function(d) {return d.FunctionalClassName}),\n//                                                    label: \"Function Class\"});\n//viewof timeperiods_checked       = Inputs.checkbox(faTimePeriods      .map(function(d) {return d.TimePeriodName     }),\n//                                                   {value: faTimePeriods      .map(function(d) {return d.TimePeriodName     }),\n//                                                    label: \"Time Period\"   });\n//filteredBusData = faDataBusSpeeds.filter(function(busspeed) {\n//  return functionalclasses_checked.includes(busspeed.FunctionalClassName) &&\n//         timeperiods_checked      .includes(busspeed.TimePeriodName     )// &&\n//         //areatypes        .includes(busspeed.AreaTypeName  );\n//});\n\ndomainFromSelect = {\n  switch(domainSelect) {\n    case 'TimePeriodName'     : return faTimePeriods      .map(function(d) {return d.TimePeriodName     }); break;\n    case 'AreaTypeName'       : return faAreaTypes        .map(function(d) {return d.AreaTypeName       }); break;\n    case 'FunctionalClassName': return faFunctionalClasses.map(function(d) {return d.FunctionalClassName}); break;\n    default: return;\n  }\n}\n\n//xPlotDomainSelect = {\n//  switch(domainSelect) {\n//    case 'TimePeriodName'     : return \"TimePeriod\"     ; break;\n//    case 'AreaTypeName'       : return \"AreaType\"       ; break;\n//    case 'FunctionalClassName': return \"FunctionalClass\"; break;\n//    default: return;\n//  }\n//}\n\nfLabel = {\n  switch(facetSelect) {\n    case 'TimePeriodName'     : return \"Time Period\"     ; break;\n    case 'AreaTypeName'       : return \"Area Type\"       ; break;\n    case 'FunctionalClassName': return \"Functional Class\"; break;\n    default: return;\n  }\n}\n\nxLabel = {\n  switch(domainSelect) {\n    case 'TimePeriodName'     : return \"Time Period\"     ; break;\n    case 'AreaTypeName'       : return \"Area Type\"       ; break;\n    case 'FunctionalClassName': return \"Functional Class\"; break;\n    default: return;\n  }\n}\n\ndomainFacetSelect = {\n  switch(facetSelect) {\n    case 'TimePeriodName':\n      return faTimePeriods.map(function(d) {\n          return d.TimePeriodName\n        });\n      break;\n    case 'AreaTypeName':\n      return faAreaTypes.map(function(d) {\n          return d.AreaTypeName\n        });\n      break;\n    case 'FunctionalClassName':\n      return faFunctionalClasses.map(function(d) {\n          return d.FunctionalClassName\n        });\n      break;\n    default:\n      return; \n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"Plot.plot({\n  grid: true,\n  aspectRatio: 0.25,\n  facet: { data: faDataBusSpeeds, x: facetSelect, label: fLabel, marginTop: 40},\n  x: {\n    label: xLabel,\n    domain: domainFromSelect,\n    tickSize: 4,\n    tickPadding: 2,\n    marginTop: 40,\n    tickRotate: 90,\n  },\n  y: {\n    label: \"Bus Speed Ratio\",\n    domain: [0, 1],\n    fontSize: 8\n  },\n  color: { type: \"categorical\", legend: true, legendStyle: { fontSize: 16 } },\n  style: {\n    fontSize: 12\n  },\n  marginTop: 60,\n  marginBottom: 120,\n  marks: [\n    Plot.frame(),\n    Plot.line(faDataBusSpeeds, { x: domainSelect, y: \"BusSpeedRatio\", stroke: strokeSelect, strokeWidth: 2 }),\n    Plot.dot(faDataBusSpeeds, { x: domainSelect, y: \"BusSpeedRatio\", stroke: strokeSelect, r: 4, fill: strokeSelect })\n  ]\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"Inputs.table(faDataBusSpeeds, {\n  style: {\n    fontSize: 12,\n  },\n  columns: [\n    \"FunctionalClassName\",\n    \"TimePeriodName\",\n    \"AreaTypeName\",\n    \"BusSpeedRatio\"\n  ],\n  header: {\n    FunctionalClassName: \"Functional Class\",\n    TimePeriodName: \"Time Period\",\n    AreaTypeName: \"Area Type\",\n    BusSpeedRatio: \"Bus Speed Ratio\"\n  }\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"\n// read in CSVs\nfaDataBusSpeeds_previous = FileAttachment(\"data\\\\bus_speed_ratios_previous.csv\").csv({ typed: true });\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"\nPlot.plot({\n  grid: true,\n  aspectRatio: 0.5,\n  style: {\n    fontSize: 12,\n  },\n  margin: 40,\n  marginBottom: 150,\n  x: {\n    label: \"\",\n    //tickFormat: () => \"\",\n    tickRotate: 90,\n    domain: faDataBusSpeeds_previous.map(function(d) {return d.FunctionalClass}),\n    tickSize: 0\n  },\n  y: {label: \"Bus Speed Ratio\" , domain: [0, 1]},\n  color: { type: \"categorical\", legend: false },\n  marks: [\n    Plot.frame(),\n    Plot.barY(faDataBusSpeeds_previous, {x: \"FunctionalClass\", y: \"BusSpeedRatio\", stroke: \"FunctionalClass\", fill: \"FunctionalClass\"})\n  ]  \n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"\nmapTaz = {\n\n  let container = DOM.element('div', { style: `width:${width}px;height:${width/1.6}px` });\n  yield container;\n  \n  let map = L.map(container).setView([40.7608, -111.8910], 8.25);\n\n  let greyLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  }).addTo(map);\n\n  let lcolors = ['#0000FF'    ,'red'   ]\n  let llabels = ['v8.3.2 TAZ' ,'v9.0.0 TAZ'];\n\n  let lyrTAZOld = L.geoJson(geojsonTazOld, { weight: 3.00, color: lcolors[0], fillOpacity: 0}).addTo(map);\n  let lyrTAZNew = L.geoJson(geojsonTazNew, { weight: 1.50, color: lcolors[1], fillOpacity: 0}).addTo(map);\n\n  var legend = L.control({position: 'bottomleft'});\n    legend.onAdd = function (map) {\n      var div = L.DomUtil.create('div', 'legend');\n      div.innerHTML = '';\n      for (var i = 0; i < llabels.length; i++) {\n        div.innerHTML += '<i style=\"background:' + lcolors[i] + '\">&nbsp;</i> ' + llabels[i] + '<br/>';\n      }\n\n      // Add CSS style for the background color\n      div.style.backgroundColor = 'lightgray';\n      div.style.padding = '10px';\n      \n      return div;\n    };\n    legend.addTo(map);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"\nmapTazRemmSpace = {\n\n  let container = DOM.element('div', { style: `width:${width}px;height:${width/1.6}px` });\n  yield container;\n  \n  let map = L.map(container).setView([40.7608, -111.8910], 8.25);\n\n  let greyLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  }).addTo(map);\n\n  let remmColors = ['#00887F'   ,'#BD0026'       ]\n  let remmLabels = ['REMM Space','Non-REMM Space'];\n  \n  let lyrTAZNew = L.geoJson(geojsonTazNew, {\n                            style: function(feature) {\n                              var d = feature.properties.REMM;\n                              return d==1 ? {color:remmColors[0], weight:1, opacity:0.95} :\n                                     d==0 ? {color:remmColors[1], weight:1, opacity:0.95} : \n                                            {color:    '#000000', weight:1, opacity:0.95} ;\n                            }\n  }).addTo(map);\n  \n  var legend = L.control({position: 'bottomleft'});\n  legend.onAdd = function (map) {\n    var div = L.DomUtil.create('div', 'legend');\n    div.innerHTML = '';\n    for (var i = 0; i < remmLabels.length; i++) {\n      div.innerHTML += '<i style=\"background:' + remmColors[i] + '\">&nbsp;</i> ' + remmLabels[i] + '<br/>';\n    }\n\n    // Add CSS style for the background color\n    div.style.backgroundColor = 'lightgray';\n    div.style.padding = '10px';\n    \n    return div;\n  };\n  legend.addTo(map);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"\nhtml`<div style=\"width: 765px; height: 680px; transform: scale(0.85); transform-origin: 0 0;\">\n         <iframe width=\"900\" height=\"800\" src=\"https://wfrc.org/household-job-forecast-map/\" title=\"Household and Job Forecast\"></iframe>\n     </div>`\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"\n// read in CSVs\nfaControlTotals = FileAttachment(\"data/controltotal.csv\").csv({ typed: true });\nfaCounties      = FileAttachment(\"data/counties.csv\"    ).csv({ typed: true });\n\ncats = new Map([//['Total Population'               , 'TOTPOP'    ],\n                //['Group Quarter Population'       , 'GQ_Pop'    ],\n                ['Population'                     , 'HH_Pop'    ],\n                ['Households'                     , 'HH'        ],\n                //['Household Size'                 , 'HH_Size'   ],\n                //['Population 0-17'                , 'POP_00_17' ],\n                //['Population 18-64'               , 'POP_18_64' ],\n                //['Population 65+'                 , 'POP_65P'   ],\n                ['All Employment'                 , 'ALLEMP'    ],\n                ['Retail Employment'              , 'RETL'      ],\n                ['Food Employment'                , 'FOOD'      ],\n                ['Manufacturing Employment'       , 'MANU'      ],\n                ['Wholesale Employment'           , 'WSLE'      ],\n                ['Office Employment'              , 'OFFI'      ],\n                ['Government/Education Employment', 'GVED'      ],\n                ['Health Employment'              , 'HLTH'      ],\n                ['Other Employment'               , 'OTHR'      ],\n                //['Agriculture Employment'         , 'AGRI'      ],\n                //['Mining Employment'              , 'MING'      ],\n                //['Construction Employment'        , 'CONS'      ],\n                ['Home-Based Job Employment'      , 'HBJ'       ]\n                //['Jobs per Household'             , 'Job_HH'    ],\n                //['Working Population per Job'     , 'WrkPop_Job']\n                ])\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"// FILTER DATA\nfilteredControlTotals = faControlTotals.filter(function(ct) {\n  return selectCounty   == ct.CO_NAME &&\n         selectCategory == ct.Category;\n});\nviewof selectCategory = Inputs.select(cats, {value: 'HH_Pop', label: 'Category: '});\n\nviewof metric = Inputs.radio(new Map([[\"Difference\", \"Difference\"], [\"Percent Difference\", \"DifferencePct\"]]), {value: \"Difference\", label: \"Display:\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"dataCTDiff50 = transpose(diffConTot2050long)\nfiltered_dataCTDiff50 = dataCTDiff50.filter(function(dataL) {\n    return selectCategory == dataL.Category  &&\n           metric == dataL.View;\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"//https://observablehq.com/@d3/diverging-bar-chart\nimport {DivergingBarChart} from \"@d3/diverging-bar-chart\"\n\nfunction getXFormat() {\n  if (metric === \"DifferencePct\") {\n    return \"+%\";\n  } else if (selectCategory === 'HH_Size' && metric === \"Difference\") {\n    return \".2f\";\n  } else {\n    return \"+,d\";\n  }\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"\nchart3 = DivergingBarChart(filtered_dataCTDiff50, {\n    x: d => d.ViewValue,\n    y: d => d.CO_NAME,\n    xFormat: getXFormat(),\n    xLabel: \"2050 Difference\",\n    aspectRatio: 0.5,\n    colors: d3.schemeRdBu[3],\n    yDomain: ['Weber','Davis','Salt Lake','Utah', 'Wasatch Front']\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"viewof selectCounty = Inputs.select(new Map(['Wasatch Front', 'Weber', 'Davis', 'Salt Lake', 'Utah'].map(county => [county, county])), {value: 'Wasatch Front', label: 'County: '});\n\n// FILTER DATA\nfilteredCTPlot = faControlTotals.filter(function(ct) {\n  return selectCounty   == ct.CO_NAME; //&&\n         //selectCategoryPlot == ct.Category;\n});\nmaxY1 = Math.max(...filteredCTPlot.map(item => item.ControlTotal));\n\n// FILTER DATA for employment control totals\nfilteredCTPlot2 = faControlTotals.filter(function(ct) {\n  return selectCounty   == ct.CO_NAME &&\n         [\"Typical\", \"Retail\", \"Industrial\", \"Other\"].includes(ct.Category);\n});\nmaxY2 = Math.max(...filteredCTPlot2.map(item => item.ControlTotal));\n\n// FILTER DATA for control totals ratios\nfilteredCTPlot3 = faControlTotals.filter(function(ct) {\n  return selectCounty   == ct.CO_NAME &&\n         [\"HH_Size\", \"Job_HH\", \"WrkPop_Job\"].includes(ct.Category);\n});\nmaxY3 = Math.max(...filteredCTPlot3.map(item => item.ControlTotal));\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"// data for the residential control totals\nhhPopData8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"HH_Pop\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\nhhPopData9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"HH_Pop\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\nhhData8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"HH\" == ct.Category && 'v8.3.2' == ct.ModelVersion  && ct.YEAR > 2020;})\nhhData9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"HH\" == ct.Category && 'v9.0.0' == ct.ModelVersion;})\n\n// data for the employment control totals\ntypicalData8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Typical\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\ntypicalData9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Typical\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\nretailData8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Retail\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\nretailData9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Retail\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\nindustrialData8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Industrial\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\nindustrialData9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Industrial\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\notherData8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Other\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\notherData9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Other\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\n\n// data for control total ratios\nhhsize8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"HH_Size\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\nhhsize9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"HH_Size\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\njobhh8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Job_HH\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\njobhh9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"Job_HH\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\nwrkpop8 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"WrkPop_Job\" == ct.Category && \"v8.3.2\" == ct.ModelVersion  && ct.YEAR > 2020;})\nwrkpop9 = faControlTotals.filter(function(ct) { return selectCounty == ct.CO_NAME && \"WrkPop_Job\" == ct.Category && \"v9.0.0\" == ct.ModelVersion;})\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"\nPlot.plot({\n  grid: true,\n  aspectRatio: 0.5,\n  x: {label: 'Year', tickFormat: d => d},\n  y: {label: 'Control Total', domain: [0, maxY1]},\n  marginRight:60,\n  marginLeft: 60,\n  style: {\n    fontSize: 15\n  },\n  marginTop: 60,\n  marginBottom: 60,\n  marks: [\n    Plot.line(\n      hhPopData8, {x: 'YEAR', y: 'ControlTotal', stroke: '#5b859e', strokeWidth: 2, strokeDasharray: '5,5'}),\n    Plot.line(\n      hhPopData9, {x: 'YEAR', y: 'ControlTotal', stroke: '#1e395f', strokeWidth: 2, text: ['yo momma']}),\n    Plot.text(\n      hhPopData9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n    \n    Plot.line(\n      hhData8, {x: 'YEAR', y: 'ControlTotal', stroke: '#75884b',strokeWidth: 2,strokeDasharray: '5,5'}),\n    Plot.line(\n      hhData9, {x: 'YEAR', y: 'ControlTotal', stroke: '#1e5a46',strokeWidth: 2}),\n    Plot.text(\n      hhData9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n    \n    Plot.frame({strokeOpacity: 0.2}),\n    [\n      Plot.text([`\\n   ——   Current Projection \\n\\n   —  — Previous Projection`], {frameAnchor: \"top-left\", fontSize: 14})\n  ]]\n})\n\nPlot.plot({\n  grid: true,\n  aspectRatio: 0.5,\n  x: {label: 'Year', tickFormat: d => d},\n  y: {label: 'Control Total', domain: [0, maxY2]},\n  marginRight:80,\n  marginLeft: 60,\n  style: {\n    fontSize: 15\n  },\n  marginTop: 60,\n  marginBottom: 60,\n  marks: [\n    Plot.line(\n      typicalData8, {x: 'YEAR', y: 'ControlTotal', stroke: '#FF6666', strokeWidth: 2, strokeDasharray: '5,5'}),\n    Plot.line(\n      typicalData9, {x: 'YEAR', y: 'ControlTotal', stroke: '#FF0000', strokeWidth: 2}),\n    Plot.text(\n      typicalData9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n\n    Plot.line(\n      retailData8, {x: 'YEAR', y: 'ControlTotal', stroke: '#75884b',strokeWidth: 2,strokeDasharray: '5,5'}),\n    Plot.line(\n      retailData9, {x: 'YEAR', y: 'ControlTotal', stroke: '#1e5a46',strokeWidth: 2}),\n    Plot.text(\n      retailData9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n\n    Plot.line(\n      industrialData8, {x: 'YEAR', y: 'ControlTotal', stroke: '#A0A0A0', strokeWidth: 2, strokeDasharray: '5,5'}),\n    Plot.line(\n      industrialData9, {x: 'YEAR', y: 'ControlTotal', stroke: '#606060', strokeWidth: 2}),\n    Plot.text(\n      industrialData9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n\n    Plot.line(\n      otherData8, {x: 'YEAR', y: 'ControlTotal', stroke: '#5b859e',strokeWidth: 2,strokeDasharray: '5,5'}),\n    Plot.line(\n      otherData9, {x: 'YEAR', y: 'ControlTotal', stroke: '#1e395f',strokeWidth: 2}),\n    Plot.text(\n      otherData9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n\n    Plot.frame({strokeOpacity: 0.2}),\n    [\n      Plot.text([`\\n   ——   Current Projection \\n\\n   —  — Previous Projection`], {frameAnchor: \"top-left\", fontSize: 14})\n  ]]\n})\n\nPlot.plot({\n  grid: true,\n  aspectRatio: 0.5,\n  x: {label: 'Year', tickFormat: d => d},\n  y: {label: 'Control Total', domain: [0, maxY3]},\n  marginRight:85,\n  marginLeft: 60,\n  style: {\n    fontSize: 15\n  },\n  marginTop: 60,\n  marginBottom: 60,\n  marks: [\n    Plot.line(\n      hhsize8, {x: 'YEAR', y: 'ControlTotal', stroke: '#5b859e', strokeWidth: 2, strokeDasharray: '5,5'}),\n    Plot.line(\n      hhsize9, {x: 'YEAR', y: 'ControlTotal', stroke: '#1e395f', strokeWidth: 2}),\n    Plot.text(\n      hhsize9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n\n    Plot.line(\n      jobhh8, {x: 'YEAR', y: 'ControlTotal', stroke: '#75884b',strokeWidth: 2,strokeDasharray: '5,5'}),\n    Plot.line(\n      jobhh9, {x: 'YEAR', y: 'ControlTotal', stroke: '#1e5a46',strokeWidth: 2}),\n    Plot.text(\n      jobhh9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n\n    Plot.line(\n      wrkpop8, {x: 'YEAR', y: 'ControlTotal', stroke: '#FFB266',strokeWidth: 2,strokeDasharray: '5,5'}),\n    Plot.line(\n      wrkpop9, {x: 'YEAR', y: 'ControlTotal', stroke: '#FF8000',strokeWidth: 2}),\n    Plot.text(\n      wrkpop9, Plot.selectLast({x: \"YEAR\", y: \"ControlTotal\", text: \"Category\", textAnchor: \"start\", dx: 3})),\n\n    Plot.frame({strokeOpacity: 0.2}),\n    [\n      Plot.text([`\\n   ——   Current Projection \\n\\n   —  — Previous Projection`], {frameAnchor: \"top-left\", fontSize: 14})\n  ]]\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"\nmapK12Enroll = {\n\n  let container = DOM.element('div', { style: `width:${width}px;height:${width/1.6}px` });\n  yield container;\n  \n  let map = L.map(container).setView([40.7608, -111.8910], 8.25);\n\n  let greyLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  }).addTo(map);\n\n  var cHigh = \"#FF0000\"\n  var cMidl = \"#00FF00\"\n  var cElem = \"#0000FF\"\n\n  var geojsonMarkerOptions_High = {\n      radius: 4,\n      fillColor: cHigh,\n      color: cHigh,\n      weight: 2,\n      opacity: 1,\n      fillOpacity: 1.0,\n  };\n\n  var geojsonMarkerOptions_Midl = {\n      radius: 4,\n      fillColor: cMidl,\n      color: cMidl,\n      weight: 2,\n      opacity: 1,\n      fillOpacity: 1.0,\n  };\n  var geojsonMarkerOptions_Elem = {\n      radius: 4,\n      fillColor: cElem,\n      color: cElem,\n      weight: 2,\n      opacity: 1,\n      fillOpacity: 1.0,\n  };\n            \n  // function to use different icons based on number of stations\n  function markerByEnrollment(feature) {\n    if (feature.properties.Enrol_High >= 100) {\n      return geojsonMarkerOptions_High\n    } else if (feature.properties.Enrol_Midl >= 100){\n      return geojsonMarkerOptions_Midl;\n    } else{\n      return geojsonMarkerOptions_Elem;\n    }\n  };\n\n  function getColor(c) {\n    if (c=='High School') {\n      return cHigh;\n    } else if (c=='Middle School') {\n      return cMidl;\n    } else if (c=='Elementary School') {\n      return cElem;\n    }\n  };\n          \n  // create the GeoJSON layer and call the styling function with each marker\n  var layerSchools = L.geoJSON(geojsonK12Enroll,  {\n    pointToLayer: function (feature, latlng) {\n      var mypopup = L.popup().setContent(\"<b>\" + feature.properties.SchoolName + \" Enrollment</b>\" +\n                    \"<br><b>High School: </b>\" + feature.properties.Enrol_High +\n                    \"<br><b>Middle School: </b>\" + feature.properties.Enrol_Midl +\n                    \"<br><b>Elementary School: </b>\" + feature.properties.Enrol_Elem);\n      var mymarker = L.circleMarker(latlng, markerByEnrollment(feature));\n      mymarker.bindPopup(mypopup);\n      return mymarker;\n    }\n  }).addTo(map);\n\n  var legend = L.control({position: 'bottomleft'});\n    legend.onAdd = function (map) {\n      var div = L.DomUtil.create('div', 'info legend');\n      var labelsBill = []; // legend title\n      var lcategories = ['High School','Middle School','Elementary School'];\n\n      for (var i = 0; i < lcategories.length; i++) {\n        div.innerHTML += \n          labelsBill.push(\n            '<i class=\"bi bi-circle-fill\" style=\"color:' + getColor(lcategories[i]) + '\"></i> ' +\n          (lcategories[i] ? lcategories[i] : '+'));\n      }\n      div.innerHTML = labelsBill.join('<br>');\n\n      // Add CSS style for the background color\n      div.style.backgroundColor = 'lightgray';\n      div.style.padding = '10px';\n      \n      return div;\n    };\n    legend.addTo(map);\n\n  //let lyrK12Enroll = L.geoJson(geojsonK12Enroll, { size: 5, color: '#FFFFFF'}).addTo(map);\n  \n}\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"geojsonExternalOld   = FileAttachment(\"data/externalold.geojson\"  ).json()\ngeojsonExternalNew   = FileAttachment(\"data/externalnew.geojson\"  ).json()\ngeojsonMasterNetLink = FileAttachment(\"data/masternetlink.geojson\").json()\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"\nmapExternals = {\n\n  let container = DOM.element('div', { style: `width:${width}px;height:${width/1.6}px` });\n  yield container;\n  \n  let map = L.map(container).setView([40.7608, -111.8910], 8.25);\n\n  let osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  }).addTo(map); \n\n  var cNew = \"#FF0000\";\n  var cOld = \"#00FF00\";\n\n  var squareIcon_New = L.icon({\n    iconUrl: 'https://wfrc.org/wftdm-docs/_pictures/square_green.png',  // Replace with the path to your square-like icon image\n    iconSize: [15, 15],          // Adjust the size of the square-like icon\n    iconAnchor: [5, 5],          // Adjust the anchor point if needed\n  });\n\n  var squareIcon_Old = L.icon({\n    iconUrl: 'https://wfrc.org/wftdm-docs/_pictures/square_red.png',       // Replace with the path to your square-like icon image\n    iconSize: [15, 15],          // Adjust the size of the square-like icon\n    iconAnchor: [5, 5],          // Adjust the anchor point if needed\n  });\n\n  var cCommon = \"#FF0000\"\n  var cAdded  = \"#00FF00\"\n  var cOther  = \"#888888\"\n\n  var geolineCommon = {\n      color: cCommon,\n      weight: 2,\n      opacity: 1,\n  };\n\n  var geoLineAdded = {\n      color: cAdded,\n      weight: 2,\n      opacity: 1,\n  };\n  var geoLineOther = {\n      color: cOther,\n      weight: 2,\n      opacity: 1,\n  };\n            \n  // function to use different icons based on number of stations\n  function markerByNewNet(feature) {\n    if (feature.properties.FLG_NEWNET==3) {\n      return geolineCommon;\n    } else if (feature.properties.FLG_NEWNET==23){\n      return geoLineAdded;\n    } else{\n      return geoLineOther;\n    }\n  };\n\n  function getColor(c) {\n    if        (c=='Common') {\n      return cCommon;\n    } else if (c=='Added') {\n      return cAdded;\n    } else if (c=='Other') {\n      return cOther;\n    }\n  };\n\n  //let lyrNetwork = L.geoJson(geojsonMasterNetLink, { weight: 0.75, color: \"#888888\", fillOpacity: 0}).addTo(map);\n\n  // create the GeoJSON layer and call the styling function with each marker\n//  var lyrNetwork = L.geoJson(geojsonMasterNetLink,  { function (markerByNewNet(feature))}).addTo(map);\n\n  // create the GeoJSON layer and call the styling function with each marker\n  var externalNewLayer = L.geoJSON(geojsonExternalNew, {\n    pointToLayer: function (feature, latlng) {\n      var mypopup = L.popup().setContent(\"<b>Node: \" + feature.properties.N + \"</b>\");\n      var mymarker = L.marker(latlng, { icon: squareIcon_New });\n      mymarker.bindPopup(mypopup);\n      return mymarker;\n    }\n  }).addTo(map);\n\n  // create the GeoJSON layer and call the styling function with each marker\n  var externalOldLayer = L.geoJSON(geojsonExternalOld, {\n    pointToLayer: function (feature, latlng) {\n      var mypopup = L.popup().setContent(\"<b>Node: \" + feature.properties.N + \"</b>\");\n      var mymarker = L.marker(latlng, { icon: squareIcon_Old });\n      mymarker.bindPopup(mypopup);\n      return mymarker;\n    }\n  }).addTo(map);\n\n  var legend = L.control({position: 'bottomleft'});\n    legend.onAdd = function (map) {\n      var div = L.DomUtil.create('div', 'info legend');\n      var labelsBill = []; // legend title\n      var lcategories = ['v8.3.2','v9.0.0'];\n      var lcolors     = [cOld    ,cNew    ];\n\n      for (var i = 0; i < lcategories.length; i++) {\n        div.innerHTML += \n          labelsBill.push(\n            '<i style=\"background:' + lcolors[i] + '\">&nbsp;</i> ' +\n          (lcategories[i] ? lcategories[i] : '+'));\n      }\n      div.innerHTML = labelsBill.join('<br>');\n\n      // Add CSS style for the background color\n      div.style.backgroundColor = 'lightgray';\n      div.style.padding = '10px';\n      \n      return div;\n    };\n    legend.addTo(map);  \n}\n"},{"methodName":"interpretQuiet","source":"shinyInput('facetSelect')"},{"methodName":"interpretQuiet","source":"shinyInput('domainSelect')"},{"methodName":"interpretQuiet","source":"shinyInput('strokeSelect')"},{"methodName":"interpretQuiet","source":"shinyInput('selectCategory')"},{"methodName":"interpretQuiet","source":"shinyInput('metric')"},{"methodName":"interpretQuiet","source":"shinyInput('selectCounty')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../v9x/v900/whats-new";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><a href="https://wfrc.org"><img src="https://wfrc.org/wp-content/uploads/2021/11/logo.jpg" class="img-fluid" alt="WFRC" width="150"></a> <a href="https://mountainland.org/"><img src="https://mountainland.org/static/media/logo/svg/MAG_Logo_Horz_NoTag.svg" class="img-fluid" alt="MAG" width="65"></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Built using <a href="https://quarto.org">Quarto</a></div>
  </div>
</footer>



</body></html>