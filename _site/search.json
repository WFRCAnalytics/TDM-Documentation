[
  {
    "objectID": "v9x/v900/calib-valid/3-auto-own.html",
    "href": "v9x/v900/calib-valid/3-auto-own.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "Auto Ownership\nThe Auto Ownership model begins with the disaggregated households by TAZ and calculates how many vehicles each group owns. Households by vehicle ownership is grouped by 0, 1, 2, and 3+ vehicles. Auto ownership is based on utility functions for each combination of household size group, worker group, and income level (low/high). The utilities for each TAZ are then converted into probabilities. When the probabilities are multiplied by the associated number of households, then an auto ownership distribution by TAZ is created.\nThe utility functions for auto ownership contain a series of binary and linear variables. The binary variables are loop toggles that are set to 1 or 0 for household size groups, worker groups, and income levels. There are also two linear variables that are taken from TAZ attributes: population density of five nearest zones and employment within 30 minutes by transit. The coefficients for the utility function are shown in Table 1.\nThe code loops through the three groups to create utilities for each combination of binary variables for each TAZ. As can be seen in the table, for household size groups 5 and 6+, 3+ workers in a household, and high income, there are zero utility coefficients, which mean for combinations with these variables there is no utility. Additionally, the 3-vehicle utility is always set to 0 for every combination.\n\n\n\n\nTable 1: Coefficients for Vehicle Ownership Utility Functions\n\n\n\n\n\n\n\n\n\nVariable\n0-Vehicle Utility Function Coefficients\n1-Vehicle Utility Function Coefficients\n2-Vehicle Utility Function Coefficients\n3+-Vehicle Utility Function Coefficients\n\n\n\n\nConstant\n-5.007\n-2.185\n0.148\n0\n\n\nHousehold Size of 1\n3.671\n3.441\n0.951\n0\n\n\nHousehold Size of 2\n1.036\n1.016\n0.758\n0\n\n\nHousehold Size of 3\n0.186\n0.134\n-0.318\n0\n\n\nHousehold Size of 4\n0.001\n-0.738\n-0.793\n0\n\n\nHousehold Size of 5\n0\n0\n0\n0\n\n\nHousehold Size of 6+\n0\n0\n0\n0\n\n\n0 Worker in Household\n0.998\n0.514\n0\n0\n\n\n1 Workers in Household\n0\n0.552\n0.081\n0\n\n\n2 Workers in Household\n0\n0\n0.07\n0\n\n\n3+ Workers in Household\n0\n0\n0\n0\n\n\nLow Income (Group 1)\n2.733\n1.557\n0.538\n0\n\n\nHigh Income (Group 2-4)\n0\n0\n0\n0\n\n\nPopulation Density of 5 nearest Zones\n0.05159\n0.07346\n0.02366\n0\n\n\nEmployment within 30 minutes by transit\n1.99e-05\n8.342e-06\n0\n0\n\n\n\n\n\n\nUsing the utility values, probabilities for the vehicle ownership groups are calculated for each TAZ for each combination. The probability is the ratio of the exponential utility of each vehicle ownership group divided by the sum of the exponential utility of all three vehicle ownership groups for each combination. The vehicle ownership probabilities are multiplied by their associated household numbers as calculated in the household disaggregation script to get the number of households in each vehicle ownership group. Additionally, several aggregations are made to calculate total number of vehicles in different groupings. When calculating the number of vehicles in a 3+-vehicle group, the value of 3.5 number of vehicles per 3+ households is used.\n???Which validation charts should I add???"
  },
  {
    "objectID": "v9x/v900/whats-new/data/crop-volume-pngs.html",
    "href": "v9x/v900/whats-new/data/crop-volume-pngs.html",
    "title": "Documentation",
    "section": "",
    "text": "Code\nfrom PIL import Image\n\n\n\n\nCode\n# 150%, Home button, zoom out once, F11 --- Windows+Shift+S click upright screen\nim = Image.open('map_pngs/vol19.png')\nim_crop = im.crop((400, 400, 800, 1600))\nim_crop.save('map_pngs/vol19-cropped.png', quality=1000)\n\n\n\n\nCode\ndef cropImage(pngName):\n    im = Image.open('map_pngs/' + pngName + '.png')\n    im_crop = im.crop((400, 400, 800, 1600))\n    im_crop.save('map_pngs/' + pngName + '-cropped.png', quality=1000)\n\n\n\n\nCode\ncropImage('vol19')\ncropImage('vol50')"
  },
  {
    "objectID": "v9x/v900/calib-valid/1-life-cycle.html",
    "href": "v9x/v900/calib-valid/1-life-cycle.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The Life Cycle model determines the how much of the TAZ population and households from the processed socioeconomic input file will be in one of three life cycle categories:\n\nLife Cycle 1 – households with no children and no seniors\nLife Cycle 2 – households with children and no seniors\nLife Cycle 3 – households with seniors (may have children)\n\nThe Life Cycle model does its calculations in three phases:\n\nDetermine the TAZ population that is in three age groups\nDetermine each age group population that is in the three life cycle categories\nDetermine the number of households in each life cycle category\n\n\n\nThe Life Cycle model first estimates how much of the TAZ population falls into one of three Age Group categories:\n\nAge Group 1 – 0 to 17 years old\nAge Group 2 – 18 to 64 years old\nAge Group 3 – 65+ years old\n\nThe initial share of the TAZ population in each Age Group is determined by multiplying the TAZ household population by the TAZ-level Age Group percentages in the Lookup - BYTAZAgePct - AllCo.csv file located in the 1_Inputs\\0_GlobalData\\1_HHDisag_AutoOwn directory. These initial TAZ-level Age Group percentages were calculated from 2020 Census block and 2020 ACS block group data summarized at the TAZ level.\nThe Census data was also summarized at the medium district level. If the Census TAZ data had fewer than 50 people, the percentages from medium districts were used. The medium district distribution of 2020 Census Age Group percentages for the Wasatch Front can be seen in the following Figure. The share of population in each of the Age Groups varies significantly by geography. Urban areas tend to have the highest share of population 18-64 years old and the fewest children and seniors. Suburban and rural areas tend to have the highest share of children.\n\n\n\n                                                \n2020 Census % Population by Age Group by Medium District.\n\n\nThe initial TAZ-based population by Age Group is then factored to reflect the year being modeled. This is done using the county population by Age Group forecasts found in ControlTotal_Age.csv located in 1_Inputs\\2_SEData\\_ControlTotals directory. The Age Group county-level percentages are calculated from county-level population projections from the Kem C. Gardner Policy Institute (GPI), 2020-2060 State and County Total Population by Sex and Single-Year of Age. The GPI projections show a trend in all counties in the Wasatch Front model space toward a more senior population and fewer children. Adult population in the age range of 18-64 also saw a slight increase in population share.\n\n\n\n\n                                                \nFigure 1: GPI County Population Projections by Age Group for Wasatch Front Counties.\n\n\n\nThe 2020 model base year population by county and Age Group was compared to the 2020 GPI county-level population by Age Group, shown in the following charts. The model’s estimate of the population in each Age Group mirrors the GPI county-level projections.\n\n\n\n\n                                                \nFigure 2: 2020 Model vs. 2020 GPI – % Population by Age Group and County.\n\n\n\n\n\n\nThe Life Cycle model uses parameters estimated from the 2012 Household Survey to convert population in Age Groups to population in a Life Cycle category. Unique parameters were estimated for each county and are found in Table 1.\n\n\n\n\nTable 1: Percent of Age Group Population in Life Cycle 2 by County\n\n\n\n\n\n\n\nCounty\n0-17 Population Age Group (LC2 Fac 0-17)\n18-64 Population Age Group (LC2 Fac 18-64)\n\n\n\n\nBox Elder\n0.993\n0.664\n\n\nWeber\n0.982\n0.606\n\n\nDavis\n0.974\n0.711\n\n\nSalt Lake\n0.961\n0.525\n\n\nUtah\n0.981\n0.659\n\n\n\n\n\n\nOnly factors for Life Cycle 2 were estimated. Life Cycle 1 has no children leaving the 0-17 population to be divided between Life Cycles 2 and 3. Life Cycle 3 has no adults age 18-64 leaving the 18-64 population to be divided between Life Cycles 1 and 2. All of 65+ population lies completely within Life Cycle 3. Table 2 contains the equations used to calculate Life Cycle population.\n\n\n\n\nTable 2: Equations to Calculate Age Group Population in Each Life Cycle Category\n\n\n\n\n\n\n\n\nAge Group\nLife Cycle 1\nLife Cycle 2\nLife Cycle 3\n\n\n\n\n0-17\n0\nLC2 Fac 0-17\n1 – (LC2 Fac 0-17)\n\n\n18-64\n1 – (LC2 Fac 18-64)\nLC2 Fac 18-64\n0\n\n\n65+\n0\n0\n1\n\n\n\n\n\n\nAlmost all of the child-aged population is contained within Life Cycle 2, ranging between 96.1% in Salt Lake County and 99.3% in Box Elder County. The remaining child population is in Life Cycle 3. The majority of the adult-not-a-senior population is contained in Life Cycle category 2, ranging between 52.5% in Salt Lake County and 71.1% in Davis County, with the remainder falling into Life Cycle 1.\nThe shares of the modeled 2019 base year population by Life Cycle were compared to the 2012 Household Survey at the county level. The model’s estimate of population by Life Cycle category seemed reasonable at this level of geography with all modeled comparison points falling within 4% of the observed data.\n\n\n\n\n                                                \nFigure 3: 2019 Model vs. 2012 Household Survey – % Population by Life Cycle and County.\n\n\n\n\n\n\nThe Life Cycle model calculates households by Life Cycle using the average household size for each Life Cycle category. Unique average household sizes were estimated for each county and Life Cycle from the 2012 Household Survey.\n\n\n\n\nTable 3: Average Household Size by Life Cycle and County\n\n\n\n\n\n\n\n\nCounty\nHousehold Size for Life Cycle 1\nHousehold Size for Life Cycle 2\nHousehold Size for Life Cycle 3\n\n\n\n\nBox Elder\n1.86\n4.21\n2.41\n\n\nWeber\n1.88\n4.53\n1.81\n\n\nDavis\n2.14\n4.68\n2.33\n\n\nSalt Lake\n1.86\n4.44\n1.81\n\n\nUtah\n2.11\n4.75\n2.21\n\n\n\n\n\n\nThe TAZ-level population by Life Cycle category are divided by the average household size factors to generate an estimate of the share of TAZ-level households in each Life Cycle category. The share of households in each Life Cycle category is then multiplied by the total households in the TAZ to get the adjusted number of households per Life Cycle category.\nA final check is made to avoid unrealistic household sizes for zones with smaller populations. The number of households for a given Life Cycle category are capped at the minimum and maximum household sizes found in Table 4.\n\n\n\n\nTable 4: Allowed Minimum and Maximum Average Household Size by Life Cycle\n\n\n\n\n\n\n\nLife Cycle Category\nMinimum Household Size\nMaximum Household Size\n\n\n\n\n1\n1\n4\n\n\n2\n2\n8\n\n\n3\n1\n4\n\n\n\n\n\n\nThe shares of the modeled 2019 base year households by Life Cycle were compared to the 2012 Household Survey at the county level. The model’s estimate of households by Life Cycle category seemed reasonable at this level of geography with all modeled comparison points falling within 1,5% of the observed data.\n\n\n\n\n                                                \nFigure 4: 2019 Model vs. 2012 Household Survey – % Households by Life Cycle and County"
  },
  {
    "objectID": "v9x/v900/calib-valid/1-life-cycle.html#population-by-age-group",
    "href": "v9x/v900/calib-valid/1-life-cycle.html#population-by-age-group",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The Life Cycle model first estimates how much of the TAZ population falls into one of three Age Group categories:\n\nAge Group 1 – 0 to 17 years old\nAge Group 2 – 18 to 64 years old\nAge Group 3 – 65+ years old\n\nThe initial share of the TAZ population in each Age Group is determined by multiplying the TAZ household population by the TAZ-level Age Group percentages in the Lookup - BYTAZAgePct - AllCo.csv file located in the 1_Inputs\\0_GlobalData\\1_HHDisag_AutoOwn directory. These initial TAZ-level Age Group percentages were calculated from 2020 Census block and 2020 ACS block group data summarized at the TAZ level.\nThe Census data was also summarized at the medium district level. If the Census TAZ data had fewer than 50 people, the percentages from medium districts were used. The medium district distribution of 2020 Census Age Group percentages for the Wasatch Front can be seen in the following Figure. The share of population in each of the Age Groups varies significantly by geography. Urban areas tend to have the highest share of population 18-64 years old and the fewest children and seniors. Suburban and rural areas tend to have the highest share of children.\n\n\n\n                                                \n2020 Census % Population by Age Group by Medium District.\n\n\nThe initial TAZ-based population by Age Group is then factored to reflect the year being modeled. This is done using the county population by Age Group forecasts found in ControlTotal_Age.csv located in 1_Inputs\\2_SEData\\_ControlTotals directory. The Age Group county-level percentages are calculated from county-level population projections from the Kem C. Gardner Policy Institute (GPI), 2020-2060 State and County Total Population by Sex and Single-Year of Age. The GPI projections show a trend in all counties in the Wasatch Front model space toward a more senior population and fewer children. Adult population in the age range of 18-64 also saw a slight increase in population share.\n\n\n\n\n                                                \nFigure 1: GPI County Population Projections by Age Group for Wasatch Front Counties.\n\n\n\nThe 2020 model base year population by county and Age Group was compared to the 2020 GPI county-level population by Age Group, shown in the following charts. The model’s estimate of the population in each Age Group mirrors the GPI county-level projections.\n\n\n\n\n                                                \nFigure 2: 2020 Model vs. 2020 GPI – % Population by Age Group and County."
  },
  {
    "objectID": "v9x/v900/calib-valid/1-life-cycle.html#population-by-life-cycle",
    "href": "v9x/v900/calib-valid/1-life-cycle.html#population-by-life-cycle",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The Life Cycle model uses parameters estimated from the 2012 Household Survey to convert population in Age Groups to population in a Life Cycle category. Unique parameters were estimated for each county and are found in Table 1.\n\n\n\n\nTable 1: Percent of Age Group Population in Life Cycle 2 by County\n\n\n\n\n\n\n\nCounty\n0-17 Population Age Group (LC2 Fac 0-17)\n18-64 Population Age Group (LC2 Fac 18-64)\n\n\n\n\nBox Elder\n0.993\n0.664\n\n\nWeber\n0.982\n0.606\n\n\nDavis\n0.974\n0.711\n\n\nSalt Lake\n0.961\n0.525\n\n\nUtah\n0.981\n0.659\n\n\n\n\n\n\nOnly factors for Life Cycle 2 were estimated. Life Cycle 1 has no children leaving the 0-17 population to be divided between Life Cycles 2 and 3. Life Cycle 3 has no adults age 18-64 leaving the 18-64 population to be divided between Life Cycles 1 and 2. All of 65+ population lies completely within Life Cycle 3. Table 2 contains the equations used to calculate Life Cycle population.\n\n\n\n\nTable 2: Equations to Calculate Age Group Population in Each Life Cycle Category\n\n\n\n\n\n\n\n\nAge Group\nLife Cycle 1\nLife Cycle 2\nLife Cycle 3\n\n\n\n\n0-17\n0\nLC2 Fac 0-17\n1 – (LC2 Fac 0-17)\n\n\n18-64\n1 – (LC2 Fac 18-64)\nLC2 Fac 18-64\n0\n\n\n65+\n0\n0\n1\n\n\n\n\n\n\nAlmost all of the child-aged population is contained within Life Cycle 2, ranging between 96.1% in Salt Lake County and 99.3% in Box Elder County. The remaining child population is in Life Cycle 3. The majority of the adult-not-a-senior population is contained in Life Cycle category 2, ranging between 52.5% in Salt Lake County and 71.1% in Davis County, with the remainder falling into Life Cycle 1.\nThe shares of the modeled 2019 base year population by Life Cycle were compared to the 2012 Household Survey at the county level. The model’s estimate of population by Life Cycle category seemed reasonable at this level of geography with all modeled comparison points falling within 4% of the observed data.\n\n\n\n\n                                                \nFigure 3: 2019 Model vs. 2012 Household Survey – % Population by Life Cycle and County."
  },
  {
    "objectID": "v9x/v900/calib-valid/1-life-cycle.html#households-by-life-cycle",
    "href": "v9x/v900/calib-valid/1-life-cycle.html#households-by-life-cycle",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The Life Cycle model calculates households by Life Cycle using the average household size for each Life Cycle category. Unique average household sizes were estimated for each county and Life Cycle from the 2012 Household Survey.\n\n\n\n\nTable 3: Average Household Size by Life Cycle and County\n\n\n\n\n\n\n\n\nCounty\nHousehold Size for Life Cycle 1\nHousehold Size for Life Cycle 2\nHousehold Size for Life Cycle 3\n\n\n\n\nBox Elder\n1.86\n4.21\n2.41\n\n\nWeber\n1.88\n4.53\n1.81\n\n\nDavis\n2.14\n4.68\n2.33\n\n\nSalt Lake\n1.86\n4.44\n1.81\n\n\nUtah\n2.11\n4.75\n2.21\n\n\n\n\n\n\nThe TAZ-level population by Life Cycle category are divided by the average household size factors to generate an estimate of the share of TAZ-level households in each Life Cycle category. The share of households in each Life Cycle category is then multiplied by the total households in the TAZ to get the adjusted number of households per Life Cycle category.\nA final check is made to avoid unrealistic household sizes for zones with smaller populations. The number of households for a given Life Cycle category are capped at the minimum and maximum household sizes found in Table 4.\n\n\n\n\nTable 4: Allowed Minimum and Maximum Average Household Size by Life Cycle\n\n\n\n\n\n\n\nLife Cycle Category\nMinimum Household Size\nMaximum Household Size\n\n\n\n\n1\n1\n4\n\n\n2\n2\n8\n\n\n3\n1\n4\n\n\n\n\n\n\nThe shares of the modeled 2019 base year households by Life Cycle were compared to the 2012 Household Survey at the county level. The model’s estimate of households by Life Cycle category seemed reasonable at this level of geography with all modeled comparison points falling within 1,5% of the observed data.\n\n\n\n\n                                                \nFigure 4: 2019 Model vs. 2012 Household Survey – % Households by Life Cycle and County"
  },
  {
    "objectID": "v9x/v900/calib-valid/2-hh-disagg.html",
    "href": "v9x/v900/calib-valid/2-hh-disagg.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The Household Disaggregation model classifies a TAZ’s households by:\n\nHousehold Size\nIncome\nNumber of Workers\n\nHousehold Disaggregation is done in three steps with each step adding another level of disaggregation: estimating the distribution of households by size group, further disaggregation by income group and income level, and further disaggregation by number of workers per household. This results in 96 groupings when using the four income groups or 48 groupings when using low/high income levels.\nFor disaggregation to household size groups, the following lookup files contain the distribution of households across the six household size groups according the average household size for the three life cycle categories: Lookup - HH Size_LC1.csv, Lookup - HH Size_LC2.csv, and Lookup - HH Size_LC3.csv. The distributions in these files are grouped by county. There is also a third lookup file that contains a regional distribution used for comparison purposes: Lookup - HH Size.csv. When computing income ratios, the regional median household income of $74,946 (2019 dollars) is used from the latest ACS.\nFurther disaggregation by income groups is done in multiple steps. First a target TAZ distribution by income is calculated using a county distribution found in Lookup - Income.csv. Then a Fratar/Furness balancing method is used to get the matrix distribution across income groups and household sizes. The matrix is initialized with the values found in Table 1, which is hard-coded into the 2_HHDisaggregation.s script with the source being the 2012 Household Survey. The balancing method is run through until convergence is reached at (0.0001) or a max of 15 iterations.\n\n\nCode\nfrom IPython.display import Markdown\nfrom tabulate import tabulate\ntable = [['1', '0.591', '0.167' , '0.210', '0.032'],\n         ['2', '0.286', '0.155' , '0.351', '0.208'],\n         ['3', '0.253', '0.180' , '0.351', '0.216'],\n         ['4', '0.211', '0.151' , '0.395', '0.243'],\n         ['5', '0.154', '0.157' , '0.460', '0.229'],\n         ['6', '0.118', '0.122' , '0.479', '0.281']]\nMarkdown(tabulate(\n  table, \n  headers=[\"Householde Size\",\"Income Group 1 Seed\", \"Income Group 2 Seed\", \"Income Group 3 Seed\", \"Income Gruop 4 Seed\"],\n  tablefmt=\"pipe\", \n  colalign=(\"left\",)*5\n))\n\n\n\n\nTable 1: Initialization Seed Values for Household Size and income Group\n\n\n\n\n\n\n\n\n\nHouseholde Size\nIncome Group 1 Seed\nIncome Group 2 Seed\nIncome Group 3 Seed\nIncome Gruop 4 Seed\n\n\n\n\n1\n0.591\n0.167\n0.21\n0.032\n\n\n2\n0.286\n0.155\n0.351\n0.208\n\n\n3\n0.253\n0.18\n0.351\n0.216\n\n\n4\n0.211\n0.151\n0.395\n0.243\n\n\n5\n0.154\n0.157\n0.46\n0.229\n\n\n6\n0.118\n0.122\n0.479\n0.281\n\n\n\n\n\n\nFinal disaggregation by worker is a simple distribution which is found in the Lookup – Worker.csv file. This file contains a distribution across the worker groups by each of the 24 combinations of the six household size groups and the four income groups. Households are then aggregated back to the two income levels (low/high).\n\n\nThe Household Disaggregation model estimates how many households are in six Household Size categories:\n\n1 person households\n2 person households\n3 person households\n4 person households\n5 person households\n6 or more person households\n\nThe model uses the TAZ’s average household size to look up the share of households in each of the six Household Size categories. This is done independently for each of the three Life Cycle categories estimated in the previous model step.\nUPDATE 2010 Census Block Group data was used to determine the initial relationship between average household size and the number of households in each size category. To increase sample size, all Block Groups in Utah were included. Draft curves were estimated from the data’s polynomial trendline."
  },
  {
    "objectID": "v9x/v900/calib-valid/2-hh-disagg.html#household-size",
    "href": "v9x/v900/calib-valid/2-hh-disagg.html#household-size",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The Household Disaggregation model estimates how many households are in six Household Size categories:\n\n1 person households\n2 person households\n3 person households\n4 person households\n5 person households\n6 or more person households\n\nThe model uses the TAZ’s average household size to look up the share of households in each of the six Household Size categories. This is done independently for each of the three Life Cycle categories estimated in the previous model step.\nUPDATE 2010 Census Block Group data was used to determine the initial relationship between average household size and the number of households in each size category. To increase sample size, all Block Groups in Utah were included. Draft curves were estimated from the data’s polynomial trendline."
  },
  {
    "objectID": "v9x/v900/calib-valid/4-trip-gen.html",
    "href": "v9x/v900/calib-valid/4-trip-gen.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "A trip is defined as the movement of a person between two locations for a given purpose. Each trip has two trip ends. Each trip end is associated within a TAZ. Trips are comprised of a both a production zone and an attraction zone. The production zone is where the trip was produced, typically a household for a home-based trip or a place of employment for a non-home-based trip. The attraction zone is the location that is attracting a trip, typically a place of employment or commercial activity. Productions and attractions are travel direction agnostic, meaning that a to-work trip and from-work trip would show as two productions in the home location TAZ and as two attractions in the work location TAZ.\nThe Trip Generation script calculates productions and attractions at the TAZ level. The trip ends are not paired in this step but remain distinctly separated, which is then used as input into the Trip Distribution model that pairs trip ends together. The script calculates productions and attractions per zone using trip generation rates and adjustments. All values produced by this script represent person trips, not vehicle trips. The trip generation rates are calculated from the household travel survey.\nRates are applied to individual TAZs based on the attributes of the TAZ as taken from the household disaggregation model, additional socioeconomic data, externals data, and special generator data (Temple Square, SLC Main Library, colleges, etc.). All rates in this script are expressed in terms of daily rates. Rates are averages and are only applicable at aggregate levels.\nThe goal of the script is to generate a set of productions and attractions for each TAZ for the following base trip purposes:\n\nHome-Based Work (HBW)\nHome-Based School – Primary, Kindergarten to 6th Grade (HBSch_Pr)\nHome-Based School – Secondary, 7th to 12th Grade (HBSch_Sc)\nHome-Based Shopping (HBShp)\nHome-Based Other (HBOth)\nNon-Home-Based Work (NHBW)\nNon-Home-Based Non-Work (NHBNW)\n\nAdditionally, the script estimates trip generation for the following for external trips:\n\nInternal-to-External (IX) Productions\nExternal-to-Internal (XI) Attractions\n\nProductions and attractions are also generated for short-haul trucks based on people movement, goods movement, and services for the following truck types:\n\nLight Trucks (LT)\nMedium Trucks (MD)\nHeavy-Trucks (HV)\n\nGiven the various combinations of trip purposes and possible attributes, there are quite a few steps in the script. These steps can be grouped into the following three categories:\n\nEstimate productions\nEstimate attractions\nBalance productions and attractions\n\nFollowing a discussion of these three groups, there is a presentation of the validation results.\n\n\nProductions for each TAZ are estimated in the following steps:\n\nCalculate base productions\nCalculate internal-to-external productions and adjust base productions accordingly\nAdjust non-home-based trips to account for visitors\nCalculate productions for short haul truck trips\n\n\n\nBase productions are generated based on TAZ household attributes including number of workers, household size, and life cycle. Work trips only utilize attributes based on number of workers. The other trip purposes use household size and life cycle. The associated production rates are shown in Table 1. As expected, the greater the number of workers or the larger the household size, the higher the rates for any given trip purpose. The highest trip rate is 10.703 for home-based other trips for households of size 6+ in life cycle 2.\nThe production rates are only estimated for combinations of TAZ variable and trip purpose that are valid. A household with no workers does not generate any work trips. Additionally, households in Life Cycle 1 would not generate any school trips by definition.\n\n\nTable 1: Production Rates by Trip Purpose.\n\n\n\n\n(a) *HBSch productions for each TAZ are divided into HBSch_Pr and HBSch_Sc based on their respective regional shares of total enrollment.\n\n\n\n\n\n\n\n\n\n\n\nTAZ Variable\nHBW\nHBSch*\nHBShp\nHBOth\nNHBW\nNHBNW\n\n\n\n\nHouseholds with 0 Workers\n-\n-\n-\n-\n-\n-\n\n\nHouseholds with 1 Worker\n1.764\n-\n-\n-\n0.856\n-\n\n\nHouseholds with 2 Workers\n3.073\n-\n-\n-\n1.361\n-\n\n\nHouseholds with 3+ Workers\n4.698\n-\n-\n-\n1.781\n-\n\n\nHouseholds of Size 1 in Life Cycle 1\n-\n-\n0.443\n1.313\n-\n0.632\n\n\nHouseholds of Size 2 in Life Cycle 1\n-\n-\n0.706\n2.382\n-\n1.013\n\n\nHouseholds of Size 3 in Life Cycle 1\n-\n-\n0.757\n3.657\n-\n1.542\n\n\nHouseholds of Size 4 in Life Cycle 1\n-\n-\n1.088\n5.128\n-\n1.820\n\n\nHouseholds of Size 5 in Life Cycle 1\n-\n-\n1.548\n7.380\n-\n1.989\n\n\nHouseholds of Size 6+ in Life Cycle 1\n-\n-\n2.013\n9.643\n-\n2.159\n\n\nHouseholds of Size 1 in Life Cycle 2\n-\n-\n-\n-\n-\n-\n\n\nHouseholds of Size 2 in Life Cycle 2\n-\n0.530\n0.681\n2.508\n-\n1.499\n\n\nHouseholds of Size 3 in Life Cycle 2\n-\n0.675\n1.344\n4.437\n-\n1.738\n\n\nHouseholds of Size 4 in Life Cycle 2\n-\n1.117\n1.720\n6.115\n-\n2.618\n\n\nHouseholds of Size 5 in Life Cycle 2\n-\n2.473\n1.818\n8.310\n-\n3.282\n\n\nHouseholds of Size 6+ in Life Cycle 2\n-\n3.819\n1.916\n10.703\n-\n3.852\n\n\nHouseholds of Size 1 in Life Cycle 3\n-\n-\n0.561\n1.841\n-\n0.990\n\n\nHouseholds of Size 2 in Life Cycle 3\n-\n0.009\n1.149\n3.673\n-\n1.928\n\n\nHouseholds of Size 3 in Life Cycle 3\n-\n0.067\n1.272\n4.175\n-\n2.408\n\n\nHouseholds of Size 4 in Life Cycle 3\n-\n0.427\n1.404\n4.676\n-\n2.676\n\n\nHouseholds of Size 5 in Life Cycle 3\n-\n1.446\n1.683\n6.450\n-\n2.890\n\n\nHouseholds of Size 6+ in Life Cycle 3\n-\n2.865\n1.960\n8.958\n-\n2.997\n\n\n\n\n\n\nTo calculate the total productions by trip purpose for each TAZ, the value of each variable is multiplied by the associated rate for that trip purpose and then summed over all the variables. Further division of Home-Based School trips into Primary and Secondary is done based on their respective regional shares of total enrollment. Productions for non-home-based trip purposes are further adjusted by the visitor adjustment factors in Table 2, which were taken from the 2012 Household Survey.\n\n\n\n\nTable 2: Visitor Adjustment Factors.\n\n\nTrip Purpose\nVisitor Adjustment Factor\n\n\n\n\nNHBW\n1.046\n\n\nNHBNW\n1.049\n\n\n\n\n\n\n\n\n\nProductions for internal-to-external (IX) trips are estimated by the model since the production occurs within the model space. The IX productions are taken as a share from the base productions and reassigned to the IX category. Ultimately, IX trips are not separated by trip purpose. But for the estimation of IX trip productions, trips are separated into two general trip purposes: work and non-work trips. Work trips include HBW. Non-Work trips include all other purposes except for school trips, which are excluded from external trips.\nThe share of productions that are IX work/non-work trips is shown in Table 3. Typically shares of productions are in the 1% to 4% range for all counties except Box Elder, which ranges from 5% to 20% of all trip productions being IX trips.\n\n\n\n\nTable 3: Internal-to-External Shares (2012 HH Survey)\n\n\n\n\n\n\n\nCounty\nShare IX Work Productions\nShare IX Non-Work Productions\n\n\n\n\nBox Elder\n0.196\n0.052\n\n\nWeber\n0.035\n0.016\n\n\nDavis\n0.009\n0.011\n\n\nSalt Lake\n0.018\n0.015\n\n\nUtah\n0.017\n0.01\n\n\n\n\n\n\nAfter calculating the number of IX productions using the share values, these trips are removed from the base productions. Additionally, since IX productions are in vehicle-trips the final step in calculating IX productions is to multiply the person trips by vehicle occupancy rate of 1.54.\nWhen calculating productions for the opposing direction, external-to-internal (XI), the TAZ values come directly from the External_TripEnds.dbf file as generated in the Input Processing scripts.\n\n\n\nShort-Haul truck productions are calculated as a function of ecommerce variables, residential variables, and employment variables that vary by truck type. The overall formula used to calculate truck productions is as follows,\nEquation 1: Short-Haul Truck Productions \\[{Good\\_p}_{TR} = Share\\_Ecom_{TR} * (ResRate_{TR} * TOTHH * Fac\\_ECom\\_HH_{TR} + EmpRate_{TR} * TOTEMP * Fac\\_ECom\\_Emp_{TR}) + (1 - Share\\_ECom_{TR}) * (ResRate_{TR} * TOTHH)\n\\]\nwhere,\n\nTR represents truck type (light, medium, or heavy),\nShare_ECom represents the proportion of truck trips that apply to eCommerce factors (See Table 4),\nResRate represents the residential variable (See Table 4),\nEmpRate represents the employment variable (See Table 4),\nTOTHH represents the total number of households in a given TAZ,\nTOTEMP represents the total employment in a given TAZ,\nFac_ECom_HH represents the ecommerce factor applied to households (See Table 5),\nand FAC_ECom_Emp represents the ecommerce factor applied to employment (See Table 5).\n\n\n\n\n\nTable 4: Proportion of Truck Trips to apply E-Commerce Factors\n\n\n\n\n\n\n\n\nVariable\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\nShare_Ecom\n0.55\n0.8\n0.8\n\n\nResRate\n0.74745\n0.44427\n0.17481\n\n\nEmpRate\n0.25703\n0.1875\n0.11021\n\n\n\n\n\n\nThe Fac_ECom_HH variable corresponds to the values in the Households rows in Table 5. The Fac_ECom_Emp variable is computed as a function of the sum of the other variables in Table 5 multiplied by their corresponding employment types.\n\n\n\n\nTable 5: Employment Factors by Scenario and Truck Type\n\n\n\n\n\n\n\n\n\n\nScenario\nScenario Name\nGoods Movement Category\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\n1\nBase\nIndustrial\n1\n1\n1\n\n\n1\nBase\nRetail\n1\n1\n1\n\n\n1\nBase\nOther\n1\n1\n1\n\n\n1\nBase\nHouseholds\n1\n1\n1\n\n\n2\nLow\nIndustrial\n1.15\n1.05\n1.1\n\n\n2\nLow\nRetail\n1.15\n1.05\n1\n\n\n2\nLow\nOther\n1.15\n1.05\n1\n\n\n2\nLow\nHouseholds\n1.25\n1.2\n1\n\n\n3\nMedium\nIndustrial\n1.2\n1.1\n1.15\n\n\n3\nMedium\nRetail\n1.2\n1.1\n1.05\n\n\n3\nMedium\nOther\n1.2\n1.1\n1\n\n\n3\nMedium\nHouseholds\n1.35\n1.25\n1\n\n\n4\nHigh\nIndustrial\n1.25\n1.15\n1.2\n\n\n4\nHigh\nRetail\n1.25\n1.15\n1.1\n\n\n4\nHigh\nOther\n1.25\n1.15\n1\n\n\n4\nHigh\nHouseholds\n1.45\n1.3\n1\n\n\n\n\n\n\nAn additional adjustment factor is used during the calibration process to further tune the model results for trucks to match observed truck traffic. These adjustments are made at the three main groupings for short-haul productions and are shown in Table 6. A factor of 1 means there is no adjustment.\n\n\n\n\nTable 6: General Short Haul Truck Production/Attraction Factors\n\n\n\n\n\n\n\n\nShort-Haul Truck Category\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\nPeople\n1.8\n1.85\n1.65\n\n\nGoods\n1.8\n1.85\n1.65\n\n\nServices\n1.8\n1.85\n1.65\n\n\n\n\n\n\n\n\n\n\nThe Trip Generation script estimates attractions for all trip purposes. Attractions are defined as the end of the trip that is serving as the attraction for a trip. For home-based trips (trips produced at a home location), attractions could include work locations, retail centers, restaurants, schools, colleges, etc. For non-home-based trips (trips produced at work or another locations), attractions could include delivery locations, restaurants, etc. The attractions for each TAZ are estimated in the following steps:\n\nCalculate base attractions.\nCalculate telecommuting attractions.\nCalculate external-to-internal attractions and adjust base productions accordingly.\nAdjust attractions based on CBD or area type.\nAdjust truck attraction based on county.\nCalculate attractions for short haul truck trips.\nCalculate attraction adjustments for special generators.\n\n\n\nAttractions are generated based on TAZ employment, enrollment, and household attributes. Whereas productions were mostly based on household attributes, attractions are primarily based on employment for most trip purposes with exceptions for HBSch that is based on enrollment and for HBOth, NHBW, and NHBNW with some household attractions. Attraction rates are shown in Table 7.\n\n\n\n\nTable 7: Attraction Rates by Trip Purpose.\n\n\n\n\n\n\n\n\n\n\n\n\n\nTAZ Variable Description\nTAZ Variable\nHBW\nHBSch_Pr\nHBSch_Sc\nHBShp\nHBOth\nNHBW\nNHBNW\n\n\n\n\nRetail Employment\nRETL\n0.957\n-\n-\n3.660\n-\n1.132\n3.419\n\n\nFood Employment\nFOOD\n1.017\n-\n-\n3.058\n-\n1.620\n3.264\n\n\nManufacturing Employment\nMANU\n1.136\n-\n-\n-\n0.019\n0.231\n0.037\n\n\nWholesale Employment\nWSLE\n1.136\n-\n-\n-\n0.126\n0.410\n0.103\n\n\nOffice Employment\nOFFI\n1.196\n-\n-\n-\n0.219\n0.178\n0.054\n\n\nGov./Ed. Employment\nGVED\n1.196\n-\n-\n-\n2.455\n0.250\n0.452\n\n\nHealth Employment\nHLTH\n1.136\n-\n-\n-\n1.135\n0.185\n0.446\n\n\nOther Employment\nOTHR\n1.136\n-\n-\n-\n0.902\n0.200\n0.242\n\n\nAgricultural Employment\nFM_AGRI\n1.136\n-\n-\n-\n-\n0.200\n-\n\n\nMining Employment\nFM_MING\n1.136\n-\n-\n-\n-\n0.200\n-\n\n\nConstruction Employment\nFM_CONS\n1.136\n-\n-\n-\n-\n0.200\n-\n\n\nTotal Households\nTOTHH\n-\n-\n-\n-\n2.553\n0.179\n0.589\n\n\nElementary Enrollment\nENROL_ELEM\n-\n1.000\n-\n-\n-\n-\n-\n\n\nMiddle School Enrollment\nENROL_MIDL\n-\n-\n1.000\n-\n-\n-\n-\n\n\nHigh School Enrollment\nENROL_HIGH\n-\n-\n1.000\n-\n-\n-\n-\n\n\n\n\n\n\n\n\n\nTelecommuting and home-based jobs for each employment category are the calculated by applying the telecommuting rates taken from the model input files. Work-at-home jobs (HBJ) are added back into each employment category for the attraction calculations when calculating telecommuting. Telecommuting attractions are specified as either home-based work or non home-based work. Table 8 shows the rates applied to each job portion of the telecommutting function.\n\n\n\n\nTable 8: Telecommuting Rates applied to each Job portion of the Telecommuting Function\n\n\n\n\n\n\n\nJob Type\nFactor for HBW Telecommuting\nFactor for NHBW Telecommuting\n\n\n\n\nRETL\n0.957\n1.132\n\n\nFOOD\n1.017\n1.62\n\n\nMANU\n1.136\n0.231\n\n\nWSLE\n1.136\n0.41\n\n\nOFFI\n1.196\n0.178\n\n\nGVED\n1.196\n0.25\n\n\nHLTH\n1.136\n0.185\n\n\nOTHR\n1.136\n0.2\n\n\nAGRI\n1.136\n0.2\n\n\nMING\n1.136\n0.2\n\n\nCONS\n1.136\n0.2\n\n\n\n\n\n\nFor performing scenario testing, the 1ControlCenter.block file for the model scenario contains a telecommuting factor that serves as a multiplier to all employment-based telecommuting calculations. The default value for this factor is 1. A value less than 1 decreases the telecommuting share and a value greater than 1 increases the telecommuting share.\nAn additional adjustment factor is used during the calibration process to further tune the model results for telecommuting to match the base year target. This model uses a telecommuting calibration factor of 1.\n\n\n\nThe TAZ attractions for external-to-internal (XI) attractions is set to the number of total households (TOTHH) plus the total employment (TOTEMP). Since XI attractions are scaled to match productions, this means that XI attractions will be proportionally distributed by households plus employment amongst all TAZs.\nAdditional adjustment factors applied to XI attractions include county factors and a scaling factor. The county adjustment factors are shown in Table 9. The scaling factor used for the model is 0.010957.\n\n\n\n\nTable 9: IX Attraction County Adjustment Factors\n\n\nJob Type\nXI Adjustment Factor\n\n\n\n\nBox Elder\n8.5741\n\n\nWeber\n1.0061\n\n\nDavis\n0.5437\n\n\nSalt Lake\n0.9974\n\n\nUtah\n0.8972\n\n\n\n\n\n\nWhen calculating attractions for the opposing direction, internal-to-external (IX), the values come directly from the External_TripEnds.dbf file as generated in the Input Processing scripts.\n\n\n\nSome trip purposed are further adjusted by select geographies. This allows for localized nuances to be applied when attraction rates may be atypical of regional rates. Two sets of adjustments are made. First, an adjustment of 0.5 is made to home-based shopping trips attracted to the CBD in Salt Lake County. Thus, shopping trips attracted to the CBD are half of what a non-CBD rate would be. Second, there are adjustments based on select area types for Davis and Salt Lake Counties. These adjustments are shown in Table 10. Attractions for urban area types are reduced 70% to 80% for select trip purposes. For CBD-like area types in Salt Lake County, there is an increase of 25% for home-based work trips showing a greater number of attractions compared as compared to similar areas in the rest of the region.\n\n\n\n\nTable 10: Adjustment Factors for Select Counties/Area Types\n\n\nCounty\nArea Type\nHBW\nHBShp\nHBOth\nNHBNW\n\n\n\n\nDavis\nUrban\n0.8\n-\n-\n-\n\n\nSalt Lake\nUrban\n-\n0.75\n0.7\n0.8\n\n\nSalt Lake\nCBD-Like\n1.25\n-\n-\n-\n\n\n\n\n\n\n\n\n\nAn additional adjustment factor is used during the calibration process to further tune the model results for medium and heavy trucks to match observed truck traffic. These adjustments are made at the three main groupings for short-haul attractions. Light trucks were low in Box Elder, Weber, Davis, and Utah County and high in Salt Lake county. Medium trucks were low in Box Elder and Davis county and high in Weber, Salt Lake, and Utah county. Heavy trucks were low in Box Elder, Davis, and Utah county and high in Weber and Salt Lake County. The factors as shown in Table 11 were set to help offset these differences.\n\n\n\n\nTable 11: Area Specific Short Haul Truck Production/Attraction Factors\n\n\n\n\n\n\n\n\n\nShort-Haul Truck Category\nArea\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\nPeople\nUrban Spaces\n1.03\n0.9\n0.9\n\n\nGoods\nUrban Spaces\n1.03\n0.9\n0.9\n\n\nServices\nUrban Spaces\n1.03\n0.9\n0.9\n\n\nPeople\nBox Elder\n1.5\n1.17\n1.12\n\n\nGoods\nBox Elder\n1.5\n1.17\n1.12\n\n\nServices\nBox Elder\n1.5\n1.17\n1.12\n\n\nPeople\nWeber\n1.22\n0.96\n0.96\n\n\nGoods\nWeber\n1.22\n0.96\n0.96\n\n\nServices\nWeber\n1.22\n0.96\n0.96\n\n\nPeople\nDavis\n1.14\n1.08\n1.1\n\n\nGoods\nDavis\n1.14\n1.08\n1.1\n\n\nServices\nDavis\n1.14\n1.08\n1.1\n\n\nPeople\nSalt Lake\n0.59\n0.62\n0.54\n\n\nGoods\nSalt Lake\n0.59\n0.62\n0.54\n\n\nServices\nSalt Lake\n0.59\n0.62\n0.54\n\n\nPeople\nUtah\n1.19\n0.95\n1.01\n\n\nGoods\nUtah\n1.19\n0.95\n1.01\n\n\nServices\nUtah\n1.19\n0.95\n1.01\n\n\n\n\n\n\n\n\n\nThere are two groups of special generators that have adjustments for trip attractions. Temple Square and the SLC Library are in one group and colleges are in another.\n\n\nTrip attractions for Temple Square and the SLC Library are generated using a base year daily visitation numbers and then increasing by an annual growth rate to estimate trip ends in the model year. The values used for estimation are shown in Table 12. Temple Square had an estimated five million visitors in 2013, which translates to roughly 13,700 visitors per day and 27,400 trip ends per day. The SLC library is the second most popular destination in Salt Lake with approximately four million visitors per year or roughly 11,000 visitors and 22,000 trip ends per day.\n\n\n\n\nTable 12: Adjustment Factors for Select Counties/Area Types\n\n\n\n\n\n\n\n\nSpecial Generator\nBase Year\nBase Year Daily Trip Ends\nAnnual Growth Rate\n\n\n\n\nTemple Square\n2013\n27400\n1.0%\n\n\nSLC Library\n2005\n22000\n1.0%\n\n\n\n\n\n\nAfter calculating model year attractions for the two special generators, the total attractions are then added to TAZ attractions proportionally amongst the trip purposes HBOth and NHBNW for the TAZ including Temple Square and HBOth, NHBW, and NHBNW for the TAZ including SLC Library.\n\n\n\nCHECK ENTIRE SECTION - we updated this but I forgot what we did - ask bill There are several locations with the TDM where trips to and from colleges are estimated. Home-based college (HBC) trips are separately generated and distributed as part of the Input Processing scripts and are found in TripTable.mtx. HBC trips are those of enrolled students traveling to and from campus. These trips bypass Trip Generation and Trip Distribution scripts. The attractions for other trip purposes to colleges are generated together with the other trips within the containing TAZ. Adjustments are then made to account for additional attractions to colleges for the three trip purposes of HBOth, NHBW, and NHBNW.\nHBOth, NHBNW, and NHBNW trip adjustments are calculated through the following steps:\n\nCalculate the number of full-time-equivalent (FTE) students per campus by multiplying the enrollment control total for a college campus from TripTableControlTotal.csv by the FTE rate for the college campus from College_Factors.csv.\nCalculate the total attractions that should be generated based on the number of FTE students. This is done by multiplying the number of FTE students (step 1) by 2.4 vehicle attractions per student (based on all purposes from ITE, exact reference not included) multiplied by 1.7 person trips to vehicle trips (source not stated, is it the HHSurvey??).\nCalculate HBW trips associated with college campus in its containing TAZ with the following steps:\n\nMultiply FTE students (step 1) by the college employment factor (see Table 13) to get the estimated number of employees for a college campus.\nDivide the estimated number of employees for a college campus by the total employment (TOTEMP) for the containing TAZ to obtain a college employment ratio. The ratio is capped at 1.0.\nThe college employment ratio is then multiplied by the number of HBW trips to determine which portion of HBW are associated with the college.\n\nCalculate the number of non-HBC/HBW attractions to add to the TAZ by subtracting the college associated HBW trips (step 3) and HBC trips (TripTable.mtx) from the total attractions (step 2).\nDistribute the additional attractions (step 4) proportionally amongst HBOth, NHBW, and NHBNW.\n\n\n\n\n\nTable 13: College Employment Factors\n\n\nCollege\nCollege Employment Factor\n\n\n\n\nWeber State University\n0.25\n\n\nUtah Valley University\n0.25\n\n\nSalt Lake Community College\n0.29\n\n\nLDSBC\n0.33\n\n\nWestminster\n0.33\n\n\nUniversity of Utah\n0.71\n\n\nBrigham Young University\n0.71\n\n\nUnspecified\n0.48\n\n\n\n\n\n\n\n\n\n\n\nThe final step of Trip Generation is to balance the productions and attractions. Balancing takes place by proportionally increasing or decreasing productions/attractions across the entire model space to match regional totals. For trips internal to the model space (non-externals) the attractions are balanced to match the productions. External trip productions and attractions are balanced in the WFRC/MAG model space. The IX productions are balanced to the IX attractions and the XI attractions are balanced to the XI productions. Truck trips are already balanced since TAZ attractions were set equal TAZ productions. –really?\nThere is also an important distinction to be understood regarding non-home-based trips. While non-home-based productions are based on household characteristics of a TAZ, the trips are not actually being produced in the home TAZ location. They are produced at another location, hence the term non-home-based. Non-home-based productions, thus, are only used to get total values that are then used to balance non-home-based attractions. After attractions are balanced to match productions, TAZ productions are set equal to TAZ attractions. So, non-home-based productions are used to get the quantity of trips, but attractions are used to get the distribution of trips.\n\n\n\nThe validation results for the Trip Generation portion of the model are shown in this section. All the 2012 Household Survey results are scaled to the 2010 Census.\n\n\n\n\n                                                \nFigure 1: Productions to Households Ratios – Total Trip Ends (II + IX).\n\n\n\n\n\n\n\n                                                \nFigure 2: Total Trip Validation.\n\n\n\n\n\n\n\n                                                \nFigure 3: Trip Balance Ratios."
  },
  {
    "objectID": "v9x/v900/calib-valid/4-trip-gen.html#estimate-productions",
    "href": "v9x/v900/calib-valid/4-trip-gen.html#estimate-productions",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "Productions for each TAZ are estimated in the following steps:\n\nCalculate base productions\nCalculate internal-to-external productions and adjust base productions accordingly\nAdjust non-home-based trips to account for visitors\nCalculate productions for short haul truck trips\n\n\n\nBase productions are generated based on TAZ household attributes including number of workers, household size, and life cycle. Work trips only utilize attributes based on number of workers. The other trip purposes use household size and life cycle. The associated production rates are shown in Table 1. As expected, the greater the number of workers or the larger the household size, the higher the rates for any given trip purpose. The highest trip rate is 10.703 for home-based other trips for households of size 6+ in life cycle 2.\nThe production rates are only estimated for combinations of TAZ variable and trip purpose that are valid. A household with no workers does not generate any work trips. Additionally, households in Life Cycle 1 would not generate any school trips by definition.\n\n\nTable 1: Production Rates by Trip Purpose.\n\n\n\n\n(a) *HBSch productions for each TAZ are divided into HBSch_Pr and HBSch_Sc based on their respective regional shares of total enrollment.\n\n\n\n\n\n\n\n\n\n\n\nTAZ Variable\nHBW\nHBSch*\nHBShp\nHBOth\nNHBW\nNHBNW\n\n\n\n\nHouseholds with 0 Workers\n-\n-\n-\n-\n-\n-\n\n\nHouseholds with 1 Worker\n1.764\n-\n-\n-\n0.856\n-\n\n\nHouseholds with 2 Workers\n3.073\n-\n-\n-\n1.361\n-\n\n\nHouseholds with 3+ Workers\n4.698\n-\n-\n-\n1.781\n-\n\n\nHouseholds of Size 1 in Life Cycle 1\n-\n-\n0.443\n1.313\n-\n0.632\n\n\nHouseholds of Size 2 in Life Cycle 1\n-\n-\n0.706\n2.382\n-\n1.013\n\n\nHouseholds of Size 3 in Life Cycle 1\n-\n-\n0.757\n3.657\n-\n1.542\n\n\nHouseholds of Size 4 in Life Cycle 1\n-\n-\n1.088\n5.128\n-\n1.820\n\n\nHouseholds of Size 5 in Life Cycle 1\n-\n-\n1.548\n7.380\n-\n1.989\n\n\nHouseholds of Size 6+ in Life Cycle 1\n-\n-\n2.013\n9.643\n-\n2.159\n\n\nHouseholds of Size 1 in Life Cycle 2\n-\n-\n-\n-\n-\n-\n\n\nHouseholds of Size 2 in Life Cycle 2\n-\n0.530\n0.681\n2.508\n-\n1.499\n\n\nHouseholds of Size 3 in Life Cycle 2\n-\n0.675\n1.344\n4.437\n-\n1.738\n\n\nHouseholds of Size 4 in Life Cycle 2\n-\n1.117\n1.720\n6.115\n-\n2.618\n\n\nHouseholds of Size 5 in Life Cycle 2\n-\n2.473\n1.818\n8.310\n-\n3.282\n\n\nHouseholds of Size 6+ in Life Cycle 2\n-\n3.819\n1.916\n10.703\n-\n3.852\n\n\nHouseholds of Size 1 in Life Cycle 3\n-\n-\n0.561\n1.841\n-\n0.990\n\n\nHouseholds of Size 2 in Life Cycle 3\n-\n0.009\n1.149\n3.673\n-\n1.928\n\n\nHouseholds of Size 3 in Life Cycle 3\n-\n0.067\n1.272\n4.175\n-\n2.408\n\n\nHouseholds of Size 4 in Life Cycle 3\n-\n0.427\n1.404\n4.676\n-\n2.676\n\n\nHouseholds of Size 5 in Life Cycle 3\n-\n1.446\n1.683\n6.450\n-\n2.890\n\n\nHouseholds of Size 6+ in Life Cycle 3\n-\n2.865\n1.960\n8.958\n-\n2.997\n\n\n\n\n\n\nTo calculate the total productions by trip purpose for each TAZ, the value of each variable is multiplied by the associated rate for that trip purpose and then summed over all the variables. Further division of Home-Based School trips into Primary and Secondary is done based on their respective regional shares of total enrollment. Productions for non-home-based trip purposes are further adjusted by the visitor adjustment factors in Table 2, which were taken from the 2012 Household Survey.\n\n\n\n\nTable 2: Visitor Adjustment Factors.\n\n\nTrip Purpose\nVisitor Adjustment Factor\n\n\n\n\nNHBW\n1.046\n\n\nNHBNW\n1.049\n\n\n\n\n\n\n\n\n\nProductions for internal-to-external (IX) trips are estimated by the model since the production occurs within the model space. The IX productions are taken as a share from the base productions and reassigned to the IX category. Ultimately, IX trips are not separated by trip purpose. But for the estimation of IX trip productions, trips are separated into two general trip purposes: work and non-work trips. Work trips include HBW. Non-Work trips include all other purposes except for school trips, which are excluded from external trips.\nThe share of productions that are IX work/non-work trips is shown in Table 3. Typically shares of productions are in the 1% to 4% range for all counties except Box Elder, which ranges from 5% to 20% of all trip productions being IX trips.\n\n\n\n\nTable 3: Internal-to-External Shares (2012 HH Survey)\n\n\n\n\n\n\n\nCounty\nShare IX Work Productions\nShare IX Non-Work Productions\n\n\n\n\nBox Elder\n0.196\n0.052\n\n\nWeber\n0.035\n0.016\n\n\nDavis\n0.009\n0.011\n\n\nSalt Lake\n0.018\n0.015\n\n\nUtah\n0.017\n0.01\n\n\n\n\n\n\nAfter calculating the number of IX productions using the share values, these trips are removed from the base productions. Additionally, since IX productions are in vehicle-trips the final step in calculating IX productions is to multiply the person trips by vehicle occupancy rate of 1.54.\nWhen calculating productions for the opposing direction, external-to-internal (XI), the TAZ values come directly from the External_TripEnds.dbf file as generated in the Input Processing scripts.\n\n\n\nShort-Haul truck productions are calculated as a function of ecommerce variables, residential variables, and employment variables that vary by truck type. The overall formula used to calculate truck productions is as follows,\nEquation 1: Short-Haul Truck Productions \\[{Good\\_p}_{TR} = Share\\_Ecom_{TR} * (ResRate_{TR} * TOTHH * Fac\\_ECom\\_HH_{TR} + EmpRate_{TR} * TOTEMP * Fac\\_ECom\\_Emp_{TR}) + (1 - Share\\_ECom_{TR}) * (ResRate_{TR} * TOTHH)\n\\]\nwhere,\n\nTR represents truck type (light, medium, or heavy),\nShare_ECom represents the proportion of truck trips that apply to eCommerce factors (See Table 4),\nResRate represents the residential variable (See Table 4),\nEmpRate represents the employment variable (See Table 4),\nTOTHH represents the total number of households in a given TAZ,\nTOTEMP represents the total employment in a given TAZ,\nFac_ECom_HH represents the ecommerce factor applied to households (See Table 5),\nand FAC_ECom_Emp represents the ecommerce factor applied to employment (See Table 5).\n\n\n\n\n\nTable 4: Proportion of Truck Trips to apply E-Commerce Factors\n\n\n\n\n\n\n\n\nVariable\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\nShare_Ecom\n0.55\n0.8\n0.8\n\n\nResRate\n0.74745\n0.44427\n0.17481\n\n\nEmpRate\n0.25703\n0.1875\n0.11021\n\n\n\n\n\n\nThe Fac_ECom_HH variable corresponds to the values in the Households rows in Table 5. The Fac_ECom_Emp variable is computed as a function of the sum of the other variables in Table 5 multiplied by their corresponding employment types.\n\n\n\n\nTable 5: Employment Factors by Scenario and Truck Type\n\n\n\n\n\n\n\n\n\n\nScenario\nScenario Name\nGoods Movement Category\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\n1\nBase\nIndustrial\n1\n1\n1\n\n\n1\nBase\nRetail\n1\n1\n1\n\n\n1\nBase\nOther\n1\n1\n1\n\n\n1\nBase\nHouseholds\n1\n1\n1\n\n\n2\nLow\nIndustrial\n1.15\n1.05\n1.1\n\n\n2\nLow\nRetail\n1.15\n1.05\n1\n\n\n2\nLow\nOther\n1.15\n1.05\n1\n\n\n2\nLow\nHouseholds\n1.25\n1.2\n1\n\n\n3\nMedium\nIndustrial\n1.2\n1.1\n1.15\n\n\n3\nMedium\nRetail\n1.2\n1.1\n1.05\n\n\n3\nMedium\nOther\n1.2\n1.1\n1\n\n\n3\nMedium\nHouseholds\n1.35\n1.25\n1\n\n\n4\nHigh\nIndustrial\n1.25\n1.15\n1.2\n\n\n4\nHigh\nRetail\n1.25\n1.15\n1.1\n\n\n4\nHigh\nOther\n1.25\n1.15\n1\n\n\n4\nHigh\nHouseholds\n1.45\n1.3\n1\n\n\n\n\n\n\nAn additional adjustment factor is used during the calibration process to further tune the model results for trucks to match observed truck traffic. These adjustments are made at the three main groupings for short-haul productions and are shown in Table 6. A factor of 1 means there is no adjustment.\n\n\n\n\nTable 6: General Short Haul Truck Production/Attraction Factors\n\n\n\n\n\n\n\n\nShort-Haul Truck Category\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\nPeople\n1.8\n1.85\n1.65\n\n\nGoods\n1.8\n1.85\n1.65\n\n\nServices\n1.8\n1.85\n1.65"
  },
  {
    "objectID": "v9x/v900/calib-valid/4-trip-gen.html#estimate-attractions",
    "href": "v9x/v900/calib-valid/4-trip-gen.html#estimate-attractions",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The Trip Generation script estimates attractions for all trip purposes. Attractions are defined as the end of the trip that is serving as the attraction for a trip. For home-based trips (trips produced at a home location), attractions could include work locations, retail centers, restaurants, schools, colleges, etc. For non-home-based trips (trips produced at work or another locations), attractions could include delivery locations, restaurants, etc. The attractions for each TAZ are estimated in the following steps:\n\nCalculate base attractions.\nCalculate telecommuting attractions.\nCalculate external-to-internal attractions and adjust base productions accordingly.\nAdjust attractions based on CBD or area type.\nAdjust truck attraction based on county.\nCalculate attractions for short haul truck trips.\nCalculate attraction adjustments for special generators.\n\n\n\nAttractions are generated based on TAZ employment, enrollment, and household attributes. Whereas productions were mostly based on household attributes, attractions are primarily based on employment for most trip purposes with exceptions for HBSch that is based on enrollment and for HBOth, NHBW, and NHBNW with some household attractions. Attraction rates are shown in Table 7.\n\n\n\n\nTable 7: Attraction Rates by Trip Purpose.\n\n\n\n\n\n\n\n\n\n\n\n\n\nTAZ Variable Description\nTAZ Variable\nHBW\nHBSch_Pr\nHBSch_Sc\nHBShp\nHBOth\nNHBW\nNHBNW\n\n\n\n\nRetail Employment\nRETL\n0.957\n-\n-\n3.660\n-\n1.132\n3.419\n\n\nFood Employment\nFOOD\n1.017\n-\n-\n3.058\n-\n1.620\n3.264\n\n\nManufacturing Employment\nMANU\n1.136\n-\n-\n-\n0.019\n0.231\n0.037\n\n\nWholesale Employment\nWSLE\n1.136\n-\n-\n-\n0.126\n0.410\n0.103\n\n\nOffice Employment\nOFFI\n1.196\n-\n-\n-\n0.219\n0.178\n0.054\n\n\nGov./Ed. Employment\nGVED\n1.196\n-\n-\n-\n2.455\n0.250\n0.452\n\n\nHealth Employment\nHLTH\n1.136\n-\n-\n-\n1.135\n0.185\n0.446\n\n\nOther Employment\nOTHR\n1.136\n-\n-\n-\n0.902\n0.200\n0.242\n\n\nAgricultural Employment\nFM_AGRI\n1.136\n-\n-\n-\n-\n0.200\n-\n\n\nMining Employment\nFM_MING\n1.136\n-\n-\n-\n-\n0.200\n-\n\n\nConstruction Employment\nFM_CONS\n1.136\n-\n-\n-\n-\n0.200\n-\n\n\nTotal Households\nTOTHH\n-\n-\n-\n-\n2.553\n0.179\n0.589\n\n\nElementary Enrollment\nENROL_ELEM\n-\n1.000\n-\n-\n-\n-\n-\n\n\nMiddle School Enrollment\nENROL_MIDL\n-\n-\n1.000\n-\n-\n-\n-\n\n\nHigh School Enrollment\nENROL_HIGH\n-\n-\n1.000\n-\n-\n-\n-\n\n\n\n\n\n\n\n\n\nTelecommuting and home-based jobs for each employment category are the calculated by applying the telecommuting rates taken from the model input files. Work-at-home jobs (HBJ) are added back into each employment category for the attraction calculations when calculating telecommuting. Telecommuting attractions are specified as either home-based work or non home-based work. Table 8 shows the rates applied to each job portion of the telecommutting function.\n\n\n\n\nTable 8: Telecommuting Rates applied to each Job portion of the Telecommuting Function\n\n\n\n\n\n\n\nJob Type\nFactor for HBW Telecommuting\nFactor for NHBW Telecommuting\n\n\n\n\nRETL\n0.957\n1.132\n\n\nFOOD\n1.017\n1.62\n\n\nMANU\n1.136\n0.231\n\n\nWSLE\n1.136\n0.41\n\n\nOFFI\n1.196\n0.178\n\n\nGVED\n1.196\n0.25\n\n\nHLTH\n1.136\n0.185\n\n\nOTHR\n1.136\n0.2\n\n\nAGRI\n1.136\n0.2\n\n\nMING\n1.136\n0.2\n\n\nCONS\n1.136\n0.2\n\n\n\n\n\n\nFor performing scenario testing, the 1ControlCenter.block file for the model scenario contains a telecommuting factor that serves as a multiplier to all employment-based telecommuting calculations. The default value for this factor is 1. A value less than 1 decreases the telecommuting share and a value greater than 1 increases the telecommuting share.\nAn additional adjustment factor is used during the calibration process to further tune the model results for telecommuting to match the base year target. This model uses a telecommuting calibration factor of 1.\n\n\n\nThe TAZ attractions for external-to-internal (XI) attractions is set to the number of total households (TOTHH) plus the total employment (TOTEMP). Since XI attractions are scaled to match productions, this means that XI attractions will be proportionally distributed by households plus employment amongst all TAZs.\nAdditional adjustment factors applied to XI attractions include county factors and a scaling factor. The county adjustment factors are shown in Table 9. The scaling factor used for the model is 0.010957.\n\n\n\n\nTable 9: IX Attraction County Adjustment Factors\n\n\nJob Type\nXI Adjustment Factor\n\n\n\n\nBox Elder\n8.5741\n\n\nWeber\n1.0061\n\n\nDavis\n0.5437\n\n\nSalt Lake\n0.9974\n\n\nUtah\n0.8972\n\n\n\n\n\n\nWhen calculating attractions for the opposing direction, internal-to-external (IX), the values come directly from the External_TripEnds.dbf file as generated in the Input Processing scripts.\n\n\n\nSome trip purposed are further adjusted by select geographies. This allows for localized nuances to be applied when attraction rates may be atypical of regional rates. Two sets of adjustments are made. First, an adjustment of 0.5 is made to home-based shopping trips attracted to the CBD in Salt Lake County. Thus, shopping trips attracted to the CBD are half of what a non-CBD rate would be. Second, there are adjustments based on select area types for Davis and Salt Lake Counties. These adjustments are shown in Table 10. Attractions for urban area types are reduced 70% to 80% for select trip purposes. For CBD-like area types in Salt Lake County, there is an increase of 25% for home-based work trips showing a greater number of attractions compared as compared to similar areas in the rest of the region.\n\n\n\n\nTable 10: Adjustment Factors for Select Counties/Area Types\n\n\nCounty\nArea Type\nHBW\nHBShp\nHBOth\nNHBNW\n\n\n\n\nDavis\nUrban\n0.8\n-\n-\n-\n\n\nSalt Lake\nUrban\n-\n0.75\n0.7\n0.8\n\n\nSalt Lake\nCBD-Like\n1.25\n-\n-\n-\n\n\n\n\n\n\n\n\n\nAn additional adjustment factor is used during the calibration process to further tune the model results for medium and heavy trucks to match observed truck traffic. These adjustments are made at the three main groupings for short-haul attractions. Light trucks were low in Box Elder, Weber, Davis, and Utah County and high in Salt Lake county. Medium trucks were low in Box Elder and Davis county and high in Weber, Salt Lake, and Utah county. Heavy trucks were low in Box Elder, Davis, and Utah county and high in Weber and Salt Lake County. The factors as shown in Table 11 were set to help offset these differences.\n\n\n\n\nTable 11: Area Specific Short Haul Truck Production/Attraction Factors\n\n\n\n\n\n\n\n\n\nShort-Haul Truck Category\nArea\nLight Truck Factor\nMedium Truck Factor\nHeavy Truck Factor\n\n\n\n\nPeople\nUrban Spaces\n1.03\n0.9\n0.9\n\n\nGoods\nUrban Spaces\n1.03\n0.9\n0.9\n\n\nServices\nUrban Spaces\n1.03\n0.9\n0.9\n\n\nPeople\nBox Elder\n1.5\n1.17\n1.12\n\n\nGoods\nBox Elder\n1.5\n1.17\n1.12\n\n\nServices\nBox Elder\n1.5\n1.17\n1.12\n\n\nPeople\nWeber\n1.22\n0.96\n0.96\n\n\nGoods\nWeber\n1.22\n0.96\n0.96\n\n\nServices\nWeber\n1.22\n0.96\n0.96\n\n\nPeople\nDavis\n1.14\n1.08\n1.1\n\n\nGoods\nDavis\n1.14\n1.08\n1.1\n\n\nServices\nDavis\n1.14\n1.08\n1.1\n\n\nPeople\nSalt Lake\n0.59\n0.62\n0.54\n\n\nGoods\nSalt Lake\n0.59\n0.62\n0.54\n\n\nServices\nSalt Lake\n0.59\n0.62\n0.54\n\n\nPeople\nUtah\n1.19\n0.95\n1.01\n\n\nGoods\nUtah\n1.19\n0.95\n1.01\n\n\nServices\nUtah\n1.19\n0.95\n1.01\n\n\n\n\n\n\n\n\n\nThere are two groups of special generators that have adjustments for trip attractions. Temple Square and the SLC Library are in one group and colleges are in another.\n\n\nTrip attractions for Temple Square and the SLC Library are generated using a base year daily visitation numbers and then increasing by an annual growth rate to estimate trip ends in the model year. The values used for estimation are shown in Table 12. Temple Square had an estimated five million visitors in 2013, which translates to roughly 13,700 visitors per day and 27,400 trip ends per day. The SLC library is the second most popular destination in Salt Lake with approximately four million visitors per year or roughly 11,000 visitors and 22,000 trip ends per day.\n\n\n\n\nTable 12: Adjustment Factors for Select Counties/Area Types\n\n\n\n\n\n\n\n\nSpecial Generator\nBase Year\nBase Year Daily Trip Ends\nAnnual Growth Rate\n\n\n\n\nTemple Square\n2013\n27400\n1.0%\n\n\nSLC Library\n2005\n22000\n1.0%\n\n\n\n\n\n\nAfter calculating model year attractions for the two special generators, the total attractions are then added to TAZ attractions proportionally amongst the trip purposes HBOth and NHBNW for the TAZ including Temple Square and HBOth, NHBW, and NHBNW for the TAZ including SLC Library.\n\n\n\nCHECK ENTIRE SECTION - we updated this but I forgot what we did - ask bill There are several locations with the TDM where trips to and from colleges are estimated. Home-based college (HBC) trips are separately generated and distributed as part of the Input Processing scripts and are found in TripTable.mtx. HBC trips are those of enrolled students traveling to and from campus. These trips bypass Trip Generation and Trip Distribution scripts. The attractions for other trip purposes to colleges are generated together with the other trips within the containing TAZ. Adjustments are then made to account for additional attractions to colleges for the three trip purposes of HBOth, NHBW, and NHBNW.\nHBOth, NHBNW, and NHBNW trip adjustments are calculated through the following steps:\n\nCalculate the number of full-time-equivalent (FTE) students per campus by multiplying the enrollment control total for a college campus from TripTableControlTotal.csv by the FTE rate for the college campus from College_Factors.csv.\nCalculate the total attractions that should be generated based on the number of FTE students. This is done by multiplying the number of FTE students (step 1) by 2.4 vehicle attractions per student (based on all purposes from ITE, exact reference not included) multiplied by 1.7 person trips to vehicle trips (source not stated, is it the HHSurvey??).\nCalculate HBW trips associated with college campus in its containing TAZ with the following steps:\n\nMultiply FTE students (step 1) by the college employment factor (see Table 13) to get the estimated number of employees for a college campus.\nDivide the estimated number of employees for a college campus by the total employment (TOTEMP) for the containing TAZ to obtain a college employment ratio. The ratio is capped at 1.0.\nThe college employment ratio is then multiplied by the number of HBW trips to determine which portion of HBW are associated with the college.\n\nCalculate the number of non-HBC/HBW attractions to add to the TAZ by subtracting the college associated HBW trips (step 3) and HBC trips (TripTable.mtx) from the total attractions (step 2).\nDistribute the additional attractions (step 4) proportionally amongst HBOth, NHBW, and NHBNW.\n\n\n\n\n\nTable 13: College Employment Factors\n\n\nCollege\nCollege Employment Factor\n\n\n\n\nWeber State University\n0.25\n\n\nUtah Valley University\n0.25\n\n\nSalt Lake Community College\n0.29\n\n\nLDSBC\n0.33\n\n\nWestminster\n0.33\n\n\nUniversity of Utah\n0.71\n\n\nBrigham Young University\n0.71\n\n\nUnspecified\n0.48"
  },
  {
    "objectID": "v9x/v900/calib-valid/4-trip-gen.html#balance-productions-and-attractions",
    "href": "v9x/v900/calib-valid/4-trip-gen.html#balance-productions-and-attractions",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The final step of Trip Generation is to balance the productions and attractions. Balancing takes place by proportionally increasing or decreasing productions/attractions across the entire model space to match regional totals. For trips internal to the model space (non-externals) the attractions are balanced to match the productions. External trip productions and attractions are balanced in the WFRC/MAG model space. The IX productions are balanced to the IX attractions and the XI attractions are balanced to the XI productions. Truck trips are already balanced since TAZ attractions were set equal TAZ productions. –really?\nThere is also an important distinction to be understood regarding non-home-based trips. While non-home-based productions are based on household characteristics of a TAZ, the trips are not actually being produced in the home TAZ location. They are produced at another location, hence the term non-home-based. Non-home-based productions, thus, are only used to get total values that are then used to balance non-home-based attractions. After attractions are balanced to match productions, TAZ productions are set equal to TAZ attractions. So, non-home-based productions are used to get the quantity of trips, but attractions are used to get the distribution of trips."
  },
  {
    "objectID": "v9x/v900/calib-valid/4-trip-gen.html#validation-results",
    "href": "v9x/v900/calib-valid/4-trip-gen.html#validation-results",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The validation results for the Trip Generation portion of the model are shown in this section. All the 2012 Household Survey results are scaled to the 2010 Census.\n\n\n\n\n                                                \nFigure 1: Productions to Households Ratios – Total Trip Ends (II + IX).\n\n\n\n\n\n\n\n                                                \nFigure 2: Total Trip Validation.\n\n\n\n\n\n\n\n                                                \nFigure 3: Trip Balance Ratios."
  },
  {
    "objectID": "v9x/v900/calib-valid/5-distribution.html",
    "href": "v9x/v900/calib-valid/5-distribution.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "Trip Distribution\nThe validation results for the Trip Distribution portion of the model are shown in this section. The observed data comes from the 2012 Household Survey.\nFigure 1: Average Trip Length between model and observed.\n\n\n\n\n\n\n\nCode\nviewof varSelect = Inputs.select(new Map([['Generalized Cost','GenCost'], ['Distance', 'Distance'], ['Time', 'Time']]), {value: 'Variable', label: \"Variable\"})\n\nviewof purpSelect  = Inputs.select(new Map([['Main Purposes', 'MainPurposes'], ['External Purposes', 'Externals'], ['Telecommute Purposes', 'Telecommute']]), {value: 'PurpType', label: \"Purpose Set\"});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\ndataLT = transpose(dataStats)\nfiltered_data = dataLT.filter(function(dataL) {\n    return varSelect == dataL.Variable &&\n           purpSelect == dataL.PurpType;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nimport {GroupedBarChart} from \"@d3/grouped-bar-chart\"\nimport {Legend, Swatches} from \"@d3/color-legend\"\nimport {howto, altplot} from \"@d3/example-components\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlotTable\n\n\n\n\nCode\nkey = Legend(chart.scales.color, {title: \"Data Source\"})\nchart = GroupedBarChart(filtered_data, {\n    x: d =&gt; d.Purpose,\n    y: d =&gt; d.AVG_TRIP_LEN,\n    z: d =&gt; d.DataSource,\n    yLabel: \"Average Trip Length\",\n    //yDomain: [0,1],\n    zDomain: ['Model','Observed'],\n    width,\n    height: 500,\n    colors: [\"#376092\", \"#77933c\"]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(filtered_data)"
  },
  {
    "objectID": "v9x/v900/calib-valid/6-mc.html",
    "href": "v9x/v900/calib-valid/6-mc.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The validation results for the Mode Choice portion of the model are shown in this section. The observed data comes from the Utah Transit Authority 2019 On-Board Survey as well as the 2012 Household Travel Survey.\n\n\nThe mode choice constants within the model used to estimate mode shares are shown below:\nTable 1: Mode Choice Constants\n\n\n\n\n\n\n\nCode\n// label: fig-mc-consts\n// fig-cap: Mode Choice Constants\n// echo: false\nInputs.table(transpose(constants))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe following figure provides and interactive view to understand the mode share by different modes, periods, and purposes between modeled and observed data.\nFigure 1: Mode share between model and observed by mode, period, and purpose.\n\n\nCode\nviewof plotSelect = Inputs.select(new Map([['Mode','Mode'], ['Motorized / Non-Motorized', 'Motorized / Non-Motorized'], ['Drive Alone / Share Ride', 'Drive Alone / Share Ride'], ['Share 2 / Share 3+', 'Share 2 / Share 3+'], ['Auto / Transit', 'Auto / Transit'], ['Transit Mode', 'Transit Mode'], ['Access Mode', 'Access Mode']]), {value: 'Title', label: \"Plot Type\"})\n\nviewof periodSelect  = Inputs.select(new Map([['Peak', 'PK'], ['Off-Peak', 'OK'], ['Daily', 'DY']]), {value: 'Period', label: \"Time Period:\"});\n\nviewof purposeSelect  = Inputs.select(new Map([['Home-based Work', 'HBW'], ['Home-based College', 'HBC'], ['Home-based Other', 'HBO'], ['Non-home Based', 'NHB'], ['All Purposes', 'All']]), {value: 'TripPurpose', label: \"Trip Purpose:\"});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\ndataLT = transpose(dataLong)\nfiltered_data = dataLT.filter(function(dataL) {\n    return plotSelect == dataL.Title &&\n           periodSelect == dataL.Period &&\n           purposeSelect == dataL.TripPurpose;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nimport {GroupedBarChart} from \"@d3/grouped-bar-chart\"\nimport {Legend, Swatches} from \"@d3/color-legend\"\nimport {howto, altplot} from \"@d3/example-components\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlotTable\n\n\n\n\nCode\nkey = Legend(chart.scales.color, {title: \"Data Source\"})\nchart = GroupedBarChart(filtered_data, {\n    x: d =&gt; d.Mode,\n    y: d =&gt; d.Percent,\n    z: d =&gt; d.DataSource,\n    yLabel: \"Percent\",\n    yDomain: [0,1],\n    zDomain: ['Model','Observed'],\n    width,\n    height: 500,\n    colors: [\"#376092\", \"#77933c\"]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(filtered_data)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe following figure provides and interactive view to understand the transit boarding trips, linked trips, transfer ratios, and mode surveyed between modeled and observed data.\nFigure 2: Transit boardings by trip, linked trip, transfer ratio, and mode surveyed.\n\n\nCode\nviewof bPlotSelect = Inputs.select(new Map([['Trips', 'Trips'], ['Boardings by Linked Trip', 'Boardings by Linked Trip'], ['Transfer Ratio','Transfer Ratio'], ['Boardings by Mode Surveyed','Boardings by Mode Surveyed']]), {value: 'Title', label: \"Plot Type\"})\n\n\n\n\n\n\n\n\n\nCode\ndataBLT = transpose(boardLong)\nfiltered_bData = dataBLT.filter(function(dataL) {\n    return bPlotSelect == dataL.Title &&\n           \"Value\" == dataL.View;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlotTable\n\n\n\n\nCode\nkey2 = Legend(chart2.scales.color, {title: \"Data Source\"})\nchart2 = GroupedBarChart(filtered_bData, {\n    x: d =&gt; d.Mode,\n    y: d =&gt; d.ViewValue,\n    z: d =&gt; d.DataSource,\n    yLabel: \"Value\",\n    zDomain: ['Model','Observed'],\n    width,\n    height: 500,\n    colors: [\"#376092\", \"#77933c\"]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(filtered_bData)\n\n\n\n\n\n\n\n\n\n\nFigure 3: Transit boardings – absolute and relative difference between model and observed.\n\n\nCode\nviewof bPlotSelect2 = Inputs.select(new Map([['Trips', 'Trips'], ['Boardings by Linked Trip', 'Boardings by Linked Trip'], ['Transfer Ratio','Transfer Ratio'], ['Boardings by Mode Surveyed','Boardings by Mode Surveyed']]), {value: 'Title', label: \"Plot Type\"})\n\n\n\n\n\n\n\n\n\nCode\nviewof metric = Inputs.radio(new Map([[\"Absolute\", \"Diff\"], [\"Relative\", \"PercentDiff\"]]), {value: \"View\", label: \"Change\"})\n\n\n\n\n\n\n\n\n\nCode\nfiltered_bData2 = dataBLT.filter(function(dataL) {\n    return bPlotSelect2 == dataL.Title  &&\n           metric == dataL.View;\n})\n\n\n\n\n\n\n\n\nPlotTable\n\n\n\n\nCode\nimport {DivergingBarChart} from \"@d3/diverging-bar-chart\"\nchart3 = DivergingBarChart(filtered_bData2, {\n    x: d =&gt; d.ViewValue,\n    y: d =&gt; d.Mode,\n    xFormat: metric === \"Diff\" ? \"+,d\" : \"+%\",\n    width,\n    height: 500,\n    colors: d3.schemeRdBu[3]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(filtered_bData2)"
  },
  {
    "objectID": "v9x/v900/calib-valid/6-mc.html#mode-choice-constants",
    "href": "v9x/v900/calib-valid/6-mc.html#mode-choice-constants",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The mode choice constants within the model used to estimate mode shares are shown below:\nTable 1: Mode Choice Constants\n\n\n\n\n\n\n\nCode\n// label: fig-mc-consts\n// fig-cap: Mode Choice Constants\n// echo: false\nInputs.table(transpose(constants))"
  },
  {
    "objectID": "v9x/v900/calib-valid/6-mc.html#mode-share",
    "href": "v9x/v900/calib-valid/6-mc.html#mode-share",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The following figure provides and interactive view to understand the mode share by different modes, periods, and purposes between modeled and observed data.\nFigure 1: Mode share between model and observed by mode, period, and purpose.\n\n\nCode\nviewof plotSelect = Inputs.select(new Map([['Mode','Mode'], ['Motorized / Non-Motorized', 'Motorized / Non-Motorized'], ['Drive Alone / Share Ride', 'Drive Alone / Share Ride'], ['Share 2 / Share 3+', 'Share 2 / Share 3+'], ['Auto / Transit', 'Auto / Transit'], ['Transit Mode', 'Transit Mode'], ['Access Mode', 'Access Mode']]), {value: 'Title', label: \"Plot Type\"})\n\nviewof periodSelect  = Inputs.select(new Map([['Peak', 'PK'], ['Off-Peak', 'OK'], ['Daily', 'DY']]), {value: 'Period', label: \"Time Period:\"});\n\nviewof purposeSelect  = Inputs.select(new Map([['Home-based Work', 'HBW'], ['Home-based College', 'HBC'], ['Home-based Other', 'HBO'], ['Non-home Based', 'NHB'], ['All Purposes', 'All']]), {value: 'TripPurpose', label: \"Trip Purpose:\"});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\ndataLT = transpose(dataLong)\nfiltered_data = dataLT.filter(function(dataL) {\n    return plotSelect == dataL.Title &&\n           periodSelect == dataL.Period &&\n           purposeSelect == dataL.TripPurpose;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nimport {GroupedBarChart} from \"@d3/grouped-bar-chart\"\nimport {Legend, Swatches} from \"@d3/color-legend\"\nimport {howto, altplot} from \"@d3/example-components\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlotTable\n\n\n\n\nCode\nkey = Legend(chart.scales.color, {title: \"Data Source\"})\nchart = GroupedBarChart(filtered_data, {\n    x: d =&gt; d.Mode,\n    y: d =&gt; d.Percent,\n    z: d =&gt; d.DataSource,\n    yLabel: \"Percent\",\n    yDomain: [0,1],\n    zDomain: ['Model','Observed'],\n    width,\n    height: 500,\n    colors: [\"#376092\", \"#77933c\"]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(filtered_data)"
  },
  {
    "objectID": "v9x/v900/calib-valid/6-mc.html#boardings",
    "href": "v9x/v900/calib-valid/6-mc.html#boardings",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "The following figure provides and interactive view to understand the transit boarding trips, linked trips, transfer ratios, and mode surveyed between modeled and observed data.\nFigure 2: Transit boardings by trip, linked trip, transfer ratio, and mode surveyed.\n\n\nCode\nviewof bPlotSelect = Inputs.select(new Map([['Trips', 'Trips'], ['Boardings by Linked Trip', 'Boardings by Linked Trip'], ['Transfer Ratio','Transfer Ratio'], ['Boardings by Mode Surveyed','Boardings by Mode Surveyed']]), {value: 'Title', label: \"Plot Type\"})\n\n\n\n\n\n\n\n\n\nCode\ndataBLT = transpose(boardLong)\nfiltered_bData = dataBLT.filter(function(dataL) {\n    return bPlotSelect == dataL.Title &&\n           \"Value\" == dataL.View;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlotTable\n\n\n\n\nCode\nkey2 = Legend(chart2.scales.color, {title: \"Data Source\"})\nchart2 = GroupedBarChart(filtered_bData, {\n    x: d =&gt; d.Mode,\n    y: d =&gt; d.ViewValue,\n    z: d =&gt; d.DataSource,\n    yLabel: \"Value\",\n    zDomain: ['Model','Observed'],\n    width,\n    height: 500,\n    colors: [\"#376092\", \"#77933c\"]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(filtered_bData)\n\n\n\n\n\n\n\n\n\n\nFigure 3: Transit boardings – absolute and relative difference between model and observed.\n\n\nCode\nviewof bPlotSelect2 = Inputs.select(new Map([['Trips', 'Trips'], ['Boardings by Linked Trip', 'Boardings by Linked Trip'], ['Transfer Ratio','Transfer Ratio'], ['Boardings by Mode Surveyed','Boardings by Mode Surveyed']]), {value: 'Title', label: \"Plot Type\"})\n\n\n\n\n\n\n\n\n\nCode\nviewof metric = Inputs.radio(new Map([[\"Absolute\", \"Diff\"], [\"Relative\", \"PercentDiff\"]]), {value: \"View\", label: \"Change\"})\n\n\n\n\n\n\n\n\n\nCode\nfiltered_bData2 = dataBLT.filter(function(dataL) {\n    return bPlotSelect2 == dataL.Title  &&\n           metric == dataL.View;\n})\n\n\n\n\n\n\n\n\nPlotTable\n\n\n\n\nCode\nimport {DivergingBarChart} from \"@d3/diverging-bar-chart\"\nchart3 = DivergingBarChart(filtered_bData2, {\n    x: d =&gt; d.ViewValue,\n    y: d =&gt; d.Mode,\n    xFormat: metric === \"Diff\" ? \"+,d\" : \"+%\",\n    width,\n    height: 500,\n    colors: d3.schemeRdBu[3]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(filtered_bData2)"
  },
  {
    "objectID": "v9x/v900/calib-valid/7-assign.html",
    "href": "v9x/v900/calib-valid/7-assign.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "CO_FIPS\nSEGID\nValid\nATYPENAME\nMod_AWDT\nObs_AWDT\nDiff\nPct_Dev\nDiff_Sq\nMod_Car\n...\nDiff_MD\nPct_Dev_MD\nDiff_Sq_MD\nMod_HV\nObs_HV\nDiff_HV\nPct_Dev_HV\nDiff_Sq_HV\nModelVMT\nObserveVMT\n\n\n\n\n0\n49\n0006_146.9\nPrincipal\nRural\n1549.2\n1492.7280\n56.4720\n0.037831\n3.189087e+03\n1279.8\n...\n99.453066\n1.914513\n9.890912e+03\n118.0\n94.041864\n23.958136\n0.254760\n5.739923e+02\n4708.053705\n4536.434025\n\n\n1\n49\n0006_149.9\nPrincipal\nRural\n1601.0\n2401.9440\n-800.9440\n-0.333457\n6.415113e+05\n1341.9\n...\n-66.743514\n-0.294357\n4.454697e+03\n99.1\n226.022930\n-126.922930\n-0.561549\n1.610943e+04\n1085.450236\n1628.476378\n\n\n2\n49\n0006_150.6\nPrincipal\nRural\n1808.8\n2401.9440\n-593.1440\n-0.246943\n3.518198e+05\n1520.1\n...\n-44.343514\n-0.195567\n1.966347e+03\n106.3\n226.022930\n-119.722930\n-0.529694\n1.433358e+04\n3568.949724\n4739.284263\n\n\n3\n49\n0006_152.6\nMinor\nRural\n2719.5\n2378.3280\n341.1720\n0.143450\n1.163983e+05\n2270.4\n...\n-77.500345\n-0.211460\n6.006303e+03\n160.1\n298.004498\n-137.904498\n-0.462760\n1.901765e+04\n860.109226\n752.205131\n\n\n4\n49\n0006_152.9\nPrincipal\nRural\n3959.5\n3606.0087\n353.4913\n0.098028\n1.249561e+05\n3239.2\n...\n-102.473923\n-0.186835\n1.050090e+04\n274.3\n415.412202\n-141.112202\n-0.339692\n1.991265e+04\n11574.505020\n10541.170810\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n6969\n57\n3470_000.0\nAll\nSuburban\n6077.7\n1882.2632\n4195.4368\n2.228932\n1.760169e+07\n5196.7\n...\n379.987895\n1.585846\n1.443908e+05\n261.4\n163.756898\n97.643102\n0.596269\n9.534175e+03\n6316.868272\n1956.333594\n\n\n6970\n49\nMAG_6017\nAll\nUrban\n56076.4\n2250.4976\n53825.9024\n23.917334\n2.897228e+09\n43951.4\n...\n7158.120413\n28.994379\n5.123869e+07\n4720.0\n108.473984\n4611.526016\n42.512737\n2.126617e+07\n43174.572650\n1732.712373\n\n\n6971\n49\nMAG_6164\nAll\nUrban\n14518.3\n547.3000\n13971.0000\n25.527133\n1.951888e+08\n12295.3\n...\n1482.661190\n24.695046\n2.198284e+06\n680.3\n26.379860\n653.920140\n24.788613\n4.276115e+05\n2552.950731\n96.239225\n\n\n6972\n35\nWFRC_8004\nAll\nSuburban\n4967.6\n7288.4928\n-2320.8928\n-0.318432\n5.386543e+06\n4471.1\n...\n-479.645878\n-0.576258\n2.300602e+05\n143.8\n419.817185\n-276.017185\n-0.657470\n7.618549e+04\n3199.134400\n4693.789363\n\n\n6973\n35\nWFRC_8263\nNaN\nNaN\nNaN\n7288.4928\nNaN\n0.000000\nNaN\nNaN\n...\nNaN\n0.000000\nNaN\nNaN\n419.817185\nNaN\n0.000000\nNaN\nNaN\n2769.627264\n\n\n\n\n6974 rows × 26 columns\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nviewof vvSelect = Inputs.select(new Map([['Volume','Volume'], ['VMT','VMT']]), {value: 'Variable', label: \"Select Summary Variable:\"})\n//viewof bCountySelect2 = Inputs.select(new Map([['Box Elder',3], ['Weber',57], ['Davis',11], ['Salt Lake',35], ['Utah',49], ['Region', 'All']]), {value: 'CO_FIPS', label: \"Select Region:\"})\n\n\n\n\n\n\n\n\n\nCode\nvvp = transpose(vvpct)\nvvpL = transpose(vvpctLong)\nvvaL = transpose(vvabsLong)\nvvaLR = transpose(vvabsLongR)\ntable_vvData = vvp.filter(function(dataL) {\n    return vvSelect == dataL.Variable;\n})\nstack_vvaData = vvaLR.filter(function(dataL) {\n    return vvSelect == dataL.Variable; //&&\n           //bCountySelect2 == dataL.CO_FIPS;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nModel v. ObservedRegional Summary Table\n\n\n\n\nCode\nimport {GroupedBarChart} from \"@d3/grouped-bar-chart\"\nimport {Legend, Swatches} from \"@d3/color-legend\"\nimport {howto, altplot} from \"@d3/example-components\"\nchart2 = GroupedBarChart(stack_vvaData, {\n    x: d =&gt; d.FunctionalType,\n    y: d =&gt; d.Value,\n    z: d =&gt; d.DataSource,\n    yLabel: \"Value\",\n    zDomain: ['Model','Observed'],\n    width,\n    height: 500,\n    colors: [\"#376092\", \"#77933c\"]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(table_vvData, {\n  style: {\n    fontSize: 16,\n  },\n  columns: [\n    \"FunctionalType\",\n    \"All\",\n    \"Box Elder\",\n    \"Weber\",\n    'Davis',\n    'Salt Lake',\n    'Utah'\n  ],\n  header: {\n    FunctionalType:\"FT\",\n    All: 'Region'\n  }})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nviewof bCountySelect = Inputs.select(new Map([['Box Elder',3], ['Weber',57], ['Davis',11], ['Salt Lake',35], ['Utah',49], ['Region', 'All']]), {value: 'CO_FIPS', label: \"Select Region:\"})\n\n\n\n\n\n\n\n\n\nCode\nvolT = transpose(vol)\nvmtT = transpose(vmt)\nfiltered_volData = volT.filter(function(dataL) {\n    return bCountySelect == dataL.CO_FIPS;\n})\nfiltered_vmtData = vmtT.filter(function(dataL){\n    return bCountySelect == dataL.CO_FIPS;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 1: Average Daily Comparison by Facility Type (Volume).\n\n\nCode\nInputs.table(filtered_volData, {\n  style: {\n    fontSize: 16,\n  },\n  columns: [\n    \"FunctionalType\",\n    \"NumberOfSegs\",\n    \"ModelVolume\",\n    \"CountVolume\",\n    'VolDiff',\n    'VolPctDiff',\n    'RMSE',\n    'PctRMSE'\n  ],\n  header: {\n    FunctionalType:\"FT\",\n    NumberOfSegs:\"NumSegs\",\n    ModelVolume:\"Model\",\n    CountVolume:\"Observe\",\n    VolDiff:'Diff',\n    VolPctDiff:'PctDiff',\n    RMSE:'RMSE',\n    PctRMS:'PctRMSE'\n  }})\n\n\n\n\n\n\n\nTable 2: Average Daily Comparison by Facility Type (VMT).\n\n\nCode\nInputs.table(filtered_vmtData, {\n  style: {\n    fontSize: 16,\n  },\n  columns: [\n    \"FunctionalType\",\n    \"NumberOfSegs\",\n    \"ModelVMT\",\n    \"ObserveVMT\",\n    'VMTDiff',\n    'VMTPctDiff'\n  ],\n  header: {\n    FunctionalType:\"FT\",\n    NumberOfSegs:\"NumSegs\",\n    ModelVMT:\"Model\",\n    ObserveVMT:\"Observe\",\n    VMTDiff:'Diff',\n    VMTPctDiff:'PctDiff'\n  }})\n\n\n\n\n\n\n\n\n\n\n\n???Hard to find regression model that starts at (0,0) – Good enough???\n???Hard to create pct error graphs with bins???\n???Should I just do screen shots of the validation charts???\n\n\n\n\n\n\n\nCode\nviewof vehSelect = Inputs.select(new Map([['All','All'], ['Car','Car'], ['MD', 'MD'], ['HV','HV']]), {value: 'Vehicle', label: \"Select Vehicle:\"})\n\n\n\n\n\n\n\n\n\nCode\nvalidT = transpose(validc)\nfiltered_vehData = validT.filter(function(dataL) {\n    return vehSelect == dataL.Vehicle;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nML = require(\"https://www.lactame.com/lib/ml/6.0.0/ml.min.js\")\nvehData_lm = new ML.SimpleLinearRegression(filtered_vehData.map(d =&gt; d.Observed), filtered_vehData.map(d =&gt; d.Model))\nvehData_coefficients = vehData_lm.coefficients \n\nvehData_corr = vehData_lm.score(filtered_vehData.map(d =&gt; d.Observed), filtered_vehData.map(d =&gt; d.Model))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nchart = Plot.plot({\n  marks: [\n    Plot.dot(filtered_vehData, { // Add scatterplot (blue points)\n      x: \"Observed\",\n      y: \"Model\",\n      fill: \"blue\",\n      r: 4,\n      opacity: 0.4\n    }),\n    Plot.linearRegressionY(filtered_vehData, {\n      x: \"Observed\",\n      y: \"Model\"\n    }),\n    Plot.text( // Add text annotation for model estimates (shown in blue)\n      [`y = ${vehData_coefficients[1].toFixed(1)}x - ${-vehData_coefficients[0].toFixed(1)}\n        \n        𝘙 ² = ${vehData_corr.r2.toFixed(2)}\n        \n        𝘳 = ${vehData_corr.r.toFixed(2)}` \n      ],\n      {frameAnchor: \"bottom-right\", \n       dy: -20,\n       fontSize: 16, \n       fill: \"blue\", \n       fontWeight: 600} \n    )\n  ]\n})\n\n\n\n\n\n\n\n\n\n\n???Add screen shots of the TTT to get the segment-level validation map of model vs. obseved for all vehicles, cars and LT, MD, and HV???\n\n\n\nAccess to opportunities, also referred to as accessibility or ATO, is a way to measure how well people can connect to jobs, or vice versa. ATO metrics quantify how well the current and future transportation system work with land use. Both shorter travel times and an increased presence of employment and other opportunities result in higher accessibility scores.\nA script to calculate ATO metrics, 1_Access_to_Opportunity.s located in the 2_ModelScripts\\7_PostProcessing folder, has been added to the model’s _HailMary.s batch script and runs automatically with every model run. The script sums the number of jobs and households that are within a typical commute travel shed (in minutes) by auto and transit. The typical commute travel shed is defined using a distance decay curve estimated from the 2012 household travel survey. Metrics that combine the jobs and households are also calculated.\nResults from the ATO script are output into 7_PostProcessing\\Access_to_Opportunity_@DemographicYear@.dbf. Results can be joined with the TAZ shapefile to visualize the data, such as is shown in Figure 1 and Figure 2.\n??? Using the CompJobHHByTran and CompJobHHByAuto fields…is that right???&lt;/mark\n\n\n\n\n\nFigure 1: Access to opportunity by auto mode.\n\n\n\n\n\n\n\n\n\nFigure 2: Access to opportunity by transit mode."
  },
  {
    "objectID": "v9x/v900/calib-valid/7-assign.html#table-summaries",
    "href": "v9x/v900/calib-valid/7-assign.html#table-summaries",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "CO_FIPS\nSEGID\nValid\nATYPENAME\nMod_AWDT\nObs_AWDT\nDiff\nPct_Dev\nDiff_Sq\nMod_Car\n...\nDiff_MD\nPct_Dev_MD\nDiff_Sq_MD\nMod_HV\nObs_HV\nDiff_HV\nPct_Dev_HV\nDiff_Sq_HV\nModelVMT\nObserveVMT\n\n\n\n\n0\n49\n0006_146.9\nPrincipal\nRural\n1549.2\n1492.7280\n56.4720\n0.037831\n3.189087e+03\n1279.8\n...\n99.453066\n1.914513\n9.890912e+03\n118.0\n94.041864\n23.958136\n0.254760\n5.739923e+02\n4708.053705\n4536.434025\n\n\n1\n49\n0006_149.9\nPrincipal\nRural\n1601.0\n2401.9440\n-800.9440\n-0.333457\n6.415113e+05\n1341.9\n...\n-66.743514\n-0.294357\n4.454697e+03\n99.1\n226.022930\n-126.922930\n-0.561549\n1.610943e+04\n1085.450236\n1628.476378\n\n\n2\n49\n0006_150.6\nPrincipal\nRural\n1808.8\n2401.9440\n-593.1440\n-0.246943\n3.518198e+05\n1520.1\n...\n-44.343514\n-0.195567\n1.966347e+03\n106.3\n226.022930\n-119.722930\n-0.529694\n1.433358e+04\n3568.949724\n4739.284263\n\n\n3\n49\n0006_152.6\nMinor\nRural\n2719.5\n2378.3280\n341.1720\n0.143450\n1.163983e+05\n2270.4\n...\n-77.500345\n-0.211460\n6.006303e+03\n160.1\n298.004498\n-137.904498\n-0.462760\n1.901765e+04\n860.109226\n752.205131\n\n\n4\n49\n0006_152.9\nPrincipal\nRural\n3959.5\n3606.0087\n353.4913\n0.098028\n1.249561e+05\n3239.2\n...\n-102.473923\n-0.186835\n1.050090e+04\n274.3\n415.412202\n-141.112202\n-0.339692\n1.991265e+04\n11574.505020\n10541.170810\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n6969\n57\n3470_000.0\nAll\nSuburban\n6077.7\n1882.2632\n4195.4368\n2.228932\n1.760169e+07\n5196.7\n...\n379.987895\n1.585846\n1.443908e+05\n261.4\n163.756898\n97.643102\n0.596269\n9.534175e+03\n6316.868272\n1956.333594\n\n\n6970\n49\nMAG_6017\nAll\nUrban\n56076.4\n2250.4976\n53825.9024\n23.917334\n2.897228e+09\n43951.4\n...\n7158.120413\n28.994379\n5.123869e+07\n4720.0\n108.473984\n4611.526016\n42.512737\n2.126617e+07\n43174.572650\n1732.712373\n\n\n6971\n49\nMAG_6164\nAll\nUrban\n14518.3\n547.3000\n13971.0000\n25.527133\n1.951888e+08\n12295.3\n...\n1482.661190\n24.695046\n2.198284e+06\n680.3\n26.379860\n653.920140\n24.788613\n4.276115e+05\n2552.950731\n96.239225\n\n\n6972\n35\nWFRC_8004\nAll\nSuburban\n4967.6\n7288.4928\n-2320.8928\n-0.318432\n5.386543e+06\n4471.1\n...\n-479.645878\n-0.576258\n2.300602e+05\n143.8\n419.817185\n-276.017185\n-0.657470\n7.618549e+04\n3199.134400\n4693.789363\n\n\n6973\n35\nWFRC_8263\nNaN\nNaN\nNaN\n7288.4928\nNaN\n0.000000\nNaN\nNaN\n...\nNaN\n0.000000\nNaN\nNaN\n419.817185\nNaN\n0.000000\nNaN\nNaN\n2769.627264\n\n\n\n\n6974 rows × 26 columns\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nviewof vvSelect = Inputs.select(new Map([['Volume','Volume'], ['VMT','VMT']]), {value: 'Variable', label: \"Select Summary Variable:\"})\n//viewof bCountySelect2 = Inputs.select(new Map([['Box Elder',3], ['Weber',57], ['Davis',11], ['Salt Lake',35], ['Utah',49], ['Region', 'All']]), {value: 'CO_FIPS', label: \"Select Region:\"})\n\n\n\n\n\n\n\n\n\nCode\nvvp = transpose(vvpct)\nvvpL = transpose(vvpctLong)\nvvaL = transpose(vvabsLong)\nvvaLR = transpose(vvabsLongR)\ntable_vvData = vvp.filter(function(dataL) {\n    return vvSelect == dataL.Variable;\n})\nstack_vvaData = vvaLR.filter(function(dataL) {\n    return vvSelect == dataL.Variable; //&&\n           //bCountySelect2 == dataL.CO_FIPS;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nModel v. ObservedRegional Summary Table\n\n\n\n\nCode\nimport {GroupedBarChart} from \"@d3/grouped-bar-chart\"\nimport {Legend, Swatches} from \"@d3/color-legend\"\nimport {howto, altplot} from \"@d3/example-components\"\nchart2 = GroupedBarChart(stack_vvaData, {\n    x: d =&gt; d.FunctionalType,\n    y: d =&gt; d.Value,\n    z: d =&gt; d.DataSource,\n    yLabel: \"Value\",\n    zDomain: ['Model','Observed'],\n    width,\n    height: 500,\n    colors: [\"#376092\", \"#77933c\"]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nInputs.table(table_vvData, {\n  style: {\n    fontSize: 16,\n  },\n  columns: [\n    \"FunctionalType\",\n    \"All\",\n    \"Box Elder\",\n    \"Weber\",\n    'Davis',\n    'Salt Lake',\n    'Utah'\n  ],\n  header: {\n    FunctionalType:\"FT\",\n    All: 'Region'\n  }})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nviewof bCountySelect = Inputs.select(new Map([['Box Elder',3], ['Weber',57], ['Davis',11], ['Salt Lake',35], ['Utah',49], ['Region', 'All']]), {value: 'CO_FIPS', label: \"Select Region:\"})\n\n\n\n\n\n\n\n\n\nCode\nvolT = transpose(vol)\nvmtT = transpose(vmt)\nfiltered_volData = volT.filter(function(dataL) {\n    return bCountySelect == dataL.CO_FIPS;\n})\nfiltered_vmtData = vmtT.filter(function(dataL){\n    return bCountySelect == dataL.CO_FIPS;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 1: Average Daily Comparison by Facility Type (Volume).\n\n\nCode\nInputs.table(filtered_volData, {\n  style: {\n    fontSize: 16,\n  },\n  columns: [\n    \"FunctionalType\",\n    \"NumberOfSegs\",\n    \"ModelVolume\",\n    \"CountVolume\",\n    'VolDiff',\n    'VolPctDiff',\n    'RMSE',\n    'PctRMSE'\n  ],\n  header: {\n    FunctionalType:\"FT\",\n    NumberOfSegs:\"NumSegs\",\n    ModelVolume:\"Model\",\n    CountVolume:\"Observe\",\n    VolDiff:'Diff',\n    VolPctDiff:'PctDiff',\n    RMSE:'RMSE',\n    PctRMS:'PctRMSE'\n  }})\n\n\n\n\n\n\n\nTable 2: Average Daily Comparison by Facility Type (VMT).\n\n\nCode\nInputs.table(filtered_vmtData, {\n  style: {\n    fontSize: 16,\n  },\n  columns: [\n    \"FunctionalType\",\n    \"NumberOfSegs\",\n    \"ModelVMT\",\n    \"ObserveVMT\",\n    'VMTDiff',\n    'VMTPctDiff'\n  ],\n  header: {\n    FunctionalType:\"FT\",\n    NumberOfSegs:\"NumSegs\",\n    ModelVMT:\"Model\",\n    ObserveVMT:\"Observe\",\n    VMTDiff:'Diff',\n    VMTPctDiff:'PctDiff'\n  }})"
  },
  {
    "objectID": "v9x/v900/calib-valid/7-assign.html#validation-charts",
    "href": "v9x/v900/calib-valid/7-assign.html#validation-charts",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "???Hard to find regression model that starts at (0,0) – Good enough???\n???Hard to create pct error graphs with bins???\n???Should I just do screen shots of the validation charts???\n\n\n\n\n\n\n\nCode\nviewof vehSelect = Inputs.select(new Map([['All','All'], ['Car','Car'], ['MD', 'MD'], ['HV','HV']]), {value: 'Vehicle', label: \"Select Vehicle:\"})\n\n\n\n\n\n\n\n\n\nCode\nvalidT = transpose(validc)\nfiltered_vehData = validT.filter(function(dataL) {\n    return vehSelect == dataL.Vehicle;\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nML = require(\"https://www.lactame.com/lib/ml/6.0.0/ml.min.js\")\nvehData_lm = new ML.SimpleLinearRegression(filtered_vehData.map(d =&gt; d.Observed), filtered_vehData.map(d =&gt; d.Model))\nvehData_coefficients = vehData_lm.coefficients \n\nvehData_corr = vehData_lm.score(filtered_vehData.map(d =&gt; d.Observed), filtered_vehData.map(d =&gt; d.Model))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nchart = Plot.plot({\n  marks: [\n    Plot.dot(filtered_vehData, { // Add scatterplot (blue points)\n      x: \"Observed\",\n      y: \"Model\",\n      fill: \"blue\",\n      r: 4,\n      opacity: 0.4\n    }),\n    Plot.linearRegressionY(filtered_vehData, {\n      x: \"Observed\",\n      y: \"Model\"\n    }),\n    Plot.text( // Add text annotation for model estimates (shown in blue)\n      [`y = ${vehData_coefficients[1].toFixed(1)}x - ${-vehData_coefficients[0].toFixed(1)}\n        \n        𝘙 ² = ${vehData_corr.r2.toFixed(2)}\n        \n        𝘳 = ${vehData_corr.r.toFixed(2)}` \n      ],\n      {frameAnchor: \"bottom-right\", \n       dy: -20,\n       fontSize: 16, \n       fill: \"blue\", \n       fontWeight: 600} \n    )\n  ]\n})"
  },
  {
    "objectID": "v9x/v900/calib-valid/7-assign.html#map-analysis",
    "href": "v9x/v900/calib-valid/7-assign.html#map-analysis",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "???Add screen shots of the TTT to get the segment-level validation map of model vs. obseved for all vehicles, cars and LT, MD, and HV???"
  },
  {
    "objectID": "v9x/v900/calib-valid/7-assign.html#ato-analysis",
    "href": "v9x/v900/calib-valid/7-assign.html#ato-analysis",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "Access to opportunities, also referred to as accessibility or ATO, is a way to measure how well people can connect to jobs, or vice versa. ATO metrics quantify how well the current and future transportation system work with land use. Both shorter travel times and an increased presence of employment and other opportunities result in higher accessibility scores.\nA script to calculate ATO metrics, 1_Access_to_Opportunity.s located in the 2_ModelScripts\\7_PostProcessing folder, has been added to the model’s _HailMary.s batch script and runs automatically with every model run. The script sums the number of jobs and households that are within a typical commute travel shed (in minutes) by auto and transit. The typical commute travel shed is defined using a distance decay curve estimated from the 2012 household travel survey. Metrics that combine the jobs and households are also calculated.\nResults from the ATO script are output into 7_PostProcessing\\Access_to_Opportunity_@DemographicYear@.dbf. Results can be joined with the TAZ shapefile to visualize the data, such as is shown in Figure 1 and Figure 2.\n??? Using the CompJobHHByTran and CompJobHHByAuto fields…is that right???&lt;/mark\n\n\n\n\n\nFigure 1: Access to opportunity by auto mode.\n\n\n\n\n\n\n\n\n\nFigure 2: Access to opportunity by transit mode."
  },
  {
    "objectID": "v9x/v900/calib-valid/8-sensitivity.html",
    "href": "v9x/v900/calib-valid/8-sensitivity.html",
    "title": "Version 9.0.0 - Calibration/Validation",
    "section": "",
    "text": "Sensitivity Tests\n???Did we do any sensitivity tests???"
  }
]